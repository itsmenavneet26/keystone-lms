import{i as R,o as n,a as x,b as a,t as r,e as d,u as l,cF as q,cm as G,f as y,w as _,k as C,a2 as F,l as p,x as I,y as Q,z as W,c as K,L as T,A as X,p as Y,P as Z,cG as ee,N as O,a9 as le,F as ae,r as te,E as $,B as c,g as se}from"./index-H4DTv6Le.js";import{_ as oe}from"./EmptyState.vue_vue_type_script_setup_true_lang-C4EPuQXe.js";import{_ as ne}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CKfttt8M.js";import{T as B}from"./TabButtons-BM55rf33.js";const ue={class:"flex flex-col border rounded-md p-3 h-full hover:border-outline-gray-3"},re={class:"flex space-x-4 mb-4"},de={class:"flex flex-col space-y-2 flex-1 break-all"},ie={class:"text-lg font-semibold text-ink-gray-9"},ce={class:"font-medium text-ink-gray-7 leading-5"},me={class:"flex items-center space-x-1 text-sm text-ink-gray-7"},ve={key:0,class:"flex items-center space-x-1 text-sm text-ink-gray-7"},pe={class:"space-x-2 mt-auto"},_e={__name:"JobCard",props:{job:{type:Object,default:null}},setup(o){const m=R("$dayjs");return(i,b)=>(n(),x("div",ue,[a("div",re,[a("div",de,[a("div",ie,r(o.job.company_name),1),a("span",ce,r(o.job.job_title),1),a("div",me,[d(l(q),{class:"size-3"}),a("span",null,r(o.job.location)+r(o.job.country?`, ${o.job.country}`:""),1)]),o.job.applicants?(n(),x("div",ve,[d(l(G),{class:"size-3"}),a("span",null,r(o.job.applicants)+" "+r(o.job.applicants>1?i.__("applicants"):i.__("applicant")),1)])):y("",!0)])]),a("div",pe,[d(l(F),null,{default:_(()=>[C(r(o.job.type),1)]),_:1}),o.job.work_mode?(n(),p(l(F),{key:0},{default:_(()=>[C(r(o.job.work_mode),1)]),_:1})):y("",!0),d(l(F),null,{default:_(()=>[C(r(l(m)(o.job.creation).fromNow()),1)]),_:1})])]))}},be={class:""},fe={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ye={class:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center justify-between w-full md:w-4/5 mx-auto mb-2 p-5"},he={class:"flex items-center justify-between"},ge={class:"text-xl font-semibold text-ink-gray-9 md:mb-0"},ke={class:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-4 md:space-y-0"},we={class:"flex items-center space-x-4"},xe={class:"grid grid-cols-2 gap-4"},je={key:0,class:"w-full md:w-4/5 mx-auto p-5 pt-0"},Ve={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Te={__name:"Jobs",setup(o){const m=R("$user"),i=c(null),b=c(null),{brand:S}=I(),h=c(""),k=c(null),u=c({}),J=c({}),U=c(0),M=c(0),f=c("Open"),z=window.read_only_mode;Q(()=>{L(),A(),v()});const N=$(()=>{var e;return(e=m.data)==null?void 0:e.is_moderator}),L=()=>{var t,w;if(!((t=m.data)!=null&&t.name))return;const e={status:"Closed"};N.value||(e.owner=(w=m.data)==null?void 0:w.name),W("frappe.client.get_count",{doctype:"Job Opportunity",filters:e}).then(V=>{M.value=V})},A=()=>{let e=new URLSearchParams(location.search);e.has("type")&&(i.value=e.get("type")),e.has("work_mode")&&(b.value=e.get("work_mode"))},j=$(()=>{const e=[{label:__("Open")}];return M.value&&e.push({label:__("Closed")}),e}),g=K({url:"lms.lms.api.get_job_opportunities",cache:["jobs"]}),v=()=>{D(),g.update({params:{filters:u.value,orFilters:J.value}}),g.reload()},D=()=>{var e;u.value.status="Open",i.value&&i.value!==" "?u.value.type=i.value:delete u.value.type,b.value&&b.value!==" "?u.value.work_mode=b.value:delete u.value.work_mode,h.value?J.value={job_title:["like",`%${h.value}%`],company_name:["like",`%${h.value}%`],location:["like",`%${h.value}%`]}:J.value={},k.value?u.value.country=k.value:delete u.value.country,f.value==="Closed"?(u.value.status="Closed",N.value||(u.value.owner=(e=m.data)==null?void 0:e.name)):(u.value.status="Open",delete u.value.owner)};T(f,e=>{v()}),T(k,e=>{v()}),T(g,()=>{var e;U.value=((e=g.data)==null?void 0:e.length)||0});const E=$(()=>[{label:" ",value:" "},{label:__("Full Time"),value:"Full Time"},{label:__("Part Time"),value:"Part Time"},{label:__("Contract"),value:"Contract"},{label:__("Freelance"),value:"Freelance"}]),H=$(()=>[{label:" ",value:" "},{label:"On site",value:"On-site"},{label:"Hybrid",value:"Hybrid"},{label:"Remote",value:"Remote"}]);return X(()=>({title:__("Jobs"),icon:S.favicon})),(e,t)=>{var V,P;const w=se("router-link");return n(),x("div",be,[a("header",fe,[d(l(ne),{class:"h-7",items:[{label:e.__("Jobs"),route:{name:"Jobs"}}]},null,8,["items"]),(V=l(m).data)!=null&&V.name?(n(),p(w,{key:0,to:{name:"JobForm",params:{jobName:"new"}}},{default:_(()=>[l(z)?y("",!0):(n(),p(l(Y),{key:0,variant:"solid"},{prefix:_(()=>[d(l(Z),{class:"h-4 w-4"})]),default:_(()=>[C(" "+r(e.__("New Job")),1)]),_:1}))]),_:1})):y("",!0)]),a("div",null,[a("div",ye,[a("div",he,[a("div",ge,r(e.__("{0} {1} Jobs").format(U.value,f.value)),1),j.value.length>1?(n(),p(l(B),{key:0,modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),buttons:j.value,class:"lg:hidden",onChange:v},null,8,["modelValue","buttons"])):y("",!0)]),a("div",ke,[j.value.length>1?(n(),p(l(B),{key:0,modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),buttons:j.value,class:"hidden lg:block",onChange:v},null,8,["modelValue","buttons"])):y("",!0),a("div",we,[d(l(O),{type:"text",placeholder:e.__("Search"),modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=s=>h.value=s),class:"w-full",onInput:v},{prefix:_(()=>[d(l(ee),{class:"w-4 h-4 stroke-1.5 text-ink-gray-5",name:"search"})]),_:1},8,["placeholder","modelValue"]),l(m).data?(n(),p(le,{key:0,doctype:"Country",modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=s=>k.value=s),placeholder:e.__("Country"),class:"w-full"},null,8,["modelValue","placeholder"])):y("",!0)]),a("div",xe,[d(l(O),{modelValue:i.value,"onUpdate:modelValue":[t[4]||(t[4]=s=>i.value=s),v],type:"select",options:E.value,class:"w-full min-w-32",placeholder:e.__("Type")},null,8,["modelValue","options","placeholder"]),d(l(O),{modelValue:b.value,"onUpdate:modelValue":[t[5]||(t[5]=s=>b.value=s),v],type:"select",options:H.value,class:"w-full min-w-32",placeholder:e.__("Work Mode")},null,8,["modelValue","options","placeholder"])])])]),(P=l(g).data)!=null&&P.length?(n(),x("div",je,[a("div",Ve,[(n(!0),x(ae,null,te(l(g).data,s=>(n(),p(w,{to:{name:"JobDetail",params:{job:s.name}},key:s.name},{default:_(()=>[d(_e,{job:s},null,8,["job"])]),_:2},1032,["to"]))),128))])])):(n(),p(oe,{key:1,type:"Job Openings"}))])])}}};export{Te as default};
//# sourceMappingURL=Jobs-DoG1KmFr.js.map
