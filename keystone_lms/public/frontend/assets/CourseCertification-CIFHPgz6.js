import{x as D,y as S,c as $,z as v,A as j,o as i,a as m,b as a,e as B,u as s,t as c,l as Y,f as E,F as L,i as h,q as R,B as d,E as V}from"./index-H4DTv6Le.js";import{_ as q}from"./UpcomingEvaluations-CCTbyaUW.js";import{_ as z}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CKfttt8M.js";const F={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},I={class:"p-5"},O={key:0},A={class:"text-lg text-ink-gray-9 font-semibold mb-1"},P={class:"text-ink-gray-9 text-sm"},T={class:"text-ink-gray-9 font-semibold"},U={class:"text-sm text-ink-gray-7 font-medium"},G={key:1},W={__name:"CourseCertification",props:{courseName:{type:String,required:!0}},setup(y){var f,_;const o=d(null),p=d(null),{brand:b}=D(),l=d([]),u=h("$user"),C=h("$dayjs"),g=R(),t=y;S(()=>{k(),N()});const r=$({url:"frappe.client.get_value",params:{doctype:"LMS Certificate",filters:{member:(f=u.data)==null?void 0:f.name,course:t.courseName},fieldname:["name","template","issue_date"]},cache:[(_=u.data)==null?void 0:_.name,t.courseName]}),k=()=>{var e;v("frappe.client.get_value",{doctype:"LMS Enrollment",filters:{member:(e=u.data)==null?void 0:e.name,course:t.courseName},fieldname:["purchased_certificate"]}).then(n=>{n.purchased_certificate?r.reload():g.push({name:"CourseDetail",params:{courseName:t.courseName}})})},N=()=>{v("frappe.client.get_value",{doctype:"LMS Course",filters:{name:t.courseName},fieldname:["title","evaluator"]}).then(e=>{o.value=e.title,p.value=e.evaluator,x()})},x=()=>{l.value=[{course:t.courseName,title:o.value,evaluator:p.value}]},M=e=>{window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=LMS+Certificate&name=${e.name}&format=${encodeURIComponent(e.template)}`,"_blank")},w=V(()=>[{label:__("Courses"),route:{name:"Courses"}},{label:o.value,route:{name:"CourseDetail",params:{courseName:t.courseName}}},{label:__("Certification")}]);return j(()=>({title:o.value,icon:b.favicon})),(e,n)=>(i(),m(L,null,[a("header",F,[B(s(z),{class:"h-7",items:w.value},null,8,["items"])]),a("div",I,[s(r).data&&Object.keys(s(r).data).length?(i(),m("div",O,[a("div",A,c(e.__("Certification")),1),a("div",P,c(e.__("You are already certified for this course. Click on the card below to open your certificate.")),1),a("div",{class:"border p-3 w-fit min-w-60 rounded-md space-y-2 hover:bg-surface-gray-1 cursor-pointer mt-5",onClick:n[0]||(n[0]=H=>M(s(r).data))},[a("div",T,c(o.value),1),a("div",U,c(e.__("Issued On"))+": "+c(s(C)(s(r).data.issue_date).format("DD MMM YYYY")),1)])])):(i(),m("div",G,[l.value.length?(i(),Y(q,{key:0,courses:l.value},null,8,["courses"])):E("",!0)]))])],64))}};export{W as default};
//# sourceMappingURL=CourseCertification-CIFHPgz6.js.map
