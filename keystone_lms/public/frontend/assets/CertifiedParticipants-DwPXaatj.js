import{x as G,y as W,W as $,A,o as u,a as m,b as l,e as o,u as a,w as g,p as M,k as S,t as r,G as O,N as b,$ as Q,f as y,F as P,r as T,l as L,n as H,i as j,q as I,z as K,B as f,E as J,g as X}from"./index-H4DTv6Le.js";import{_ as Z}from"./EmptyState.vue_vue_type_script_setup_true_lang-C4EPuQXe.js";import{_ as ee}from"./UserAvatar-BNFxJ-NV.js";import{_ as te}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CKfttt8M.js";const se={class:"sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},ae={class:"mx-auto w-full max-w-4xl pt-6 pb-10"},le={class:"flex flex-col md:flex-row justify-between mb-8 px-3"},oe={class:"text-xl font-semibold text-ink-gray-9 mb-4 md:mb-0"},re={class:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4"},ie={class:"flex items-center space-x-4"},ne={key:0,class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40"},ue={class:"flex items-center space-x-4"},de={key:0,class:""},ce={class:"rounded-md hover:bg-surface-gray-2 px-3"},me={class:"flex flex-col md:flex-row w-full"},fe={class:"flex-1"},_e={class:"text-base font-medium text-ink-gray-8"},pe={key:0,class:"mt-1.5 text-base text-ink-gray-5"},ve={class:"flex items-center space-x-3 md:space-x-24 text-sm md:text-base mt-1.5"},ge={class:"text-ink-gray-5"},xe={class:"text-ink-gray-5"},be={key:2,class:"flex justify-center mt-5"},Ve={__name:"CertifiedParticipants",setup(ye){const x=f({}),d=f(""),c=f(""),_=f(!1),p=f(!1),{brand:N}=G(),h=f(0),F=j("$dayjs"),w=j("$user"),U=I();W(()=>{if(!w.data){U.push({name:"Courses"});return}Y(),v()});const i=$({doctype:"LMS Certificate",url:"lms.lms.api.get_certified_participants",start:0,cache:["certified_participants"],pageLength:100}),z=()=>{K("lms.lms.api.get_count_of_certified_members",{filters:x.value}).then(e=>{h.value=e})},k=$({doctype:"LMS Certificate",url:"lms.lms.api.get_certification_categories",cache:["certification_categories"],auto:!!w.data,transform(e){return e.unshift({label:__(" "),value:" "}),e}}),v=()=>{B(),z(),q(),i.update({filters:x.value}),i.reload()},B=()=>{x.value={...d.value.trim("")&&{category:d.value},...c.value&&{member_name:["like",`%${c.value}%`]},..._.value&&{open_to_work:!0},...p.value&&{hiring:!0}}},q=()=>{let e=new URLSearchParams(location.search),t={category:d.value,name:c.value,"open-to-work":_.value,hiring:p.value};Object.keys(t).forEach(n=>{t[n]&&R(t[n])?e.set(n,t[n]):e.delete(n)}),history.replaceState({},"",`${location.pathname}${e.size>0?`?${e.toString()}`:""}`)},R=e=>typeof e=="string"?e.trim()!=="":!0,Y=()=>{let e=new URLSearchParams(location.search);c.value=e.get("name")||"",d.value=e.get("category")||"",_.value=e.get("open-to-opportunities")==="true",p.value=e.get("hiring")==="true"},D=J(()=>[{label:__("Certified Members"),route:{name:"CertifiedParticipants"}}]);return A(()=>({title:__("Certified Members"),icon:N.favicon})),(e,t)=>{var C,V;const n=X("router-link");return u(),m(P,null,[l("header",se,[o(a(te),{items:D.value},null,8,["items"]),o(n,{to:{name:"Courses",query:{certification:!0}}},{default:g(()=>[o(a(M),null,{prefix:g(()=>[o(a(O),{class:"h-4 w-4 stroke-1.5"})]),default:g(()=>[S(" "+r(e.__("Get Certified")),1)]),_:1})]),_:1})]),l("div",ae,[l("div",le,[l("div",oe,r(h.value)+" "+r(e.__("Certified Members")),1),l("div",re,[l("div",ie,[o(a(b),{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),placeholder:e.__("Search by Name"),type:"text",class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",onInput:t[1]||(t[1]=s=>v())},null,8,["modelValue","placeholder"]),(C=a(k).data)!=null&&C.length?(u(),m("div",ne,[o(a(Q),{modelValue:d.value,"onUpdate:modelValue":[t[2]||(t[2]=s=>d.value=s),t[3]||(t[3]=s=>v())],options:a(k).data,placeholder:e.__("Category")},null,8,["modelValue","options","placeholder"])])):y("",!0)]),l("div",ue,[o(a(b),{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=s=>_.value=s),label:e.__("Open to Work"),type:"checkbox",onChange:t[5]||(t[5]=s=>v())},null,8,["modelValue","label"]),o(a(b),{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=s=>p.value=s),label:e.__("Hiring"),type:"checkbox",onChange:t[7]||(t[7]=s=>v())},null,8,["modelValue","label"])])])]),(V=a(i).data)!=null&&V.length?(u(),m("div",de,[(u(!0),m(P,null,T(a(i).data,(s,E)=>(u(),L(n,{to:{name:"ProfileAbout",params:{username:s.username}}},{default:g(()=>[l("div",ce,[l("div",{class:H(["flex items-center w-full space-x-3 py-2",{"border-b":E<a(i).data.length-1}])},[o(ee,{user:s,size:"2xl"},null,8,["user"]),l("div",me,[l("div",fe,[l("div",_e,r(s.full_name),1),s.headline?(u(),m("div",pe,r(s.headline),1)):y("",!0)]),l("div",ve,[l("div",ge,r(s.certificate_count)+" "+r(s.certificate_count>1?e.__("certificates"):e.__("certificate")),1),t[9]||(t[9]=l("span",{class:"text-ink-gray-4 md:hidden"},"Â·",-1)),l("div",xe,r(a(F)(s.issue_date).format("DD MMM YYYY")),1)])])],2)])]),_:2},1032,["to"]))),256))])):(u(),L(Z,{key:1,type:"Certified Members"})),!a(i).list.loading&&a(i).hasNextPage?(u(),m("div",be,[o(a(M),{onClick:t[8]||(t[8]=s=>a(i).next())},{default:g(()=>[S(r(e.__("Load More")),1)]),_:1})])):y("",!0)])],64)}}};export{Ve as default};
//# sourceMappingURL=CertifiedParticipants-DwPXaatj.js.map
