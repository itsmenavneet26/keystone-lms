import{q as L,i as T,c as N,g as E,o as r,a as m,l as u,n as O,u as t,a2 as C,f as i,t as o,bm as H,e as c,a3 as I,b as n,h as P,j as z,bl as F,w as d,p as w,aU as G,bn as R,a1 as q,k as A,G as U,bo as Y,E as v,T as J,x as K,A as Q,F as S,r as M}from"./index-H4DTv6Le.js";import{_ as W}from"./CourseCard-BbwRDLnH.js";import{_ as X}from"./DateRange-BPai7n_6.js";import{_ as Z}from"./CourseInstructors-CmNKc7w9.js";import{_ as tt}from"./UserAvatar-BNFxJ-NV.js";import{_ as at}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CKfttt8M.js";const et={key:0,class:"border-2 rounded-md p-5 lg:w-72"},st={key:2,class:"text-lg font-semibold mb-3 text-ink-gray-9"},rt={key:3,class:"flex items-center mb-3 text-ink-gray-7"},nt={class:"flex items-center mb-3 text-ink-gray-7"},lt={key:4,class:"flex items-center text-ink-gray-7"},ct={key:5},D={__name:"BatchOverlay",props:{batch:{type:Object,default:null}},setup(a){const p=L(),h=T("$user"),k=window.read_only_mode,e=a,x=N({url:"lms.lms.utils.enroll_in_batch",makeParams(s){return{batch:e.batch.data.name}}}),B=()=>{h.data||(window.location.href=`/login?redirect-to=/batches/details/${e.batch.data.name}`),x.submit({},{onSuccess(s){J.success(__("You have been enrolled in this batch")),p.push({name:"Batch",params:{batchName:e.batch.data.name}})}})},l=v(()=>{var s,_,f;return h.data?(f=(s=e.batch.data)==null?void 0:s.students)==null?void 0:f.includes((_=h.data)==null?void 0:_.name):!1}),g=v(()=>{var s;return(s=h.data)==null?void 0:s.is_moderator}),y=v(()=>{var s;return(s=h.data)==null?void 0:s.is_evaluator}),b=v(()=>{var s,_;return((_=(s=e.batch.data)==null?void 0:s.instructors)==null?void 0:_.filter(f=>{var $;return f.name===(($=h.data)==null?void 0:$.name)}).length)>0}),V=v(()=>h.data?g.value||l.value||y.value:!1),j=v(()=>g.value||b.value);return(s,_)=>{const f=E("router-link");return a.batch.data?(r(),m("div",et,[a.batch.data.seat_count&&a.batch.data.seats_left>0?(r(),u(t(C),{key:0,variant:"subtle",theme:"green",size:"md",class:O(a.batch.data.amount||a.batch.data.courses.length?"float-right":"w-fit mb-4"),label:a.batch.data.seats_left+" "+(a.batch.data.seats_left>1?s.__("Seats Left"):s.__("Seat Left"))},null,8,["class","label"])):a.batch.data.seat_count&&a.batch.data.seats_left<=0?(r(),u(t(C),{key:1,variant:"subtle",theme:"red",size:"md",class:"float-right",label:s.__("Sold Out")},null,8,["label"])):i("",!0),a.batch.data.amount?(r(),m("div",st,o(t(H)(a.batch.data.amount,a.batch.data.currency)),1)):i("",!0),a.batch.data.courses.length?(r(),m("div",rt,[c(t(I),{class:"h-4 w-4 stroke-1.5 mr-2"}),n("span",null,o(a.batch.data.courses.length)+" "+o(s.__("Courses")),1)])):i("",!0),c(X,{startDate:a.batch.data.start_date,endDate:a.batch.data.end_date,class:"mb-3"},null,8,["startDate","endDate"]),n("div",nt,[c(t(P),{class:"h-4 w-4 stroke-1.5 mr-2"}),n("span",null,o(t(z)(a.batch.data.start_time))+" - "+o(t(z)(a.batch.data.end_time)),1)]),a.batch.data.timezone?(r(),m("div",lt,[c(t(F),{class:"h-4 w-4 stroke-1.5 mr-2"}),n("span",null,o(a.batch.data.timezone),1)])):i("",!0),t(k)?i("",!0):(r(),m("div",ct,[V.value?(r(),u(f,{key:0,to:{name:"Batch",params:{batchName:a.batch.data.name}}},{default:d(()=>[c(t(w),{variant:"solid",class:"w-full mt-4"},{prefix:d(()=>[l.value?(r(),u(t(G),{key:0,class:"size-4 stroke-1.5"})):(r(),u(t(R),{key:1,class:"size-4 stroke-1.5"}))]),default:d(()=>[n("span",null,o(l.value?s.__("Visit Batch"):s.__("Manage Batch")),1)]),_:1})]),_:1},8,["to"])):a.batch.data.paid_batch&&a.batch.data.seats_left>0&&a.batch.data.accept_enrollments?(r(),u(f,{key:1,to:{name:"Billing",params:{type:"batch",name:a.batch.data.name}}},{default:d(()=>[l.value?i("",!0):(r(),u(t(w),{key:0,class:"w-full mt-4",variant:"solid"},{prefix:d(()=>[c(t(q),{class:"size-4 stroke-1.5"})]),default:d(()=>[n("span",null,o(s.__("Register Now")),1)]),_:1}))]),_:1},8,["to"])):a.batch.data.allow_self_enrollment&&a.batch.data.seats_left&&a.batch.data.accept_enrollments?(r(),u(t(w),{key:2,variant:"solid",class:"w-full mt-2",onClick:_[0]||(_[0]=$=>B())},{prefix:d(()=>[c(t(U),{class:"size-4 stroke-1.5"})]),default:d(()=>[A(" "+o(s.__("Enroll Now")),1)]),_:1})):i("",!0),j.value?(r(),u(f,{key:3,to:{name:"BatchForm",params:{batchName:a.batch.data.name}}},{default:d(()=>[c(t(w),{class:"w-full mt-2"},{prefix:d(()=>[c(t(Y),{class:"size-4 stroke-1.5"})]),default:d(()=>[n("span",null,o(s.__("Edit")),1)]),_:1})]),_:1},8,["to"])):i("",!0)]))])):i("",!0)}}},ot={key:0,class:""},it={class:"sticky top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},dt={class:"m-5 pb-10"},ut={class:"flex justify-between w-full"},mt={class:"md:w-2/3"},ht={class:"text-3xl font-semibold text-ink-gray-9"},bt={class:"my-3 leading-6 text-ink-gray-7"},_t={class:"flex avatar-group overlap"},ft=["innerHTML"],vt={class:"hidden md:block"},kt={key:0},gt={class:"flex items-center mt-10"},yt={class:"text-2xl font-semibold text-ink-gray-9"},wt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-5"},pt={key:0},xt=["innerHTML"],Mt={__name:"BatchDetail",props:{batchName:{type:String,required:!0}},setup(a){T("$user");const p=L(),{brand:h}=K(),k=a,e=N({url:"lms.lms.utils.get_batch_details",cache:["batch",k.batchName],params:{batch:k.batchName},auto:!0,onSuccess:l=>{l||p.push({name:"Batches"})}}),x=N({url:"lms.lms.utils.get_batch_courses",params:{batch:k.batchName},cache:["batchCourses",k.batchName],auto:!0}),B=v(()=>{var g,y;let l=[{label:__("Batches"),route:{name:"Batches"}}];return l.push({label:(g=e==null?void 0:e.data)==null?void 0:g.title,route:{name:"BatchDetail",params:{batchName:(y=e==null?void 0:e.data)==null?void 0:y.name}}}),l});return Q(()=>{var l;return{title:(l=e==null?void 0:e.data)==null?void 0:l.title,icon:h.favicon}}),(l,g)=>{const y=E("router-link");return t(e).data?(r(),m("div",ot,[n("header",it,[c(t(at),{items:B.value},null,8,["items"])]),n("div",dt,[n("div",ut,[n("div",mt,[n("div",ht,o(t(e).data.title),1),n("div",bt,o(t(e).data.description),1),n("div",_t,[n("div",{class:O(["h-6 mr-1",{"avatar-group overlap":t(e).data.instructors.length>1}])},[(r(!0),m(S,null,M(t(e).data.instructors,b=>(r(),u(tt,{user:b},null,8,["user"]))),256))],2),c(Z,{instructors:t(e).data.instructors},null,8,["instructors"])]),c(D,{batch:t(e),class:"md:hidden mt-5"},null,8,["batch"]),n("div",{class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal mt-10",innerHTML:t(e).data.batch_details},null,8,ft)]),n("div",vt,[c(D,{batch:t(e)},null,8,["batch"])])]),t(e).data.courses.length?(r(),m("div",kt,[n("div",gt,[n("div",yt,o(l.__("Courses")),1)]),n("div",wt,[t(e).data.courses?(r(!0),m(S,{key:0},M(t(x).data,b=>(r(),m("div",{key:b.course},[c(y,{to:{name:"CourseDetail",params:{courseName:b.name}}},{default:d(()=>[(r(),u(W,{course:b,key:b.name},null,8,["course"]))]),_:2},1032,["to"])]))),128)):i("",!0)]),t(e).data.batch_details_raw?(r(),m("div",pt,[n("div",{innerHTML:t(e).data.batch_details_raw,class:"batch-description"},null,8,xt)])):i("",!0)])):i("",!0)])])):i("",!0)}}};export{Mt as default};
//# sourceMappingURL=BatchDetail-DVQu3xs3.js.map
