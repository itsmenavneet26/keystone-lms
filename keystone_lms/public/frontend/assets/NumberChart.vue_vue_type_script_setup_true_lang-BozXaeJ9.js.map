{"version":3,"file":"NumberChart.vue_vue_type_script_setup_true_lang-BozXaeJ9.js","sources":["../../../../frontend/node_modules/frappe-ui/src/components/Charts/helpers.ts","../../../../frontend/node_modules/frappe-ui/src/components/Charts/NumberChart.vue"],"sourcesContent":["import { dayjs } from '../../utils/dayjs'\n\nexport function formatLabel(name: string) {\n  return name\n    .split('_')\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ')\n}\n\nexport function formatValue(value: number, precision = 0, shorten = false) {\n  if (isNaN(value)) return value.toString()\n\n  let locale = 'en-US'\n\n  if (shorten) {\n    let formatted = new Intl.NumberFormat(locale, {\n      notation: 'compact',\n      maximumFractionDigits: precision,\n    }).format(value)\n\n    if (locale == 'en-IN') {\n      formatted = formatted.replace('T', 'K')\n    }\n\n    return formatted\n  } else {\n    precision = precision || guessPrecision(value)\n    return new Intl.NumberFormat(locale, {\n      minimumFractionDigits: precision,\n      maximumFractionDigits: precision,\n    }).format(value)\n  }\n}\n\nfunction guessPrecision(number: number) {\n  if (!number || isNaN(number)) return 0\n  const str = number.toString()\n  const decimalIndex = str.indexOf('.')\n  if (decimalIndex === -1) return 0\n  return Math.min(str.length - decimalIndex - 1, 2)\n}\n\nexport type TimeGrain =\n  | 'second'\n  | 'minute'\n  | 'hour'\n  | 'day'\n  | 'week'\n  | 'month'\n  | 'quarter'\n  | 'year'\nexport function formatDate(date: string, format?: string, grain: TimeGrain = 'day') {\n  if (!date) return ''\n\n  if (grain) {\n    const grainToFormat: Record<TimeGrain, string> = {\n      second: 'MMMM D, YYYY h:mm:ss A',\n      minute: 'MMMM D, YYYY h:mm A',\n      hour: 'MMMM D, YYYY h:00 A',\n      day: 'MMMM D, YYYY',\n      week: 'MMM Do, YYYY',\n      month: 'MMMM, YYYY',\n      year: 'YYYY',\n      quarter: '[Q]Q, YYYY',\n    }\n\n    format = grainToFormat[grain]\n  }\n\n  if (!format) {\n    format = 'MMM D, YY'\n  }\n\n  return dayjs(date).format(format)\n}\n\n\nexport function isObject(item: any) {\n  return item && typeof item === 'object' && !Array.isArray(item)\n}\n\nexport function mergeDeep(target: any, ...sources: any[]) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (!source || !isObject(target) || !isObject(source)) {\n    // Skip the current source if it's not a proper object\n    return mergeDeep(target, ...sources);\n  }\n\n  let output = Object.assign({}, target);\n\n  Object.keys(source).forEach((key) => {\n    if (isObject(source[key])) {\n      if (!(key in output)) {\n        output[key] = source[key];\n      } else {\n        output[key] = mergeDeep(output[key], source[key]);\n      }\n    } else {\n      output[key] = source[key];\n    }\n  });\n\n  return mergeDeep(output, ...sources);\n}\n","<template>\n  <div\n    class=\"flex max-h-[140px] items-center gap-2 overflow-hidden bg-surface-white text-ink-gray-8 px-6 pt-5\"\n    :class=\"config.delta ? 'pb-6' : 'pb-3'\"\n  >\n    <slot name=\"body\">\n      <div class=\"flex w-full flex-col\">\n        <slot name=\"title\">\n          <span class=\"truncate text-sm font-medium text-ink-gray-5\">\n            {{ config.title }}\n          </span>\n        </slot>\n        <slot name=\"subtitle\" v-bind=\"{ formatValue }\">\n          <div\n            class=\"flex flex-1 items-center gap-0.5 flex-shrink-0 truncate text-[24px] text-ink-gray-6 font-semibold leading-10\"\n          >\n            <div\n              v-if=\"config.prefix\"\n              v-html=\"config.prefix\"\n              class=\"size-4 table\"\n            />\n            {{ formatValue(config.value, 1, true) }}{{ config.suffix }}\n          </div>\n        </slot>\n        <slot name=\"delta\" v-bind=\"{ formatValue }\">\n          <div\n            v-if=\"config.delta\"\n            class=\"flex items-center gap-0.5 text-xs font-medium\"\n            :class=\"[\n              config.negativeIsBetter\n                ? config.delta >= 0\n                  ? 'text-ink-red-4'\n                  : 'text-ink-green-3'\n                : config.delta >= 0\n                  ? 'text-ink-green-3'\n                  : 'text-ink-red-4',\n            ]\"\n          >\n            <span class=\"\">\n              {{ config.delta >= 0 ? '↑' : '↓' }}\n            </span>\n            <span>\n              {{ config.deltaPrefix }}{{ formatValue(config.delta, 1, true)\n              }}{{ config.deltaSuffix }}\n            </span>\n          </div>\n        </slot>\n      </div>\n    </slot>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { formatValue } from './helpers'\nimport { NumberChartConfig } from './types'\n\ndefineProps<{ config: NumberChartConfig }>()\n</script>\n"],"names":["formatLabel","name","word","formatValue","value","precision","shorten","locale","guessPrecision","number","str","decimalIndex","formatDate","date","format","grain","dayjs","isObject","item","mergeDeep","target","sources","source","output","key","_createElementBlock","_normalizeClass","__props","_renderSlot","_ctx","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","_normalizeProps","_guardReactiveProps","_unref","_hoisted_3","_hoisted_5"],"mappings":"gIAEO,SAASA,EAAYC,EAAc,CACxC,OAAOA,EACJ,MAAM,GAAG,EACT,IAAKC,GAASA,EAAK,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAK,MAAM,CAAC,CAAC,EAC1D,KAAK,GAAG,CACb,CAEO,SAASC,EAAYC,EAAeC,EAAY,EAAGC,EAAU,GAAO,CACzE,GAAI,MAAMF,CAAK,EAAG,OAAOA,EAAM,SAAA,EAE/B,IAAIG,EAAS,QAEb,OAAID,EACc,IAAI,KAAK,aAAaC,EAAQ,CAC5C,SAAU,UACV,sBAAuBF,CAAA,CACxB,EAAE,OAAOD,CAAK,GAQfC,EAAYA,GAAaG,EAAeJ,CAAK,EACtC,IAAI,KAAK,aAAaG,EAAQ,CACnC,sBAAuBF,EACvB,sBAAuBA,CAAA,CACxB,EAAE,OAAOD,CAAK,EAEnB,CAEA,SAASI,EAAeC,EAAgB,CACtC,GAAI,CAACA,GAAU,MAAMA,CAAM,EAAG,MAAO,GACrC,MAAMC,EAAMD,EAAO,SAAA,EACbE,EAAeD,EAAI,QAAQ,GAAG,EACpC,OAAIC,IAAiB,GAAW,EACzB,KAAK,IAAID,EAAI,OAASC,EAAe,EAAG,CAAC,CAClD,CAWO,SAASC,EAAWC,EAAcC,EAAiBC,EAAmB,MAAO,CAClF,OAAKF,GAEDE,IAYFD,EAXiD,CAC/C,OAAQ,yBACR,OAAQ,sBACR,KAAM,sBACN,IAAK,eACL,KAAM,eACN,MAAO,aACP,KAAM,OACN,QAAS,YAAA,EAGYC,CAAK,GAGzBD,IACHA,EAAS,aAGJE,EAAMH,CAAI,EAAE,OAAOC,CAAM,GArBd,EAsBpB,CAGO,SAASG,EAASC,EAAW,CAClC,OAAOA,GAAQ,OAAOA,GAAS,UAAY,CAAC,MAAM,QAAQA,CAAI,CAChE,CAEO,SAASC,EAAUC,KAAgBC,EAAgB,CACxD,GAAI,CAACA,EAAQ,OAAQ,OAAOD,EAC5B,MAAME,EAASD,EAAQ,MAAA,EAEvB,GAAI,CAACC,GAAU,CAACL,EAASG,CAAM,GAAK,CAACH,EAASK,CAAM,EAElD,OAAOH,EAAUC,EAAQ,GAAGC,CAAO,EAGrC,IAAIE,EAAS,OAAO,OAAO,CAAA,EAAIH,CAAM,EAErC,cAAO,KAAKE,CAAM,EAAE,QAASE,GAAQ,CAC/BP,EAASK,EAAOE,CAAG,CAAC,GAChBA,KAAOD,EAGXA,EAAOC,CAAG,EAAIL,EAAUI,EAAOC,CAAG,EAAGF,EAAOE,CAAG,CAAC,EAGlDD,EAAOC,CAAG,EAAIF,EAAOE,CAAG,CAE5B,CAAC,EAEML,EAAUI,EAAQ,GAAGF,CAAO,CACrC,8TCxGEI,EAgDM,MAAA,CA/CJ,MAAKC,EAAA,CAAC,mGACEC,EAAA,OAAO,MAAK,OAAA,MAAA,CAAA,CAAA,GAEpBC,EA2COC,mBA3CP,IA2CO,CA1CLC,EAyCM,MAzCNC,EAyCM,CAxCJH,EAIOC,oBAJP,IAIO,CAHLC,EAEO,OAFPE,EAEOC,EADFN,EAAA,OAAO,KAAK,EAAA,CAAA,CAAA,GAGnBC,EAWOC,EAAA,OAAA,WAAAK,EAAAC,EAAA,CAAA,YAXyBC,EAAAjC,CAAA,CAAA,CAAW,CAAA,EAA3C,IAWO,CAVL2B,EASM,MATNO,EASM,CALIV,EAAA,OAAO,YADfF,EAIE,MAAA,OAFA,UAAQE,EAAA,OAAO,OACf,MAAM,cAAA,wBACN,IACFM,EAAGG,KAAYT,EAAA,OAAO,MAAK,EAAA,EAAA,CAAA,EAAAM,EAAgBN,EAAA,OAAO,MAAM,EAAA,CAAA,CAAA,KAG5DC,EAsBOC,EAAA,OAAA,QAAAK,EAAAC,EAAA,CAAA,YAtBsBC,EAAAjC,CAAA,CAAA,CAAW,CAAA,EAAxC,IAsBO,CApBGwB,EAAA,OAAO,WADfF,EAoBM,MAAA,OAlBJ,SAAM,gDAA+C,CAC7BE,EAAA,OAAO,iBAAmCA,EAAA,OAAO,OAAK,sCAAoGA,EAAA,OAAO,OAAK,2CAU9LG,EAEO,OAFPQ,EAEOL,EADFN,EAAA,OAAO,OAAK,EAAA,IAAA,GAAA,EAAA,CAAA,EAEjBG,EAGO,OAAA,KAAAG,EAFFN,EAAA,OAAO,WAAW,EAAAM,EAAMG,EAAAjC,CAAA,EAAYwB,EAAA,OAAO,MAAK,EAAA,EAAA,CAAA,EAAAM,EAC9CN,EAAA,OAAO,WAAW,EAAA,CAAA,CAAA","x_google_ignoreList":[0,1]}