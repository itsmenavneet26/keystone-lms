{"version":3,"file":"CourseOutline-Cer4xjyv.js","sources":["../../../../frontend/node_modules/@headlessui/vue/dist/components/disclosure/disclosure.js","../../../../frontend/src/components/CertificationLinks.vue","../../../../frontend/src/components/Modals/ChapterModal.vue","../../../../frontend/src/components/CourseOutline.vue"],"sourcesContent":["import{computed as m,defineComponent as b,inject as I,onMounted as P,onUnmounted as h,provide as R,ref as d,watchEffect as w}from\"vue\";import{useId as E}from'../../hooks/use-id.js';import{useResolveButtonType as H}from'../../hooks/use-resolve-button-type.js';import{State as y,useOpenClosed as L,useOpenClosedProvider as j}from'../../internal/open-closed.js';import{Keys as f}from'../../keyboard.js';import{dom as p}from'../../utils/dom.js';import{match as x}from'../../utils/match.js';import{Features as B,render as g}from'../../utils/render.js';var $=(o=>(o[o.Open=0]=\"Open\",o[o.Closed=1]=\"Closed\",o))($||{});let T=Symbol(\"DisclosureContext\");function O(t){let r=I(T,null);if(r===null){let o=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,O),o}return r}let k=Symbol(\"DisclosurePanelContext\");function U(){return I(k,null)}let N=b({name:\"Disclosure\",props:{as:{type:[Object,String],default:\"template\"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:r,attrs:o}){let s=d(t.defaultOpen?0:1),e=d(null),i=d(null),n={buttonId:d(`headlessui-disclosure-button-${E()}`),panelId:d(`headlessui-disclosure-panel-${E()}`),disclosureState:s,panel:e,button:i,toggleDisclosure(){s.value=x(s.value,{[0]:1,[1]:0})},closeDisclosure(){s.value!==1&&(s.value=1)},close(l){n.closeDisclosure();let a=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?p(l):p(n.button):p(n.button))();a==null||a.focus()}};return R(T,n),j(m(()=>x(s.value,{[0]:y.Open,[1]:y.Closed}))),()=>{let{defaultOpen:l,...a}=t,c={open:s.value===0,close:n.close};return g({theirProps:a,ourProps:{},slot:c,slots:r,attrs:o,name:\"Disclosure\"})}}}),Q=b({name:\"DisclosureButton\",props:{as:{type:[Object,String],default:\"button\"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:r,slots:o,expose:s}){let e=O(\"DisclosureButton\"),i=U(),n=m(()=>i===null?!1:i.value===e.panelId.value);P(()=>{n.value||t.id!==null&&(e.buttonId.value=t.id)}),h(()=>{n.value||(e.buttonId.value=null)});let l=d(null);s({el:l,$el:l}),n.value||w(()=>{e.button.value=l.value});let a=H(m(()=>({as:t.as,type:r.type})),l);function c(){var u;t.disabled||(n.value?(e.toggleDisclosure(),(u=p(e.button))==null||u.focus()):e.toggleDisclosure())}function D(u){var S;if(!t.disabled)if(n.value)switch(u.key){case f.Space:case f.Enter:u.preventDefault(),u.stopPropagation(),e.toggleDisclosure(),(S=p(e.button))==null||S.focus();break}else switch(u.key){case f.Space:case f.Enter:u.preventDefault(),u.stopPropagation(),e.toggleDisclosure();break}}function v(u){switch(u.key){case f.Space:u.preventDefault();break}}return()=>{var C;let u={open:e.disclosureState.value===0},{id:S,...K}=t,M=n.value?{ref:l,type:a.value,onClick:c,onKeydown:D}:{id:(C=e.buttonId.value)!=null?C:S,ref:l,type:a.value,\"aria-expanded\":e.disclosureState.value===0,\"aria-controls\":e.disclosureState.value===0||p(e.panel)?e.panelId.value:void 0,disabled:t.disabled?!0:void 0,onClick:c,onKeydown:D,onKeyup:v};return g({ourProps:M,theirProps:K,slot:u,attrs:r,slots:o,name:\"DisclosureButton\"})}}}),V=b({name:\"DisclosurePanel\",props:{as:{type:[Object,String],default:\"div\"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:o,expose:s}){let e=O(\"DisclosurePanel\");P(()=>{t.id!==null&&(e.panelId.value=t.id)}),h(()=>{e.panelId.value=null}),s({el:e.panel,$el:e.panel}),R(k,e.panelId);let i=L(),n=m(()=>i!==null?(i.value&y.Open)===y.Open:e.disclosureState.value===0);return()=>{var v;let l={open:e.disclosureState.value===0,close:e.close},{id:a,...c}=t,D={id:(v=e.panelId.value)!=null?v:a,ref:e.panel};return g({ourProps:D,theirProps:c,slot:l,attrs:r,slots:o,features:B.RenderStrategy|B.Static,visible:n.value,name:\"DisclosurePanel\"})}}});export{N as Disclosure,Q as DisclosureButton,V as DisclosurePanel};\n","<template>\n\t<Button\n\t\tv-if=\"certification.data && certification.data.certificate\"\n\t\t@click=\"downloadCertificate\"\n\t\tclass=\"\"\n\t>\n\t\t<template #prefix>\n\t\t\t<GraduationCap class=\"size-4 stroke-1.5\" />\n\t\t</template>\n\t\t{{ __('View Certificate') }}\n\t</Button>\n\t<div\n\t\tv-else-if=\"\n\t\t\tcertification.data &&\n\t\t\tcertification.data.membership &&\n\t\t\tcertification.data.paid_certificate &&\n\t\t\tuser.data?.is_student\n\t\t\"\n\t>\n\t\t<router-link\n\t\t\tv-if=\"!certification.data.membership.purchased_certificate\"\n\t\t\t:to=\"{\n\t\t\t\tname: 'Billing',\n\t\t\t\tparams: {\n\t\t\t\t\ttype: 'certificate',\n\t\t\t\t\tname: courseName,\n\t\t\t\t},\n\t\t\t}\"\n\t\t>\n\t\t\t<Button class=\"w-full\">\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<GraduationCap class=\"size-4 stroke-1.5\" />\n\t\t\t\t</template>\n\t\t\t\t{{ __('Get Certified') }}\n\t\t\t</Button>\n\t\t</router-link>\n\t\t<router-link\n\t\t\tv-else-if=\"!certification.data.membership.certificate\"\n\t\t\t:to=\"{\n\t\t\t\tname: 'CourseCertification',\n\t\t\t\tparams: {\n\t\t\t\t\tcourseName: courseName,\n\t\t\t\t},\n\t\t\t}\"\n\t\t>\n\t\t\t<Button class=\"w-full\">\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<GraduationCap class=\"size-4 stroke-1.5\" />\n\t\t\t\t</template>\n\t\t\t\t{{ __('Get Certified') }}\n\t\t\t</Button>\n\t\t</router-link>\n\t</div>\n</template>\n<script setup>\nimport { Button, createResource } from 'frappe-ui'\nimport { inject } from 'vue'\nimport { GraduationCap } from 'lucide-vue-next'\n\nconst user = inject('$user')\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst certification = createResource({\n\turl: 'lms.lms.api.get_certification_details',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tcourse: props.courseName,\n\t\t}\n\t},\n\tauto: user.data ? true : false,\n})\n\nconst downloadCertificate = () => {\n\twindow.open(\n\t\t`/api/method/frappe.utils.print_format.download_pdf?doctype=LMS+Certificate&name=${\n\t\t\tcertification.data.certificate.name\n\t\t}&format=${encodeURIComponent(certification.data.certificate.template)}`\n\t)\n}\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: chapterDetail ? __('Edit Chapter') : __('Add Chapter'),\n\t\t\tsize: 'lg',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: chapterDetail ? __('Edit') : __('Create'),\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) =>\n\t\t\t\t\t\tchapterDetail ? editChapter(close) : addChapter(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"space-y-4 text-base\">\n\t\t\t\t<FormControl label=\"Title\" v-model=\"chapter.title\" :required=\"true\" />\n\t\t\t\t<Switch\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t:label=\"__('SCORM Package')\"\n\t\t\t\t\t:description=\"\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Enable this only if you want to upload a SCORM package as a chapter.'\n\t\t\t\t\t\t)\n\t\t\t\t\t\"\n\t\t\t\t\tv-model=\"chapter.is_scorm_package\"\n\t\t\t\t/>\n\t\t\t\t<div v-if=\"chapter.is_scorm_package\">\n\t\t\t\t\t<FileUploader\n\t\t\t\t\t\tv-if=\"!chapter.scorm_package\"\n\t\t\t\t\t\t:fileTypes=\"['.zip']\"\n\t\t\t\t\t\t:validateFile=\"validateFile\"\n\t\t\t\t\t\t@success=\"(file) => (chapter.scorm_package = file)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot=\"{ file, progress, uploading, openFileSelector }\">\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button @click=\"openFileSelector\" :loading=\"uploading\">\n\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\tuploading ? `Uploading ${progress}%` : 'Upload an ZIP file'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FileUploader>\n\t\t\t\t\t<div v-else class=\"\">\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<div class=\"border rounded-md p-2 mr-2\">\n\t\t\t\t\t\t\t\t<FileText class=\"h-5 w-5 stroke-1.5 text-ink-gray-7\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t\t\t\t\t<span class=\"text-ink-gray-9\">\n\t\t\t\t\t\t\t\t\t{{ chapter.scorm_package.file_name }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"text-sm text-ink-gray-4 mt-1\">\n\t\t\t\t\t\t\t\t\t{{ getFileSize(chapter.scorm_package.file_size) }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t@click=\"() => (chapter.scorm_package = null)\"\n\t\t\t\t\t\t\t\tclass=\"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport {\n\tButton,\n\tcreateResource,\n\tDialog,\n\tFileUploader,\n\tFormControl,\n\tSwitch,\n\ttoast,\n} from 'frappe-ui'\nimport { reactive, watch, inject } from 'vue'\nimport { getFileSize } from '@/utils/'\nimport { FileText, X } from 'lucide-vue-next'\nimport { useOnboarding, useTelemetry } from 'frappe-ui/frappe'\n\nconst show = defineModel()\nconst outline = defineModel('outline')\nconst user = inject('$user')\nconst { capture } = useTelemetry()\nconst { updateOnboardingStep } = useOnboarding('learning')\n\nconst props = defineProps({\n\tcourse: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tchapterDetail: {\n\t\ttype: Object,\n\t},\n})\n\nconst chapter = reactive({\n\ttitle: '',\n\tis_scorm_package: 0,\n\tscorm_package: null,\n})\n\nconst chapterResource = createResource({\n\turl: 'lms.lms.api.upsert_chapter',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\ttitle: chapter.title,\n\t\t\tcourse: props.course,\n\t\t\tis_scorm_package: chapter.is_scorm_package,\n\t\t\tscorm_package: chapter.scorm_package,\n\t\t\tname: props.chapterDetail?.name,\n\t\t}\n\t},\n})\n\nconst chapterReference = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Chapter Reference',\n\t\t\t\tchapter: values.name,\n\t\t\t\tparent: props.course,\n\t\t\t\tparenttype: 'LMS Course',\n\t\t\t\tparentfield: 'chapters',\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst addChapter = async (close) => {\n\tchapterResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\treturn validateChapter()\n\t\t\t},\n\t\t\tonSuccess: (data) => {\n\t\t\t\tif (user.data?.is_system_manager)\n\t\t\t\t\tupdateOnboardingStep('create_first_chapter')\n\n\t\t\t\tcapture('chapter_created')\n\t\t\t\tchapterReference.submit(\n\t\t\t\t\t{ name: data.name },\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess(data) {\n\t\t\t\t\t\t\tcleanChapter()\n\t\t\t\t\t\t\toutline.value.reload()\n\t\t\t\t\t\t\ttoast.success(__('Chapter added successfully'))\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError(err) {\n\t\t\t\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tclose()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst validateChapter = () => {\n\tif (!chapter.title) {\n\t\treturn __('Title is required')\n\t}\n\tif (chapter.is_scorm_package && !chapter.scorm_package) {\n\t\treturn __('Please upload a SCORM package')\n\t}\n}\n\nconst cleanChapter = () => {\n\tchapter.title = ''\n\tchapter.is_scorm_package = 0\n\tchapter.scorm_package = null\n}\n\nconst editChapter = (close) => {\n\tchapterResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\tif (!chapter.title) {\n\t\t\t\t\treturn 'Title is required'\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\toutline.value.reload()\n\t\t\t\ttoast.success(__('Chapter updated successfully'))\n\t\t\t\tclose()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nwatch(\n\t() => props.chapterDetail,\n\t(newChapter) => {\n\t\tchapter.title = newChapter?.title\n\t\tchapter.is_scorm_package = newChapter?.is_scorm_package\n\t\tchapter.scorm_package = newChapter?.scorm_package\n\t}\n)\n\nconst validateFile = (file) => {\n\tlet extension = file.name.split('.').pop().toLowerCase()\n\tif (extension !== 'zip') {\n\t\treturn __('Only zip files are allowed')\n\t}\n}\n</script>\n","<template>\n\t<div class=\"\">\n\t\t<div\n\t\t\tv-if=\"title && (outline.data?.length || allowEdit)\"\n\t\t\tclass=\"flex items-center justify-between space-x-2 mb-4 px-2\"\n\t\t\t:class=\"{\n\t\t\t\t'sticky top-0 z-10 bg-surface-white border-b px-3 py-2.5 sm:px-5':\n\t\t\t\t\tallowEdit,\n\t\t\t}\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"font-semibold text-lg leading-5 text-ink-gray-9\"\n\t\t\t\t:class=\"{ 'font-medium text-p-base': allowEdit }\"\n\t\t\t>\n\t\t\t\t{{ __(title) }}\n\t\t\t</div>\n\t\t\t<Button size=\"sm\" v-if=\"allowEdit\" @click=\"openChapterModal()\">\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<Plus class=\"size-4 stroke-1.5\" />\n\t\t\t\t</template>\n\t\t\t\t{{ __('Add') }}\n\t\t\t</Button>\n\t\t</div>\n\t\t<div\n\t\t\t:class=\"{\n\t\t\t\t'border-2 rounded-md py-2 px-2': showOutline && outline.data?.length,\n\t\t\t}\"\n\t\t>\n\t\t\t<Draggable\n\t\t\t\t:list=\"outline.data\"\n\t\t\t\t:disabled=\"!allowEdit\"\n\t\t\t\titem-key=\"name\"\n\t\t\t\tgroup=\"chapters\"\n\t\t\t\t@end=\"updateChapterOrder\"\n\t\t\t>\n\t\t\t\t<template #item=\"{ element: chapter, index }\">\n\t\t\t\t\t<div class=\"chapter-item\">\n\t\t\t\t\t\t<Disclosure\n\t\t\t\t\t\t\tv-slot=\"{ open }\"\n\t\t\t\t\t\t\t:key=\"chapter.name\"\n\t\t\t\t\t\t\t:defaultOpen=\"openChapterDetail(chapter.idx)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DisclosureButton\n\t\t\t\t\t\t\t\tref=\"\"\n\t\t\t\t\t\t\t\tclass=\"flex items-center w-full p-2 group\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t'rotate-90 transform duration-200': open,\n\t\t\t\t\t\t\t\t\t\t'duration-200': !open,\n\t\t\t\t\t\t\t\t\t\thidden: chapter.is_scorm_package,\n\t\t\t\t\t\t\t\t\t\topen: index == 1,\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 stroke-1\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"text-base text-left text-ink-gray-9 font-medium leading-5 ml-2\"\n\t\t\t\t\t\t\t\t\t@click=\"redirectToChapter(chapter)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ chapter.title }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"flex ml-auto space-x-4\">\n\t\t\t\t\t\t\t\t\t<Tooltip :text=\"__('Edit Chapter')\" placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<FilePenLine\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"allowEdit\"\n\t\t\t\t\t\t\t\t\t\t\t@click.prevent=\"openChapterModal(chapter)\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 invisible group-hover:visible\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t<Tooltip :text=\"__('Delete Chapter')\" placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<Trash2\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"allowEdit\"\n\t\t\t\t\t\t\t\t\t\t\t@click.prevent=\"trashChapter(chapter.name)\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-red-3 invisible group-hover:visible\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</DisclosureButton>\n\t\t\t\t\t\t\t<DisclosurePanel v-if=\"!chapter.is_scorm_package\">\n\t\t\t\t\t\t\t\t<Draggable\n\t\t\t\t\t\t\t\t\tv-if=\"!chapter.is_scorm_package\"\n\t\t\t\t\t\t\t\t\t:list=\"chapter.lessons\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!allowEdit\"\n\t\t\t\t\t\t\t\t\titem-key=\"name\"\n\t\t\t\t\t\t\t\t\tgroup=\"items\"\n\t\t\t\t\t\t\t\t\t@end=\"updateOutline\"\n\t\t\t\t\t\t\t\t\t:data-chapter=\"chapter.name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template #item=\"{ element: lesson }\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"outline-lesson pl-8 py-2 pr-4 text-ink-gray-9\"\n\t\t\t\t\t\t\t\t\t\t\t:class=\"\n\t\t\t\t\t\t\t\t\t\t\t\tisActiveLesson(lesson.number) ? 'bg-surface-gray-3' : ''\n\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: allowEdit ? 'LessonForm' : 'Lesson',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcourseName: courseName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterNumber: lesson.number.split('-')[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlessonNumber: lesson.number.split('-')[1],\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center text-sm leading-5 group\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MonitorPlay\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.icon === 'icon-youtube'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<HelpCircle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-quiz'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<NotebookPen\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-assignment'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SquareCode\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-code'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FileText\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-list'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ lesson.title }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"allowEdit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click.prevent=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrashLesson(lesson.name, chapter.name)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-red-3 ml-auto invisible group-hover:visible\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Check\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.is_complete\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-green-700 ml-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t\t<div v-if=\"allowEdit\" class=\"flex mt-2 mb-4 pl-8\">\n\t\t\t\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t\t\t\tv-if=\"!chapter.is_scorm_package\"\n\t\t\t\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\t\t\t\tname: 'LessonForm',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tcourseName: courseName,\n\t\t\t\t\t\t\t\t\t\t\t\tchapterNumber: chapter.idx,\n\t\t\t\t\t\t\t\t\t\t\t\tlessonNumber: chapter.lessons.length + 1,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t\t\t{{ __('Add Lesson') }}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</DisclosurePanel>\n\t\t\t\t\t\t</Disclosure>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Draggable>\n\t\t</div>\n\t</div>\n\t<ChapterModal\n\t\tv-if=\"user.data\"\n\t\tv-model=\"showChapterModal\"\n\t\tv-model:outline=\"outline\"\n\t\t:course=\"courseName\"\n\t\t:chapterDetail=\"getCurrentChapter()\"\n\t/>\n</template>\n<script setup>\nimport { Button, createResource, Tooltip, toast } from 'frappe-ui'\nimport { getCurrentInstance, inject, ref, watch } from 'vue'\nimport Draggable from 'vuedraggable'\nimport { Disclosure, DisclosureButton, DisclosurePanel } from '@headlessui/vue'\nimport {\n\tCheck,\n\tChevronRight,\n\tFileText,\n\tFilePenLine,\n\tHelpCircle,\n\tMonitorPlay,\n\tNotebookPen,\n\tPlus,\n\tSquareCode,\n\tTrash2,\n\tNotebook,\n} from 'lucide-vue-next'\nimport { useRoute, useRouter } from 'vue-router'\nimport ChapterModal from '@/components/Modals/ChapterModal.vue'\n\nconst route = useRoute()\nconst router = useRouter()\nconst user = inject('$user')\nconst showChapterModal = ref(false)\nconst currentChapter = ref(null)\nconst app = getCurrentInstance()\nconst { $dialog } = app.appContext.config.globalProperties\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tshowOutline: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\ttitle: {\n\t\ttype: String,\n\t\tdefault: '',\n\t},\n\tallowEdit: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tgetProgress: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tlessonProgress: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t},\n})\n\nconst outline = createResource({\n\turl: 'lms.lms.utils.get_course_outline',\n\tcache: ['course_outline', props.courseName],\n\tmakeParams() {\n\t\treturn {\n\t\t\tcourse: props.courseName,\n\t\t\tprogress: props.getProgress,\n\t\t}\n\t},\n\tauto: true,\n})\n\nwatch(\n\t() => props.courseName,\n\t() => {\n\t\toutline.reload()\n\t}\n)\n\nwatch(\n\t() => props.lessonProgress,\n\t() => {\n\t\toutline.reload()\n\t}\n)\n\nconst deleteLesson = createResource({\n\turl: 'lms.lms.api.delete_lesson',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tlesson: values.lesson,\n\t\t\tchapter: values.chapter,\n\t\t}\n\t},\n\tonSuccess() {\n\t\toutline.reload()\n\t\ttoast.success(__('Lesson deleted successfully'))\n\t},\n})\n\nconst updateLessonIndex = createResource({\n\turl: 'lms.lms.api.update_lesson_index',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tlesson: values.lesson,\n\t\t\tsourceChapter: values.sourceChapter,\n\t\t\ttargetChapter: values.targetChapter,\n\t\t\tidx: values.idx,\n\t\t}\n\t},\n\tonSuccess() {\n\t\ttoast.success(__('Lesson moved successfully'))\n\t},\n})\n\nconst updateChapterIndex = createResource({\n\turl: 'lms.lms.api.update_chapter_index',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tchapter: values.chapter,\n\t\t\tcourse: values.course,\n\t\t\tidx: values.idx,\n\t\t}\n\t},\n\tonSuccess() {\n\t\ttoast.success(__('Chapter moved successfully'))\n\t},\n})\n\nconst trashLesson = (lessonName, chapterName) => {\n\t$dialog({\n\t\ttitle: __('Delete this lesson?'),\n\t\tmessage: __(\n\t\t\t'Deleting this lesson will permanently remove it from the course. This action cannot be undone. Are you sure you want to continue?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteLesson.submit({\n\t\t\t\t\t\tlesson: lessonName,\n\t\t\t\t\t\tchapter: chapterName,\n\t\t\t\t\t})\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nconst openChapterDetail = (index) => {\n\treturn index == route.params.chapterNumber || index == 1\n}\n\nconst openChapterModal = (chapter = null) => {\n\tcurrentChapter.value = chapter\n\tshowChapterModal.value = true\n}\n\nconst getCurrentChapter = () => {\n\treturn currentChapter.value\n}\n\nconst updateOutline = (e) => {\n\tupdateLessonIndex.submit({\n\t\tlesson: e.item.__draggable_context.element.name,\n\t\tsourceChapter: e.from.dataset.chapter,\n\t\ttargetChapter: e.to.dataset.chapter,\n\t\tidx: e.newIndex,\n\t})\n}\n\nconst updateChapterOrder = (e) => {\n\tupdateChapterIndex.submit({\n\t\tchapter: e.item.__draggable_context.element.name,\n\t\tcourse: props.courseName,\n\t\tidx: e.newIndex,\n\t})\n}\n\nconst deleteChapter = createResource({\n\turl: 'lms.lms.api.delete_chapter',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tchapter: values.chapter,\n\t\t}\n\t},\n\tonSuccess() {\n\t\toutline.reload()\n\t\ttoast.success(__('Chapter deleted successfully'))\n\t},\n})\n\nconst trashChapter = (chapterName) => {\n\t$dialog({\n\t\ttitle: __('Delete this chapter?'),\n\t\tmessage: __(\n\t\t\t'Deleting this chapter will also delete all its lessons and permanently remove it from the course. This action cannot be undone. Are you sure you want to continue?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteChapter.submit({ chapter: chapterName })\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nconst redirectToChapter = (chapter) => {\n\tif (!chapter.is_scorm_package) return\n\tevent.preventDefault()\n\tif (props.allowEdit) return\n\tif (!user.data) {\n\t\ttoast.success(__('Please enroll for this course to view this lesson'))\n\t\treturn\n\t}\n\n\trouter.push({\n\t\tname: 'SCORMChapter',\n\t\tparams: {\n\t\t\tcourseName: props.courseName,\n\t\t\tchapterName: chapter.name,\n\t\t},\n\t})\n}\n\nconst isActiveLesson = (lessonNumber) => {\n\treturn (\n\t\troute.params.chapterNumber == lessonNumber.split('-')[0] &&\n\t\troute.params.lessonNumber == lessonNumber.split('-')[1]\n\t)\n}\n</script>\n"],"names":["$","o","T","O","t","r","I","k","U","N","b","s","d","e","i","n","E","x","l","a","p","R","j","m","y","c","g","Q","P","h","w","H","u","D","S","f","v","C","K","M","V","L","B","user","inject","props","__props","certification","createResource","values","downloadCertificate","_unref","_createBlock","Button","_createVNode","GraduationCap","_createTextVNode","__","_createElementBlock","_hoisted_1","_component_router_link","show","_useModel","outline","capture","useTelemetry","updateOnboardingStep","useOnboarding","chapter","reactive","chapterResource","_a","chapterReference","addChapter","close","validateChapter","data","cleanChapter","toast","err","editChapter","watch","newChapter","validateFile","file","Dialog","$event","_createElementVNode","FormControl","_cache","Switch","_hoisted_2","_openBlock","_hoisted_4","_hoisted_5","_hoisted_6","FileText","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","getFileSize","X","FileUploader","_withCtx","progress","uploading","openFileSelector","_hoisted_3","route","useRoute","router","useRouter","showChapterModal","ref","currentChapter","app","getCurrentInstance","$dialog","deleteLesson","updateLessonIndex","updateChapterIndex","trashLesson","lessonName","chapterName","openChapterDetail","index","openChapterModal","getCurrentChapter","updateOutline","updateChapterOrder","deleteChapter","trashChapter","redirectToChapter","isActiveLesson","lessonNumber","_normalizeClass","Plus","Draggable","Disclosure","open","DisclosureButton","ChevronRight","Tooltip","FilePenLine","_withModifiers","Trash2","DisclosurePanel","lesson","MonitorPlay","HelpCircle","NotebookPen","SquareCode","Check","ChapterModal"],"mappings":"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","x_google_ignoreList":[0]}