import{x as D,c as _,a7 as E,y as F,T as f,av as $,aw as M,A as x,o as V,a as L,b as t,e as s,u as n,w as P,k as g,t as m,p as R,N as r,l as B,f as H,R as K,S as z,i as A,q as W,E as b,a9 as h}from"./index-H4DTv6Le.js";import{_ as G}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CKfttt8M.js";const I={class:""},Q={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},X={class:"py-5"},Y={class:"container border-b mb-4 pb-5"},Z={class:"text-lg font-semibold mb-4 text-ink-gray-9"},ee={class:"grid grid-cols-2 gap-5"},oe={class:"space-y-4"},ae={class:"space-y-4"},le={class:"container border-b mb-4 pb-5"},te={class:"text-lg font-semibold mb-4 text-ink-gray-9"},se={class:"grid grid-cols-2 gap-5"},ne={class:"container mt-4"},re={class:"block text-ink-gray-5 text-xs mb-1"},ue={__name:"JobForm",props:{jobName:{type:String,default:"new"}},setup(y){const p=A("$user"),d=W(),{brand:w}=D(),i=y,j=_({url:"frappe.client.insert",makeParams(e){return{doc:{doctype:"Job Opportunity",company_logo:a.company_logo,...a}}}}),J=_({url:"frappe.client.set_value",makeParams(e){return{doctype:"Job Opportunity",name:i.jobName,fieldname:{company_logo:a.company_logo,...a}}}}),c=_({url:"frappe.client.get",makeParams(e){return{doctype:"Job Opportunity",name:i.jobName}},onSuccess(e){var o,u;e.owner!=((o=p.data)==null?void 0:o.name)&&!((u=p.data)!=null&&u.is_moderator)&&d.push({name:"Jobs"}),Object.keys(e).forEach(l=>{Object.hasOwn(a,l)&&(a[l]=e[l])})}}),a=E({job_title:"",location:"",country:"",type:"Full Time",work_mode:"On-site",status:"Open",company_name:"",company_website:"",company_logo:null,description:"",company_email_address:""});F(()=>{p.data||d.push({name:"Jobs"}),i.jobName!="new"&&c.reload(),k()});const k=()=>{document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="s"&&(e.preventDefault(),v())})},v=()=>{O(),c.data?N():C()},C=()=>{j.submit({},{onSuccess(e){d.push({name:"JobDetail",params:{job:e.name}})},onError(e){var o;f.error(((o=e.messages)==null?void 0:o[0])||e)}})},N=()=>{J.submit({},{onSuccess(e){d.push({name:"JobDetail",params:{job:e.name}})},onError(e){var o;f.error(((o=e.messages)==null?void 0:o[0])||e)}})},O=()=>{a.description=$(a.description),Object.keys(a).forEach(e=>{e!="description"&&typeof a[e]=="string"&&(a[e]=M(a[e]))})},T=b(()=>[{label:"Full Time",value:"Full Time"},{label:"Part Time",value:"Part Time"},{label:"Contract",value:"Contract"},{label:"Freelance",value:"Freelance"}]),q=b(()=>[{label:"On site",value:"On-site"},{label:"Hybrid",value:"Hybrid"},{label:"Remote",value:"Remote"}]),S=b(()=>[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"}]),U=b(()=>[{label:__("Jobs"),route:{name:"Jobs"}},{label:i.jobName=="new"?__("New Job"):__("Edit Job"),route:{name:"JobForm"}}]);return x(()=>{var e;return{title:i.jobName=="new"?__("New Job"):(e=c.data)==null?void 0:e.job_title,icon:w.favicon}}),(e,o)=>{const u=h;return V(),L("div",I,[t("header",Q,[s(n(G),{items:U.value},null,8,["items"]),s(n(R),{variant:"solid",onClick:o[0]||(o[0]=l=>v())},{default:P(()=>[g(m(e.__("Save")),1)]),_:1})]),t("div",X,[t("div",Y,[t("div",Z,m(e.__("Job Details")),1),t("div",ee,[t("div",oe,[s(n(r),{modelValue:a.job_title,"onUpdate:modelValue":o[1]||(o[1]=l=>a.job_title=l),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),s(n(r),{modelValue:a.type,"onUpdate:modelValue":o[2]||(o[2]=l=>a.type=l),label:e.__("Type"),type:"select",options:T.value,required:!0},null,8,["modelValue","label","options"]),s(n(r),{modelValue:a.work_mode,"onUpdate:modelValue":o[3]||(o[3]=l=>a.work_mode=l),label:e.__("Work Mode"),type:"select",options:q.value,required:!0},null,8,["modelValue","label","options"])]),t("div",ae,[s(n(r),{modelValue:a.location,"onUpdate:modelValue":o[4]||(o[4]=l=>a.location=l),label:e.__("City"),required:!0},null,8,["modelValue","label"]),s(u,{modelValue:a.country,"onUpdate:modelValue":o[5]||(o[5]=l=>a.country=l),doctype:"Country",label:e.__("Country"),required:!0},null,8,["modelValue","label"]),y.jobName!="new"?(V(),B(n(r),{key:0,modelValue:a.status,"onUpdate:modelValue":o[6]||(o[6]=l=>a.status=l),label:e.__("Status"),type:"select",options:S.value,required:!0},null,8,["modelValue","label","options"])):H("",!0)])])]),t("div",le,[t("div",te,m(e.__("Company Details")),1),t("div",se,[t("div",null,[s(n(r),{modelValue:a.company_name,"onUpdate:modelValue":o[7]||(o[7]=l=>a.company_name=l),label:e.__("Company Name"),class:"mb-4",required:!0},null,8,["modelValue","label"]),s(n(r),{modelValue:a.company_website,"onUpdate:modelValue":o[8]||(o[8]=l=>a.company_website=l),label:e.__("Company Website"),required:!0},null,8,["modelValue","label"])]),t("div",null,[s(n(r),{modelValue:a.company_email_address,"onUpdate:modelValue":o[9]||(o[9]=l=>a.company_email_address=l),label:e.__("Company Email Address"),class:"mb-4",required:!0},null,8,["modelValue","label"]),s(K,{modelValue:a.company_logo,"onUpdate:modelValue":o[10]||(o[10]=l=>a.company_logo=l),label:e.__("Company Logo"),required:!0},null,8,["modelValue","label"])])])]),t("div",ne,[t("label",re,[g(m(e.__("Description"))+" ",1),o[12]||(o[12]=t("span",{class:"text-ink-red-3"},"*",-1))]),s(n(z),{content:a.description,onChange:o[11]||(o[11]=l=>a.description=l),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x border-outline-gray-modals bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem] mb-4"},null,8,["content"])])])])}}};export{ue as default};
//# sourceMappingURL=JobForm-BKmng75w.js.map
