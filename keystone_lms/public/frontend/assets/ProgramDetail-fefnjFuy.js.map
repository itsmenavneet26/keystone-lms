{"version":3,"file":"ProgramDetail-fefnjFuy.js","sources":["../../../../frontend/src/pages/Programs/ProgramDetail.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs :items=\"breadcrumbs\" />\n\t</header>\n\t<div v-if=\"program.data\" class=\"pt-5 px-5 pb-10 mx-auto\">\n\t\t<div class=\"flex items-center space-x-2 mb-5\">\n\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t{{ program.data.name }}\n\t\t\t</div>\n\n\t\t\t<Badge :theme=\"program.data.progress < 100 ? 'orange' : 'green'\">\n\t\t\t\t{{ program.data.progress }}% {{ __('completed') }}\n\t\t\t</Badge>\n\n\t\t\t<Tooltip\n\t\t\t\tv-if=\"program.data.enforce_course_order\"\n\t\t\t\tplacement=\"right\"\n\t\t\t\t:text=\"\n\t\t\t\t\t__(\n\t\t\t\t\t\t'Courses must be completed in order. You can only start the next course after completing the previous one.'\n\t\t\t\t\t)\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t<Info class=\"size-3 cursor-pointer\" />\n\t\t\t</Tooltip>\n\t\t</div>\n\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mb-5\">\n\t\t\t<div\n\t\t\t\tv-for=\"course in program.data.courses\"\n\t\t\t\t:key=\"course.name\"\n\t\t\t\tclass=\"relative group\"\n\t\t\t\t:class=\"\n\t\t\t\t\t(course.eligible && program.data.enforce_course_order) ||\n\t\t\t\t\t!program.data.enforce_course_order\n\t\t\t\t\t\t? 'cursor-pointer'\n\t\t\t\t\t\t: 'cursor-default'\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t<CourseCard\n\t\t\t\t\t:course=\"course\"\n\t\t\t\t\t@click=\"openCourse(course, program.data.enforce_course_order)\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!course.eligible && program.data.enforce_course_order\"\n\t\t\t\t\tclass=\"absolute inset-0 flex flex-col items-center justify-center space-y-2 text-ink-white rounded-md invisible group-hover:visible\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackground: 'radial-gradient(circle, darkgray 0%, lightgray 100%)',\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<LockKeyhole class=\"size-5\" />\n\t\t\t\t\t<span class=\"font-medium text-center leading-5 px-10\">\n\t\t\t\t\t\t{{ __('Please complete the previous course to unlock this one.') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup lang=\"ts\">\nimport { computed, inject, onMounted } from 'vue'\nimport {\n\tBadge,\n\tBreadcrumbs,\n\tcall,\n\tcreateResource,\n\tTooltip,\n\tusePageMeta,\n} from 'frappe-ui'\nimport { sessionStore } from '@/stores/session'\nimport { LockKeyhole, Info } from 'lucide-vue-next'\nimport { useRouter } from 'vue-router'\nimport CourseCard from '@/components/CourseCard.vue'\n\nconst { brand } = sessionStore()\nconst router = useRouter()\nconst user = inject<any>('$user')\n\nconst props = defineProps<{\n\tprogramName: string\n}>()\n\nonMounted(() => {\n\tcheckIfEnrolled()\n})\n\nconst checkIfEnrolled = () => {\n\tcall('frappe.client.get_value', {\n\t\tdoctype: 'LMS Program Member',\n\t\tfilters: {\n\t\t\tmember: user.data.name,\n\t\t\tparent: props.programName,\n\t\t},\n\t\tparent: 'LMS Program',\n\t\tfieldname: 'name',\n\t}).then((data: { name: string }) => {\n\t\tif (data.name) {\n\t\t\tprogram.reload()\n\t\t} else {\n\t\t\trouter.push({ name: 'Programs' })\n\t\t}\n\t})\n}\n\nconst program = createResource({\n\turl: 'lms.lms.utils.get_program_details',\n\tparams: {\n\t\tprogram_name: props.programName,\n\t},\n})\n\nconst openCourse = (course: any, enforceCourseOrder: boolean) => {\n\tif (!course.eligible && enforceCourseOrder) return\n\trouter.push({\n\t\tname: 'CourseDetail',\n\t\tparams: { courseName: course.name },\n\t})\n}\n\nconst breadcrumbs = computed(() => {\n\treturn [\n\t\t{ label: __('Programs'), route: { name: 'Programs' } },\n\t\t{\n\t\t\tlabel: props.programName,\n\t\t\troute: {\n\t\t\t\tname: 'ProgramDetail',\n\t\t\t\tparams: { programName: props.programName },\n\t\t\t},\n\t\t},\n\t]\n})\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: props.programName,\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n"],"names":["brand","sessionStore","router","useRouter","user","inject","props","__props","onMounted","checkIfEnrolled","call","data","program","createResource","openCourse","course","enforceCourseOrder","breadcrumbs","computed","usePageMeta","_createElementVNode","_hoisted_1","_createVNode","_unref","Breadcrumbs","_openBlock","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","Badge","_createTextVNode","__","_createBlock","Tooltip","Info","_hoisted_5","_Fragment","CourseCard","$event","_hoisted_6","LockKeyhole","_hoisted_7"],"mappings":"6iCA2EA,KAAM,CAAE,MAAAA,CAAA,EAAUC,EAAA,EACZC,EAASC,EAAA,EACTC,EAAOC,EAAY,OAAO,EAE1BC,EAAQC,EAIdC,EAAU,IAAM,CACfC,EAAA,CACD,CAAC,EAED,MAAMA,EAAkB,IAAM,CAC7BC,EAAK,0BAA2B,CAC/B,QAAS,qBACT,QAAS,CACR,OAAQN,EAAK,KAAK,KAClB,OAAQE,EAAM,WAAA,EAEf,OAAQ,cACR,UAAW,MAAA,CACX,EAAE,KAAMK,GAA2B,CAC/BA,EAAK,KACRC,EAAQ,OAAA,EAERV,EAAO,KAAK,CAAE,KAAM,UAAA,CAAY,CAElC,CAAC,CACF,EAEMU,EAAUC,EAAe,CAC9B,IAAK,oCACL,OAAQ,CACP,aAAcP,EAAM,WAAA,CACrB,CACA,EAEKQ,EAAa,CAACC,EAAaC,IAAgC,CAC5D,CAACD,EAAO,UAAYC,GACxBd,EAAO,KAAK,CACX,KAAM,eACN,OAAQ,CAAE,WAAYa,EAAO,IAAA,CAAK,CAClC,CACF,EAEME,EAAcC,EAAS,IACrB,CACN,CAAE,MAAO,GAAG,UAAU,EAAG,MAAO,CAAE,KAAM,WAAW,EACnD,CACC,MAAOZ,EAAM,YACb,MAAO,CACN,KAAM,gBACN,OAAQ,CAAE,YAAaA,EAAM,WAAA,CAAY,CAC1C,CACD,CAED,EAED,OAAAa,EAAY,KACJ,CACN,MAAOb,EAAM,YACb,KAAMN,EAAM,OAAA,EAEb,wBAzIAoB,EAIS,SAJTC,EAIS,CADRC,EAAoCC,EAAAC,CAAA,EAAA,CAAtB,MAAOP,EAAA,OAAW,KAAA,EAAA,CAAA,OAAA,CAAA,CAAA,GAEtBM,EAAAX,CAAA,EAAQ,MAAnBa,IAAAC,EAoDM,MApDNC,EAoDM,CAnDLP,EAoBM,MApBNQ,EAoBM,CAnBLR,EAEM,MAFNS,EAEMC,EADFP,KAAQ,KAAK,IAAI,EAAA,CAAA,EAGrBD,EAEQC,EAAAQ,CAAA,EAAA,CAFA,MAAOR,EAAAX,CAAA,EAAQ,KAAK,SAAQ,IAAA,SAAA,OAAA,aACnC,IAA2B,CAAxBoB,EAAAF,EAAAP,EAAAX,CAAA,EAAQ,KAAK,QAAQ,EAAG,OAAKqB,EAAAA,GAAE,WAAA,CAAA,EAAA,CAAA,CAAA,qBAI5BV,EAAAX,CAAA,EAAQ,KAAK,0BADpBsB,EAUUX,EAAAY,CAAA,EAAA,OART,UAAU,QACT,KAAYF,EAAAA,4HAMb,IAAsC,CAAtCX,EAAsCC,EAAAa,CAAA,EAAA,CAAhC,MAAM,wBAAuB,CAAA,gCAGrChB,EA6BM,MA7BNiB,EA6BM,EA5BLZ,EAAA,EAAA,EAAAC,EA2BMY,SA1BYf,EAAAX,CAAA,EAAQ,KAAK,QAAvBG,QADRW,EA2BM,MAAA,CAzBJ,IAAKX,EAAO,KACb,SAAM,iBACSA,EAAO,UAAYQ,KAAQ,KAAK,uBAA+BA,EAAAX,CAAA,EAAQ,KAAK,2DAO3FU,EAGEiB,EAAA,CAFA,OAAAxB,EACA,QAAKyB,GAAE1B,EAAWC,EAAQQ,EAAAX,CAAA,EAAQ,KAAK,oBAAoB,CAAA,+BAGrD,CAAAG,EAAO,UAAYQ,KAAQ,KAAK,sBADxCE,EAAA,EAAAC,EAWM,MAXNe,EAWM,CAJLnB,EAA8BC,EAAAmB,CAAA,EAAA,CAAjB,MAAM,SAAQ,EAC3BtB,EAEO,OAFPuB,EAEOb,EADHG,EAAAA,GAAE,yDAAA,CAAA,EAAA,CAAA,CAAA"}