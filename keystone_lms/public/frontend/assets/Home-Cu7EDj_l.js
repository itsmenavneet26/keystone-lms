import{d as N,c as j,a as i,b as e,e as r,t as s,F as V,r as B,f as C,u as t,w as k,i as E,g as O,o as a,C as P,h as R,j as q,n as K,M as Q,k as H,V as W,l as M,I as X,_ as Z,m as z,G,p as se,P as ae,q as oe,s as ne,D as re,v as le,x as ie,y as de,z as ce,A as ue,B as A,E as J}from"./index-H4DTv6Le.js";import{_ as ee}from"./CourseCard-BbwRDLnH.js";import{_ as te}from"./BatchCard-Oxnebc7m.js";import{_ as _e}from"./UpcomingEvaluations-CCTbyaUW.js";import{T as me}from"./TabButtons-BM55rf33.js";import"./CourseInstructors-CmNKc7w9.js";import"./UserAvatar-BNFxJ-NV.js";import"./DateRange-BPai7n_6.js";const ge={class:"grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-5 mt-10"},fe={key:0},he={class:"font-semibold text-lg mb-3 text-ink-gray-9"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},ye={class:"border rounded-md hover:border-outline-gray-3 p-2"},pe={class:"font-semibold text-ink-gray-9 text-lg leading-5 mb-1"},ke={class:"text-ink-gray-5 leading-5 mb-4"},xe={class:"mt-auto space-y-4 text-ink-gray-7"},be={class:"flex items-center space-x-2"},$e={class:"flex items-center space-x-2"},Ce={key:0,class:"flex items-center space-x-2 text-ink-gray-9 mt-auto"},we=["href"],Ye=["href"],Me={class:"flex items-center space-x-2 text-ink-amber-3 w-fit"},De={key:0},Se={class:"flex items-center justify-between mb-3"},je={class:"font-semibold text-lg text-ink-gray-9"},Ve={class:"flex items-center space-x-1 text-ink-gray-5 text-xs"},Be={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"},Ee={key:1,class:"mt-10"},Le={class:"flex items-center justify-between mb-3"},Te={class:"font-semibold text-lg text-ink-gray-9"},Ie={class:"flex items-center space-x-1 text-ink-gray-5 text-xs"},He={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5"},ze=N({__name:"StudentHome",props:{myLiveClasses:{}},setup(h){const _=E("$dayjs"),c=E("$user"),m=j({url:"lms.lms.api.get_my_courses",auto:!0}),g=j({url:"lms.lms.api.get_my_batches",auto:!0}),x=n=>{const b=new Date(`${n.date}T${n.time}`);return new Date(b.getTime()+n.duration*6e4)},v=n=>!(n.date<_().format("YYYY-MM-DD")||n.date>_().format("YYYY-MM-DD")||y(n)),y=n=>{const b=x(n);return new Date>b};return(n,b)=>{var w,Y,f,u,p;const o=O("router-link");return a(),i("div",null,[e("div",ge,[r(_e,{forHome:!0}),(w=h.myLiveClasses.data)!=null&&w.length?(a(),i("div",fe,[e("div",he,s(n.__("Upcoming Live Classes")),1),e("div",ve,[(a(!0),i(V,null,B(h.myLiveClasses.data,d=>{var $,D;return a(),i("div",ye,[e("div",pe,s(d.title),1),e("div",ke,s(d.description),1),e("div",xe,[e("div",be,[r(t(P),{class:"w-4 h-4 stroke-1.5"}),e("span",null,s(t(_)(d.date).format("DD MMMM YYYY")),1)]),e("div",$e,[r(t(R),{class:"w-4 h-4 stroke-1.5"}),e("span",null,s(t(q)(d.time))+" - "+s(t(_)(x(d)).format("HH:mm A")),1)]),v(d)?(a(),i("div",Ce,[($=t(c).data)!=null&&$.is_moderator||(D=t(c).data)!=null&&D.is_evaluator?(a(),i("a",{key:0,href:d.start_url,target:"_blank",class:K(["cursor-pointer inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-ink-gray-8 bg-surface-gray-2 hover:bg-surface-gray-3 active:bg-surface-gray-4 focus-visible:ring focus-visible:ring-outline-gray-3 h-7 text-base px-2 rounded",d.join_url?"w-full":"w-1/2"])},[r(t(Q),{class:"h-4 w-4 stroke-1.5"}),H(" "+s(n.__("Start")),1)],10,we)):C("",!0),e("a",{href:d.join_url,target:"_blank",class:"w-full cursor-pointer inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-ink-gray-8 bg-surface-gray-2 hover:bg-surface-gray-3 active:bg-surface-gray-4 focus-visible:ring focus-visible:ring-outline-gray-3 h-7 text-base px-2 rounded"},[r(t(W),{class:"h-4 w-4 stroke-1.5"}),H(" "+s(n.__("Join")),1)],8,Ye)])):y(d)?(a(),M(t(Z),{key:1,text:n.__("This class has ended"),placement:"right"},{default:k(()=>[e("div",Me,[r(t(X),{class:"w-4 h-4 stroke-1.5"}),e("span",null,s(n.__("Ended")),1)])]),_:1},8,["text"])):C("",!0)])])}),256))])])):C("",!0)]),(Y=t(m).data)!=null&&Y.length?(a(),i("div",De,[e("div",Se,[e("span",je,s(t(m).data[0].membership?n.__("My Courses"):n.__("Our Popular Courses")),1),r(o,{to:{name:"Courses"}},{default:k(()=>[e("span",Ve,[e("span",null,s(n.__("See all")),1),r(t(z),{class:"size-3 stroke-1.5"})])]),_:1})]),e("div",Be,[(a(!0),i(V,null,B(t(m).data,d=>(a(),M(o,{to:{name:"CourseDetail",params:{courseName:d.name}}},{default:k(()=>[r(ee,{course:d},null,8,["course"])]),_:2},1032,["to"]))),256))])])):C("",!0),(f=t(g).data)!=null&&f.length?(a(),i("div",Ee,[e("div",Le,[e("span",Te,s((p=t(g).data)!=null&&p[0].students.includes((u=t(c).data)==null?void 0:u.name)?n.__("My Batches"):n.__("Our Upcoming Batches")),1),r(o,{to:{name:"Batches"}},{default:k(()=>[e("span",Ie,[e("span",null,s(n.__("See all")),1),r(t(z),{class:"size-3 stroke-1.5"})])]),_:1})]),e("div",He,[(a(!0),i(V,null,B(t(g).data,d=>(a(),M(o,{to:{name:"BatchDetail",params:{batchName:d.name}}},{default:k(()=>[r(te,{batch:d},null,8,["batch"])]),_:2},1032,["to"]))),256))])])):C("",!0)])}}}),Ne={key:0,class:"mt-10"},Ue={class:"flex items-center justify-between mb-3"},Ae={class:"font-semibold text-lg text-ink-gray-9"},Pe={class:"flex items-center space-x-1 text-ink-gray-5 text-xs"},Re={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"},qe={key:1,class:"mt-10"},Fe={class:"flex items-center justify-between mb-3"},Ge={class:"font-semibold text-lg text-ink-gray-9"},Je={class:"flex items-center space-x-1 text-ink-gray-5 text-xs"},Oe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5"},Ke={key:2,class:"flex flex-col items-center justify-center mt-60"},Qe={class:"text-lg font-semibold text-ink-gray-7 mb-1.5"},We={class:"leading-5 text-base w-full md:w-2/5 text-base text-center text-ink-gray-7"},Xe={class:"grid grid-cols-2 gap-5 mt-10"},Ze={key:0},et={class:"font-semibold text-lg text-ink-gray-9 mb-3"},tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-5"},st={class:"font-semibold text-ink-gray-9 text-lg leading-5 mb-1"},at={class:"text-ink-gray-7 text-sm"},ot={class:"flex items-center mb-2"},nt={class:"ml-2"},rt={class:"flex items-center mb-2"},lt={class:"ml-2"},it={class:"flex items-center"},dt={class:"ml-2"},ct={key:1},ut={class:"font-semibold text-lg text-ink-gray-9 mb-3"},_t={class:"grid grid-cols-1 lg:grid-cols-2 gap-5"},mt={class:"border hover:border-outline-gray-3 rounded-md p-3"},gt={class:"font-semibold text-ink-gray-9 text-lg leading-5 mb-1"},ft={class:"text-ink-gray-7 text-sm leading-5 mb-4"},ht={class:"mt-auto space-y-3 text-ink-gray-7 text-sm"},vt={class:"flex items-center space-x-2"},yt={class:"flex items-center space-x-2"},pt={key:0,class:"flex items-center space-x-2 text-ink-gray-9 mt-auto"},kt=["href"],xt=["href"],bt={class:"flex items-center space-x-2 text-ink-amber-3 w-fit"},$t=N({__name:"AdminHome",props:{liveClasses:{},evals:{}},setup(h){const _=E("$user"),c=E("$dayjs"),m=oe(),g=j({url:"lms.lms.api.get_created_courses",auto:!0}),x=j({url:"lms.lms.api.get_created_batches",auto:!0}),v=o=>{const w=new Date(`${o.date}T${o.time}`);return new Date(w.getTime()+o.duration*6e4)},y=o=>!(o.date<c().format("YYYY-MM-DD")||o.date>c().format("YYYY-MM-DD")||n(o)),n=o=>{const w=v(o);return new Date>w},b=()=>{var o;m.push({name:"ProfileEvaluationSchedule",params:{username:(o=_.data)==null?void 0:o.username}})};return(o,w)=>{var f,u,p,d,$,D,L,T,I,S;const Y=O("router-link");return a(),i("div",null,[(f=t(g).data)!=null&&f.length?(a(),i("div",Ne,[e("div",Ue,[e("span",Ae,s(o.__("Courses Created")),1),r(Y,{to:{name:"Courses"}},{default:k(()=>[e("span",Pe,[e("span",null,s(o.__("See all")),1),r(t(z),{class:"size-3 stroke-1.5"})])]),_:1})]),e("div",Re,[(a(!0),i(V,null,B(t(g).data,l=>(a(),M(Y,{to:{name:"CourseDetail",params:{courseName:l.name}}},{default:k(()=>[r(ee,{course:l},null,8,["course"])]),_:2},1032,["to"]))),256))])])):C("",!0),(u=t(x).data)!=null&&u.length?(a(),i("div",qe,[e("div",Fe,[e("span",Ge,s(o.__("Upcoming Batches")),1),r(Y,{to:{name:"Batches"}},{default:k(()=>[e("span",Je,[e("span",null,s(o.__("See all")),1),r(t(z),{class:"size-3 stroke-1.5"})])]),_:1})]),e("div",Oe,[(a(!0),i(V,null,B(t(x).data,l=>(a(),M(Y,{to:{name:"BatchDetail",params:{batchName:l.name}}},{default:k(()=>[r(te,{batch:l},null,8,["batch"])]),_:2},1032,["to"]))),256))])])):C("",!0),!((p=t(g).data)!=null&&p.length)&&!((d=t(x).data)!=null&&d.length)?(a(),i("div",Ke,[r(t(G),{class:"size-10 mx-auto stroke-1 text-ink-gray-5"}),e("div",Qe,s(o.__("No courses created")),1),e("div",We,s(o.__("There are no courses currently. Create your first course to get started!")),1),r(Y,{to:{name:"Courses",query:{newCourse:"1"}},class:"mt-4"},{default:k(()=>[r(t(se),null,{prefix:k(()=>[r(t(ae),{class:"size-4 stroke-1.5"})]),default:k(()=>[H(" "+s(o.__("Create Course")),1)]),_:1})]),_:1})])):C("",!0),e("div",Xe,[(D=($=h.evals)==null?void 0:$.data)!=null&&D.length?(a(),i("div",Ze,[e("div",et,s(o.__("Upcoming Evaluations")),1),e("div",tt,[(a(!0),i(V,null,B((L=h.evals)==null?void 0:L.data,l=>(a(),i("div",{class:"border hover:border-outline-gray-3 rounded-md p-3 flex flex-col h-full cursor-pointer",onClick:w[0]||(w[0]=U=>b())},[e("div",st,s(l.course_title),1),e("div",at,[e("div",ot,[r(t(P),{class:"w-4 h-4 stroke-1.5"}),e("span",nt,s(t(c)(l.date).format("DD MMMM YYYY")),1)]),e("div",rt,[r(t(R),{class:"w-4 h-4 stroke-1.5"}),e("span",lt,s(t(q)(l.start_time)),1)]),e("div",it,[r(t(G),{class:"w-4 h-4 stroke-1.5"}),e("span",dt,s(l.member_name),1)])])]))),256))])])):C("",!0),(I=(T=h.liveClasses)==null?void 0:T.data)!=null&&I.length?(a(),i("div",ct,[e("div",ut,s(o.__("Upcoming Live Classes")),1),e("div",_t,[(a(!0),i(V,null,B((S=h.liveClasses)==null?void 0:S.data,l=>{var U,F;return a(),i("div",mt,[e("div",gt,s(l.title),1),e("div",ft,s(l.description),1),e("div",ht,[e("div",vt,[r(t(P),{class:"w-4 h-4 stroke-1.5"}),e("span",null,s(t(c)(l.date).format("DD MMMM YYYY")),1)]),e("div",yt,[r(t(R),{class:"w-4 h-4 stroke-1.5"}),e("span",null,s(t(q)(l.time))+" - "+s(t(c)(v(l)).format("HH:mm A")),1)]),y(l)?(a(),i("div",pt,[(U=t(_).data)!=null&&U.is_moderator||(F=t(_).data)!=null&&F.is_evaluator?(a(),i("a",{key:0,href:l.start_url,target:"_blank",class:K(["cursor-pointer inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-ink-gray-8 bg-surface-gray-2 hover:bg-surface-gray-3 active:bg-surface-gray-4 focus-visible:ring focus-visible:ring-outline-gray-3 h-7 text-base px-2 rounded",l.join_url?"w-full":"w-1/2"])},[r(t(Q),{class:"h-4 w-4 stroke-1.5"}),H(" "+s(o.__("Start")),1)],10,kt)):C("",!0),e("a",{href:l.join_url,target:"_blank",class:"w-full cursor-pointer inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-ink-gray-8 bg-surface-gray-2 hover:bg-surface-gray-3 active:bg-surface-gray-4 focus-visible:ring focus-visible:ring-outline-gray-3 h-7 text-base px-2 rounded"},[r(t(W),{class:"h-4 w-4 stroke-1.5"}),H(" "+s(o.__("Join")),1)],8,xt)])):n(l)?(a(),M(t(Z),{key:1,text:o.__("This class has ended"),placement:"right"},{default:k(()=>[e("div",bt,[r(t(X),{class:"w-4 h-4 stroke-1.5"}),e("span",null,s(o.__("Ended")),1)])]),_:1},8,["text"])):C("",!0)])])}),256))])])):C("",!0)])])}}}),Ct={class:"text-base"},wt={class:"text-center"},Yt={class:"mt-3"},Mt={class:"text-ink-gray-5 mb-1"},Dt={class:"font-semibold text-xl text-ink-gray-9"},St={class:"grid grid-cols-2 bg-surface-gray-1 px-2.5 py-2 rounded-md mt-8"},jt={class:"space-y-1 border-r border-outline-gray-2 mr-4"},Vt={class:"text-ink-gray-6"},Bt={class:"font-semibold text-lg text-ink-gray-9"},Et={class:"space-y-1"},Lt={class:"text-ink-gray-6"},Tt={class:"font-semibold text-lg text-ink-gray-9"},It={class:"text-ink-gray-7 border border-outline-gray-1 px-2.5 py-2 rounded-md text-xs leading-5 mt-5"},Ht=N({__name:"Streak",props:le({streakInfo:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const _=ne(h,"modelValue");return(c,m)=>(a(),M(t(re),{modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=g=>_.value=g),options:{title:c.__("Learning Consistency")}},{"body-content":k(()=>{var g,x,v,y,n;return[e("div",Ct,[e("div",wt,[m[1]||(m[1]=e("div",{class:"text-[30px]"},"ðŸ”¥",-1)),e("div",Yt,[e("div",Mt,s(((g=h.streakInfo.data)==null?void 0:g.current_streak)<1?c.__("You can do better,"):((x=h.streakInfo.data)==null?void 0:x.current_streak)<10?c.__("Keep going,"):c.__("You rock,"))+" "+s(c.__(" you are on a")),1),e("div",Dt,s((v=h.streakInfo.data)==null?void 0:v.current_streak)+" "+s(c.__("day streak")),1)])]),e("div",St,[e("div",jt,[e("div",Vt,s(c.__("Current Streak")),1),e("div",Bt,s((y=h.streakInfo.data)==null?void 0:y.current_streak)+" "+s(c.__("days")),1)]),e("div",Et,[e("div",Lt,s(c.__("Longest Streak")),1),e("div",Tt,s((n=h.streakInfo.data)==null?void 0:n.longest_streak)+" "+s(c.__("days")),1)])]),e("div",It,s(c.__("Your learning streak counts the number of days in a row youâ€™ve kept up your learning, whether itâ€™s a lesson, quiz, or assignment. Donâ€™t worry, weekends donâ€™t break your streak.")),1)])]}),_:1},8,["modelValue","options"]))}}),zt={class:"w-full px-5 pt-5 pb-10"},Nt={class:"space-y-2"},Ut={class:"flex items-center justify-between"},At={class:"text-xl font-bold text-ink-gray-9"},Pt={class:"text-ink-gray-9"},Rt={class:"text-lg text-ink-gray-6 leading-6"},Xt=N({__name:"Home",setup(h){const _=E("$user"),{brand:c}=ie(),m=A(0),g=A("instructor"),x=A(!1);de(()=>{var f;ce("frappe.client.get_count",{doctype:"LMS Certificate Request",filters:{member:(f=_==null?void 0:_.data)==null?void 0:f.name,status:"Upcoming",date:[">=",E("$dayjs")().format("YYYY-MM-DD")]}}).then(u=>{m.value=u})});const v=J(()=>{var f,u,p;return((f=_.data)==null?void 0:f.is_moderator)||((u=_.data)==null?void 0:u.is_instructor)||((p=_.data)==null?void 0:p.is_evaluator)}),y=j({url:"lms.lms.api.get_my_live_classes",auto:!v.value}),n=j({url:"lms.lms.api.get_admin_live_classes",auto:!!v.value}),b=j({url:"lms.lms.api.get_admin_evals",auto:!!v.value}),o=j({url:"lms.lms.api.get_streak_info",auto:!0}),w=J(()=>{var f,u,p,d,$,D,L,T,I;if(v.value){let S=((f=n.data)==null?void 0:f.length)>1?__("live classes"):__("live class"),l=((u=b.data)==null?void 0:u.length)>1?__("evaluations"):__("evaluation");return((p=n.data)==null?void 0:p.length)>0&&((d=b.data)==null?void 0:d.length)>0?__("You have {0} upcoming {1} and {2} {3} scheduled.").format(n.data.length,S,b.data.length,l):(($=n.data)==null?void 0:$.length)>0?__("You have {0} upcoming {1}.").format(n.data.length,S):((D=b.data)==null?void 0:D.length)>0?__("You have {0} {1} scheduled.").format(b.data.length,l):__("Manage your courses and batches at a glance")}else{let S=((L=y.data)==null?void 0:L.length)>1?__("live classes"):__("live class"),l=m.value>1?__("evaluations"):__("evaluation");return((T=y.data)==null?void 0:T.length)>0&&m.value>0?__("You have {0} upcoming {1} and {2} {3} scheduled.").format(y.data.length,S,m.value,l):((I=y.data)==null?void 0:I.length)>0?__("You have {0} upcoming {1}.").format(y.data.length,S):m.value>0?__("You have {0} {1} scheduled.").format(m.value,l):__("Resume where you left off")}}),Y=[{label:__("Student"),value:"student"},{label:__("Instructor"),value:"instructor"}];return ue(()=>({title:__("Home"),icon:c.favicon})),(f,u)=>{var p,d;return a(),i(V,null,[e("div",zt,[e("div",Nt,[e("div",Ut,[e("div",At,s(f.__("Hey"))+", "+s((p=t(_).data)==null?void 0:p.full_name)+" ðŸ‘‹ ",1),e("div",null,[v.value?(a(),M(t(me),{key:0,modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=$=>g.value=$),buttons:Y},null,8,["modelValue"])):(a(),i("div",{key:1,onClick:u[1]||(u[1]=$=>x.value=!0),class:"bg-surface-amber-2 px-2 py-1 rounded-md cursor-pointer"},[u[3]||(u[3]=e("span",null," ðŸ”¥ ",-1)),e("span",Pt,s((d=t(o).data)==null?void 0:d.current_streak),1)]))])]),e("div",Rt,s(w.value),1)]),v.value&&g.value==="instructor"?(a(),M($t,{key:0,liveClasses:t(n),evals:t(b)},null,8,["liveClasses","evals"])):(a(),M(ze,{key:1,myLiveClasses:t(y)},null,8,["myLiveClasses"]))]),r(Ht,{modelValue:x.value,"onUpdate:modelValue":u[2]||(u[2]=$=>x.value=$),streakInfo:t(o)},null,8,["modelValue","streakInfo"])],64)}}});export{Xt as default};
//# sourceMappingURL=Home-Cu7EDj_l.js.map
