{"version":3,"file":"CourseDetail-BsxOf48R.js","sources":["../../../../frontend/src/components/CourseCardOverlay.vue","../../../../frontend/src/components/Modals/ReviewModal.vue","../../../../frontend/src/components/CourseReviews.vue","../../../../frontend/src/components/RelatedCourses.vue","../../../../frontend/src/pages/Courses/CourseOverview.vue","../../../../frontend/src/pages/Courses/CourseEnrollmentModal.vue","../../../../frontend/src/components/NumberChartGraph.vue","../../../../frontend/src/pages/Courses/StudentCourseProgress.vue","../../../../frontend/src/pages/Courses/CourseDashboard.vue","../../../../frontend/src/components/Controls/ColorSwatches.vue","../../../../frontend/src/pages/Courses/CourseForm.vue","../../../../frontend/src/pages/Courses/CourseDetail.vue"],"sourcesContent":["<template>\n\t<div class=\"border-2 rounded-md min-w-80 max-w-sm\">\n\t\t<iframe\n\t\t\tv-if=\"course.data.video_link\"\n\t\t\t:src=\"video_link\"\n\t\t\tclass=\"rounded-t-md min-h-56 w-full\"\n\t\t/>\n\t\t<div class=\"p-5\">\n\t\t\t<div v-if=\"course.data.paid_course\" class=\"text-2xl font-semibold mb-3\">\n\t\t\t\t{{ course.data.price }}\n\t\t\t</div>\n\t\t\t<div v-if=\"!readOnlyMode\">\n\t\t\t\t<div v-if=\"course.data.membership\" class=\"space-y-2\">\n\t\t\t\t\t<router-link\n\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tcourseName: course.name,\n\t\t\t\t\t\t\t\tchapterNumber: course.data.current_lesson\n\t\t\t\t\t\t\t\t\t? course.data.current_lesson.split('-')[0]\n\t\t\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t\t\t\tlessonNumber: course.data.current_lesson\n\t\t\t\t\t\t\t\t\t? course.data.current_lesson.split('-')[1]\n\t\t\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button variant=\"solid\" size=\"md\" class=\"w-full\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<BookText class=\"size-4 stroke-1.5\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ __('Continue Learning') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</router-link>\n\t\t\t\t\t<CertificationLinks :courseName=\"course.data.name\" class=\"w-full\" />\n\t\t\t\t</div>\n\t\t\t\t<router-link\n\t\t\t\t\tv-else-if=\"course.data.paid_course && !isAdmin\"\n\t\t\t\t\t:to=\"{\n\t\t\t\t\t\tname: 'Billing',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\ttype: 'course',\n\t\t\t\t\t\t\tname: course.data.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<Button variant=\"solid\" size=\"md\" class=\"w-full\">\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<CreditCard class=\"size-4 stroke-1.5\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ __('Buy this course') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</router-link>\n\t\t\t\t<Badge\n\t\t\t\t\tv-else-if=\"course.data.disable_self_learning && !isAdmin\"\n\t\t\t\t\ttheme=\"blue\"\n\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\tclass=\"mb-4\"\n\t\t\t\t>\n\t\t\t\t\t{{ __('Contact the Administrator to enroll for this course') }}\n\t\t\t\t</Badge>\n\t\t\t\t<Button\n\t\t\t\t\tv-else-if=\"!isAdmin\"\n\t\t\t\t\t@click=\"enrollStudent()\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\tsize=\"md\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<BookText class=\"size-4 stroke-1.5\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ __('Start Learning') }}\n\t\t\t\t\t</span>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"canGetCertificate\"\n\t\t\t\t\t@click=\"fetchCertificate()\"\n\t\t\t\t\tvariant=\"subtle\"\n\t\t\t\t\tclass=\"w-full mt-2\"\n\t\t\t\t\tsize=\"md\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<GraduationCap class=\"size-4 stroke-1.5\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('Get Certificate') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<div class=\"space-y-4\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"font-medium text-ink-gray-9\"\n\t\t\t\t\t:class=\"{ 'mt-8': !readOnlyMode }\"\n\t\t\t\t>\n\t\t\t\t\t{{ __('This course has:') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex items-center text-ink-gray-9\">\n\t\t\t\t\t<BookOpen class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t\t{{ course.data.lessons }} {{ __('Lessons') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex items-center text-ink-gray-9\">\n\t\t\t\t\t<Users class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t\t{{ formatAmount(course.data.enrollments) }}\n\t\t\t\t\t\t{{ __('Enrolled Students') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"parseInt(course.data.rating) > 0\"\n\t\t\t\t\tclass=\"flex items-center text-ink-gray-9\"\n\t\t\t\t>\n\t\t\t\t\t<Star class=\"size-4 stroke-1.5 fill-yellow-500 text-transparent\" />\n\t\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t\t{{ course.data.rating }} {{ __('Rating') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"course.data.enable_certification\"\n\t\t\t\t\tclass=\"flex items-center font-semibold text-ink-gray-9\"\n\t\t\t\t>\n\t\t\t\t\t<GraduationCap class=\"h-4 w-4 stroke-2\" />\n\t\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t\t{{ __('Certificate of Completion') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"course.data.paid_certificate\"\n\t\t\t\t\tclass=\"flex items-center font-semibold text-ink-gray-9\"\n\t\t\t\t>\n\t\t\t\t\t<GraduationCap class=\"h-4 w-4 stroke-2\" />\n\t\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t\t{{ __('Paid Certificate after Evaluation') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tBookOpen,\n\tBookText,\n\tCreditCard,\n\tGraduationCap,\n\tPencil,\n\tStar,\n\tTrendingUp,\n\tUsers,\n} from 'lucide-vue-next'\nimport { computed, inject, ref } from 'vue'\nimport { Badge, Button, call, createResource, toast } from 'frappe-ui'\nimport { formatAmount } from '@/utils/'\nimport { useRouter } from 'vue-router'\nimport CertificationLinks from '@/components/CertificationLinks.vue'\nimport { useTelemetry } from 'frappe-ui/frappe'\n\nconst router = useRouter()\nconst user = inject('$user')\nconst readOnlyMode = window.read_only_mode\nconst { capture } = useTelemetry()\n\nconst props = defineProps({\n\tcourse: {\n\t\ttype: Object,\n\t\tdefault: null,\n\t},\n})\n\nconst video_link = computed(() => {\n\tif (props.course.data.video_link) {\n\t\treturn 'https://www.youtube.com/embed/' + props.course.data.video_link\n\t}\n\treturn null\n})\n\nfunction enrollStudent() {\n\tif (!user.data) {\n\t\ttoast.warning(__('You need to login first to enroll for this course'))\n\t\tsetTimeout(() => {\n\t\t\twindow.location.href = `/login?redirect-to=${window.location.pathname}`\n\t\t}, 500)\n\t} else {\n\t\tcall('frappe.client.insert', {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'LMS Enrollment',\n\t\t\t\tcourse: props.course.data.name,\n\t\t\t\tmember: user.data.name,\n\t\t\t},\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tcapture('enrolled_in_course', {\n\t\t\t\t\tcourse: props.course.data.name,\n\t\t\t\t})\n\t\t\t\ttoast.success(__('You have been enrolled in this course'))\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\trouter.push({\n\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tcourseName: props.course.data.name,\n\t\t\t\t\t\t\tchapterNumber: 1,\n\t\t\t\t\t\t\tlessonNumber: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t}, 1000)\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\ttoast.warning(__(err.messages?.[0] || err))\n\t\t\t\tconsole.error(err)\n\t\t\t})\n\t}\n}\n\nconst is_instructor = () => {\n\tlet user_is_instructor = false\n\tprops.course.data.instructors.forEach((instructor) => {\n\t\tif (!user_is_instructor && instructor.name == user.data?.name) {\n\t\t\tuser_is_instructor = true\n\t\t}\n\t})\n\treturn user_is_instructor\n}\n\nconst canGetCertificate = computed(() => {\n\tif (\n\t\tprops.course.data?.enable_certification &&\n\t\tprops.course.data?.membership?.progress == 100\n\t) {\n\t\treturn true\n\t}\n\treturn false\n})\n\nconst certificate = createResource({\n\turl: 'lms.lms.doctype.lms_certificate.lms_certificate.create_certificate',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tcourse: values.course,\n\t\t}\n\t},\n\tonSuccess(data) {\n\t\twindow.open(\n\t\t\t`/api/method/frappe.utils.print_format.download_pdf?doctype=LMS+Certificate&name=${\n\t\t\t\tdata.name\n\t\t\t}&format=${encodeURIComponent(data.template)}`,\n\t\t\t'_blank'\n\t\t)\n\t},\n})\n\nconst fetchCertificate = () => {\n\tcertificate.submit({\n\t\tcourse: props.course.data?.name,\n\t\tmember: user.data?.name,\n\t})\n}\n\nconst isAdmin = computed(() => {\n\treturn user.data?.is_moderator || is_instructor()\n})\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Write a Review'),\n\t\t\tsize: 'xl',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) => submitReview(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"flex flex-col gap-4\">\n\t\t\t\t<Rating v-model=\"review.rating\" :label=\"__('Rating')\" />\n\t\t\t\t<FormControl\n\t\t\t\t\t:label=\"__('Review')\"\n\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\tv-model=\"review.review\"\n\t\t\t\t\t:rows=\"5\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog, FormControl, createResource, toast, Rating } from 'frappe-ui'\nimport { reactive } from 'vue'\n\nconst show = defineModel()\nconst reviews = defineModel('reloadReviews')\nconst hasReviewed = defineModel('hasReviewed')\n\nlet review = reactive({\n\treview: '',\n\trating: 0,\n})\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst createReview = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'LMS Course Review',\n\t\t\t\tcourse: props.courseName,\n\t\t\t\t...values,\n\t\t\t},\n\t\t}\n\t},\n})\nfunction submitReview(close) {\n\treview.rating = review.rating / 5\n\tcreateReview.submit(review, {\n\t\tvalidate() {\n\t\t\tif (!review.rating) {\n\t\t\t\treturn 'Please enter a rating.'\n\t\t\t}\n\t\t},\n\t\tonSuccess() {\n\t\t\treviews.value.reload()\n\t\t\thasReviewed.value.reload()\n\t\t},\n\t\tonError(err) {\n\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t},\n\t})\n\tclose()\n}\n</script>\n","<template>\n\t<div v-if=\"reviews.data?.length || membership\" class=\"mt-20 mb-10\">\n\t\t<Button\n\t\t\tv-if=\"membership && !hasReviewed.data\"\n\t\t\t@click=\"openReviewModal()\"\n\t\t\tclass=\"float-right\"\n\t\t>\n\t\t\t{{ __('Write a Review') }}\n\t\t</Button>\n\t\t<div class=\"flex items-center font-semibold text-2xl text-ink-gray-9\">\n\t\t\t{{ __('Student Reviews') }}\n\t\t</div>\n\t\t<div class=\"grid gap-8 mt-10\">\n\t\t\t<div v-for=\"(review, index) in reviews.data\">\n\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t<router-link\n\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\tname: 'Profile',\n\t\t\t\t\t\t\tparams: { username: review.owner_details.username },\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar :user=\"review.owner_details\" :size=\"'2xl'\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t\t<div class=\"mx-4\">\n\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\tname: 'Profile',\n\t\t\t\t\t\t\t\tparams: { username: review.owner_details.username },\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"text-lg font-medium mr-4 text-ink-gray-7\">\n\t\t\t\t\t\t\t\t{{ review.owner_details.full_name }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t<span class=\"text-ink-gray-7\">\n\t\t\t\t\t\t\t{{ review.creation }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"flex mt-2 space-x-1\">\n\t\t\t\t\t\t\t<Star\n\t\t\t\t\t\t\t\tv-for=\"index in 5\"\n\t\t\t\t\t\t\t\tclass=\"size-4 text-transparent rounded-sm\"\n\t\t\t\t\t\t\t\t:class=\"\n\t\t\t\t\t\t\t\t\tindex <= Math.ceil(review.rating)\n\t\t\t\t\t\t\t\t\t\t? 'fill-yellow-500'\n\t\t\t\t\t\t\t\t\t\t: 'fill-gray-300'\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"review.review\" class=\"mt-4 leading-5 text-ink-gray-7\">\n\t\t\t\t\t{{ review.review }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<ReviewModal\n\t\tv-model=\"showReviewModal\"\n\t\tv-model:reloadReviews=\"reviews\"\n\t\tv-model:hasReviewed=\"hasReviewed\"\n\t\t:courseName=\"courseName\"\n\t/>\n</template>\n<script setup>\nimport { Star } from 'lucide-vue-next'\nimport { createResource, Button } from 'frappe-ui'\nimport { watch, ref, inject } from 'vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport ReviewModal from '@/components/Modals/ReviewModal.vue'\n\nconst user = inject('$user')\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tavg_rating: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tmembership: {\n\t\ttype: Object || null,\n\t\trequired: false,\n\t},\n})\n\nconst hasReviewed = createResource({\n\turl: 'frappe.client.get_count',\n\tcache: ['eligible_to_review', props.courseName, props.membership?.member],\n\tparams: {\n\t\tdoctype: 'LMS Course Review',\n\t\tfilters: {\n\t\t\tcourse: props.courseName,\n\t\t\towner: props.membership?.member,\n\t\t},\n\t},\n\tauto: user.data?.name ? true : false,\n})\n\nconst reviews = createResource({\n\turl: 'lms.lms.utils.get_reviews',\n\tcache: ['course_reviews', props.courseName],\n\tmakeParams() {\n\t\treturn {\n\t\t\tcourse: props.courseName,\n\t\t}\n\t},\n\tauto: true,\n})\n\nwatch(\n\t() => props.courseName,\n\t() => {\n\t\treviews.reload()\n\t}\n)\n\nconst showReviewModal = ref(false)\n\nfunction openReviewModal() {\n\tshowReviewModal.value = true\n}\n</script>\n","<template>\n\t<div v-if=\"relatedCourses.data?.length\" class=\"mt-10\">\n\t\t<div class=\"flex items-center justify-between mb-6\">\n\t\t\t<div class=\"text-2xl font-semibold text-ink-gray-9\">\n\t\t\t\t{{ __('Related Courses') }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tclass=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4\"\n\t\t>\n\t\t\t<router-link\n\t\t\t\tv-for=\"course in relatedCourses.data\"\n\t\t\t\t:key=\"course.name\"\n\t\t\t\t:to=\"{ name: 'CourseDetail', params: { courseName: course.name } }\"\n\t\t\t\tclass=\"cursor-pointer\"\n\t\t\t>\n\t\t\t\t<CourseCard :course=\"course\" />\n\t\t\t</router-link>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { createResource } from 'frappe-ui'\nimport { watch } from 'vue'\nimport CourseCard from '@/components/CourseCard.vue'\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst relatedCourses = createResource({\n\turl: 'lms.lms.utils.get_related_courses',\n\tcache: ['related_courses', props.courseName],\n\tmakeParams() {\n\t\treturn {\n\t\t\tcourse: props.courseName,\n\t\t}\n\t},\n\tauto: true,\n})\n\nwatch(\n\t() => props.courseName,\n\t() => {\n\t\trelatedCourses.reload()\n\t}\n)\n</script>\n","<template>\n\t<div class=\"p-5\">\n\t\t<div class=\"flex justify-between w-full space-x-5\">\n\t\t\t<div class=\"md:w-2/3\">\n\t\t\t\t<div class=\"text-3xl font-semibold text-ink-gray-9\">\n\t\t\t\t\t{{ course.data.title }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"my-3 leading-6 text-ink-gray-7\">\n\t\t\t\t\t{{ course.data.short_introduction }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tv-if=\"parseInt(course.data.rating) > 0\"\n\t\t\t\t\t\t:text=\"__('Average Rating')\"\n\t\t\t\t\t\tclass=\"flex items-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Star class=\"size-4 text-transparent fill-yellow-500\" />\n\t\t\t\t\t\t<span class=\"ml-1 text-ink-gray-7\">\n\t\t\t\t\t\t\t{{ course.data.rating }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<span v-if=\"parseInt(course.data.rating) > 0\" class=\"mx-3\"\n\t\t\t\t\t\t>&middot;</span\n\t\t\t\t\t>\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tv-if=\"course.data.enrollment_count\"\n\t\t\t\t\t\t:text=\"__('Enrolled Students')\"\n\t\t\t\t\t\tclass=\"flex items-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Users class=\"h-4 w-4 text-ink-gray-7\" />\n\t\t\t\t\t\t<span class=\"ml-1\">\n\t\t\t\t\t\t\t{{ course.data.enrollment_count_formatted }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<span v-if=\"course.data.enrollment_count\" class=\"mx-3\">&middot;</span>\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"h-6 mr-1\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'avatar-group overlap': course.data.instructors.length > 1,\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\tv-for=\"instructor in course.data.instructors\"\n\t\t\t\t\t\t\t\t:user=\"instructor\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<CourseInstructors :instructors=\"course.data.instructors\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"course.data.tags\" class=\"flex my-4 w-fit\">\n\t\t\t\t\t<Badge\n\t\t\t\t\t\ttheme=\"gray\"\n\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\tclass=\"mr-2 text-ink-gray-9\"\n\t\t\t\t\t\tv-for=\"tag in course.data.tags.split(', ')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ tag }}\n\t\t\t\t\t</Badge>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"md:hidden my-4\">\n\t\t\t\t\t<CourseCardOverlay :course=\"course\" />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-html=\"course.data.description\"\n\t\t\t\t\tclass=\"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal mt-10\"\n\t\t\t\t></div>\n\t\t\t\t<div class=\"mt-10\">\n\t\t\t\t\t<CourseOutline\n\t\t\t\t\t\t:title=\"__('Course Outline')\"\n\t\t\t\t\t\t:courseName=\"course.data.name\"\n\t\t\t\t\t\t:showOutline=\"true\"\n\t\t\t\t\t\t:getProgress=\"course.data.membership ? true : false\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<CourseReviews\n\t\t\t\t\t:courseName=\"course.data.name\"\n\t\t\t\t\t:avg_rating=\"course.data.rating\"\n\t\t\t\t\t:membership=\"course.data.membership || null\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"hidden md:block\">\n\t\t\t\t<CourseCardOverlay :course=\"course\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<RelatedCourses :courseName=\"course.data.name\" />\n\t</div>\n</template>\n<script setup lang=\"ts\">\nimport { Star, Users } from 'lucide-vue-next'\nimport { Badge, Tooltip } from 'frappe-ui'\nimport CourseCardOverlay from '@/components/CourseCardOverlay.vue'\nimport CourseOutline from '@/components/CourseOutline.vue'\nimport CourseReviews from '@/components/CourseReviews.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport CourseInstructors from '@/components/CourseInstructors.vue'\nimport RelatedCourses from '@/components/RelatedCourses.vue'\n\nconst props = defineProps<{\n\tcourse: any\n}>()\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Enroll a Student'),\n\t\t\tsize: 'xl',\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"space-y-4\">\n\t\t\t\t<FormControl\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t:label=\"__('Purchased Certificate')\"\n\t\t\t\t\tv-model=\"purchasedCertificate\"\n\t\t\t\t/>\n\t\t\t\t<Link\n\t\t\t\t\tdoctype=\"User\"\n\t\t\t\t\t:label=\"__('Student')\"\n\t\t\t\t\tplaceholder=\" \"\n\t\t\t\t\tv-model=\"student\"\n\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t:onCreate=\"\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\topenSettings('Members')\n\t\t\t\t\t\t\tshow = false\n\t\t\t\t\t\t}\n\t\t\t\t\t\"\n\t\t\t\t/>\n\t\t\t\t<Link\n\t\t\t\t\tv-if=\"purchasedCertificate\"\n\t\t\t\t\tdoctype=\"LMS Payment\"\n\t\t\t\t\t:label=\"__('Payment')\"\n\t\t\t\t\tplaceholder=\" \"\n\t\t\t\t\tv-model=\"payment\"\n\t\t\t\t\t:onCreate=\"\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\topenSettings('Transactions')\n\t\t\t\t\t\t\tshow = false\n\t\t\t\t\t\t}\n\t\t\t\t\t\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #actions=\"{ close }\">\n\t\t\t<div class=\"text-right\">\n\t\t\t\t<Button variant=\"solid\" @click=\"enrollStudent(close)\">\n\t\t\t\t\t{{ __('Enroll') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup lang=\"ts\">\nimport { Button, call, Dialog, FormControl, toast } from 'frappe-ui'\nimport { ref } from 'vue'\nimport { openSettings } from '@/utils'\nimport Link from '@/components/Controls/Link.vue'\n\nconst show = defineModel<boolean>({ required: true, default: false })\nconst student = ref<string | null>(null)\nconst students = defineModel<any[]>('students')\nconst payment = ref<string | null>(null)\nconst purchasedCertificate = ref<boolean>(false)\n\nconst props = defineProps<{\n\tcourse: any\n}>()\n\nconst enrollStudent = (close: () => void) => {\n\tlet validationPassed = validateData()\n\tif (!validationPassed) return\n\n\tcall('frappe.client.insert', {\n\t\tdoc: {\n\t\t\tdoctype: 'LMS Enrollment',\n\t\t\tcourse: props.course.data?.name,\n\t\t\tmember: student.value,\n\t\t\tpayment: purchasedCertificate.value ? payment.value : null,\n\t\t\tpurchased_certificate: purchasedCertificate.value,\n\t\t},\n\t})\n\t\t.then(() => {\n\t\t\tstudents.value?.reload()\n\t\t\ttoast.success(__('Student enrolled successfully'))\n\t\t\tclose()\n\t\t})\n\t\t.catch((err: any) => {\n\t\t\ttoast.error(__(err.messages?.[0] || err))\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nconst validateData = (): boolean => {\n\tif (!student.value) {\n\t\ttoast.error(__('Please select a student to enroll.'))\n\t\treturn false\n\t}\n\tif (purchasedCertificate.value && !payment.value) {\n\t\ttoast.error(__('Please select a payment for the purchased certificate.'))\n\t\treturn false\n\t}\n\treturn true\n}\n</script>\n","<template>\n\t<div class=\"border rounded-lg p-3 space-y-2\">\n\t\t<div class=\"text-ink-gray-5\">\n\t\t\t{{ __(title) }}\n\t\t</div>\n\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t<slot name=\"prefix\" />\n\t\t\t<div class=\"font-semibold text-ink-gray-9 text-2xl\">\n\t\t\t\t{{ value }}\n\t\t\t</div>\n\t\t\t<slot name=\"suffix\" />\n\t\t</div>\n\t</div>\n</template>\n<script setup lang=\"ts\">\nconst props = defineProps<{\n\ttitle: string\n\tvalue: number | string\n}>()\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Student Progress'),\n\t\t\tsize: hasAssessmentData ? '3xl' : 'xl',\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"text-base text-ink-gray-9 max-h-[70vh] overflow-y-auto\">\n\t\t\t\t<div class=\"flex justify-between mb-5 px-2\">\n\t\t\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t:image=\"student?.member_image\"\n\t\t\t\t\t\t\t:label=\"student?.member_name\"\n\t\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"font-semibold\">\n\t\t\t\t\t\t\t\t{{ student?.member_name }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-ink-gray-5\">\n\t\t\t\t\t\t\t\t{{ student.member }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"w-25 space-y-2\">\n\t\t\t\t\t\t<div class=\"text-ink-gray-5 text-sm\">\n\t\t\t\t\t\t\t{{ Math.round(student.progress) }}% {{ __('completed') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ProgressBar\n\t\t\t\t\t\t\t:label=\"__('Course Progress')\"\n\t\t\t\t\t\t\t:progress=\"student.progress\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"grid gap-5\" :class=\"hasAssessmentData ? 'grid-cols-2' : ''\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"lessons.data\"\n\t\t\t\t\t\tclass=\"border border-outline-gray-modals rounded-lg px-3 pt-3 max-h-[60vh] overflow-y-auto\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"text-ink-gray-5 mb-5\">\n\t\t\t\t\t\t\t\t{{ __('Lesson Progress') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for=\"progress in lessons.data\"\n\t\t\t\t\t\t\tclass=\"flex justify-between text-sm py-2 my-1\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t\t<span class=\"mr-3 text-xs\">\n\t\t\t\t\t\t\t\t\t{{ progress.chapter_idx }}.{{ progress.idx }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ progress.title }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tv-if=\"getLessonStatus(progress) == 'Complete'\"\n\t\t\t\t\t\t\t\t:text=\"__('Complete')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Check class=\"text-ink-green-3 size-4\" />\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<Tooltip v-else :text=\"__('Pending')\">\n\t\t\t\t\t\t\t\t<Minus class=\"text-ink-amber-2 size-4\" />\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<!-- <Badge :theme=\"getLessonStatusTheme(progress)\">\n\t\t\t\t\t\t\t\t{{ getLessonStatus(progress) }}\n\t\t\t\t\t\t\t</Badge> -->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"space-y-3\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"assessmentProgress.data?.quizzes?.length\"\n\t\t\t\t\t\t\tclass=\"border border-outline-gray-modals rounded-lg px-3 pt-3 h-fit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-ink-gray-5 mb-5\">\n\t\t\t\t\t\t\t\t\t{{ __('Quiz Progress') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-for=\"quiz in assessmentProgress.data.quizzes\"\n\t\t\t\t\t\t\t\tclass=\"flex justify-between text-sm py-2 my-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{{ quiz.quiz_title }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{{ quiz.score }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>{{ quiz.percentage }}%</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"assessmentProgress.data?.assignments?.length\"\n\t\t\t\t\t\t\tclass=\"border border-outline-gray-modals rounded-lg px-3 pt-3 h-fit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-ink-gray-5 mb-5\">\n\t\t\t\t\t\t\t\t\t{{ __('Assignment Progress') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-for=\"assignment in assessmentProgress.data.assignments\"\n\t\t\t\t\t\t\t\tclass=\"flex justify-between text-sm py-2 my-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{{ assignment.assignment_title }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Badge :theme=\"getAssessmentStatusTheme(assignment.status)\">\n\t\t\t\t\t\t\t\t\t{{ assignment.status }}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"assessmentProgress.data?.exercises?.length\"\n\t\t\t\t\t\t\tclass=\"border border-outline-gray-modals rounded-lg px-3 pt-3 h-fit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-ink-gray-5 mb-5\">\n\t\t\t\t\t\t\t\t\t{{ __('Programming Exercise Progress') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-for=\"exercise in assessmentProgress.data.exercises\"\n\t\t\t\t\t\t\t\tclass=\"flex justify-between text-sm py-2 my-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{{ exercise.exercise_title }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Badge :theme=\"getAssessmentStatusTheme(exercise.status)\">\n\t\t\t\t\t\t\t\t\t{{ exercise.status }}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup lang=\"ts\">\nimport {\n\tAvatar,\n\tBadge,\n\tcreateListResource,\n\tcreateResource,\n\tDialog,\n\tTooltip,\n} from 'frappe-ui'\nimport ProgressBar from '@/components/ProgressBar.vue'\nimport { computed } from 'vue'\nimport { Check, Minus } from 'lucide-vue-next'\n\nconst show = defineModel<boolean>({ required: true, default: false })\n\nconst props = defineProps<{\n\tcourse: any\n\tstudent: any\n\tlessons: any\n}>()\n\nconst lessonProgress = createListResource({\n\tdoctype: 'LMS Course Progress',\n\tfilters: {\n\t\tcourse: ['=', props.course.data?.name],\n\t\tmember: ['=', props.student?.member],\n\t},\n\tfields: ['name', 'lesson', 'status'],\n\tauto: true,\n})\n\nconst assessmentProgress = createResource({\n\turl: 'lms.lms.api.get_course_assessment_progress',\n\tparams: {\n\t\tcourse: props.course.data?.name,\n\t\tmember: props.student?.member,\n\t},\n\tauto: true,\n})\n\nconst getLessonStatus = (lesson: any) => {\n\treturn (\n\t\tlessonProgress.data?.find((lp: any) => lp.lesson === lesson.lesson)\n\t\t\t?.status || __('Pending')\n\t)\n}\n\nconst getLessonStatusTheme = (lesson: any) => {\n\tconst status = getLessonStatus(lesson)\n\tif (status === 'Complete') {\n\t\treturn 'green'\n\t} else {\n\t\treturn 'orange'\n\t}\n}\n\nconst getAssessmentStatusTheme = (status: string) => {\n\tif (status.includes('Pass')) return 'green'\n\telse if (status.includes('Fail')) return 'red'\n\telse return 'orange'\n}\n\nconst hasAssessmentData = computed(() => {\n\treturn (\n\t\t(assessmentProgress.data?.quizzes &&\n\t\t\tassessmentProgress.data.quizzes.length > 0) ||\n\t\t(assessmentProgress.data?.assignments &&\n\t\t\tassessmentProgress.data.assignments.length > 0) ||\n\t\t(assessmentProgress.data?.exercises &&\n\t\t\tassessmentProgress.data.exercises.length > 0)\n\t)\n})\n</script>\n","<template>\n\t<div class=\"p-5\">\n\t\t<div class=\"grid grid-cols-4 gap-5 mb-5 text-ink-gray-9\">\n\t\t\t<NumberChartGraph\n\t\t\t\t:title=\"__('Enrolled')\"\n\t\t\t\t:value=\"formatAmount(course.data?.enrollments)\"\n\t\t\t/>\n\t\t\t<NumberChartGraph\n\t\t\t\t:title=\"__('Average Completion Rate')\"\n\t\t\t\t:value=\"averageCompletionRate\"\n\t\t\t/>\n\t\t\t<NumberChartGraph\n\t\t\t\t:title=\"__('Average Rating')\"\n\t\t\t\t:value=\"course.data?.rating || 0\"\n\t\t\t>\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<Star class=\"size-5 text-transparent fill-amber-500\" />\n\t\t\t\t</template>\n\t\t\t</NumberChartGraph>\n\t\t\t<NumberChartGraph :title=\"__('Lessons')\" :value=\"course.data?.lessons\" />\n\t\t</div>\n\t\t<div class=\"grid grid-cols-[2fr_1fr] gap-5 items-start\">\n\t\t\t<div class=\"border rounded-lg py-3 px-4\">\n\t\t\t\t<div class=\"flex items-center justify-between mb-3\">\n\t\t\t\t\t<div class=\"text-lg text-ink-gray-9 font-semibold\">\n\t\t\t\t\t\t{{ __('Students') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"searchFilter\"\n\t\t\t\t\t\t\t:placeholder=\"__('Search by name')\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button @click=\"showEnrollmentModal = true\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<Plus class=\"size-4 stroke-1.5\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ __('Enroll') }}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"progressList.loading || progressList.data?.length\"\n\t\t\t\t\tclass=\"max-h-[63vh] overflow-y-auto\"\n\t\t\t\t>\n\t\t\t\t\t<ListView\n\t\t\t\t\t\t:columns=\"progressColumns\"\n\t\t\t\t\t\t:rows=\"progressList.data\"\n\t\t\t\t\t\trowKey=\"name\"\n\t\t\t\t\t\t:options=\"{\n\t\t\t\t\t\t\tselectable: false,\n\t\t\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ListHeader\n\t\t\t\t\t\t\tclass=\"mb-2 grid items-center space-x-4 rounded bg-surface-white border-b rounded-none p-2\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListHeaderItem\n\t\t\t\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t\t\t\tv-for=\"item in progressColumns\"\n\t\t\t\t\t\t\t\t:key=\"item.key\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</ListHeaderItem>\n\t\t\t\t\t\t</ListHeader>\n\t\t\t\t\t\t<ListRows v-for=\"row in progressList.data\" class=\"max-h-[500px]\">\n\t\t\t\t\t\t\t<ListRow\n\t\t\t\t\t\t\t\t:row=\"row\"\n\t\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\tshowProgressModal = true\n\t\t\t\t\t\t\t\t\t\tcurrentStudent = row\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"cursor-pointer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template #default=\"{ column, item }\">\n\t\t\t\t\t\t\t\t\t<ListRowItem\n\t\t\t\t\t\t\t\t\t\t:item=\"row[column.key]\"\n\t\t\t\t\t\t\t\t\t\t:align=\"column.align\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t\t\t\t<div v-if=\"column.key == 'member_name'\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:image=\"row['member_image']\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:label=\"item\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<ProgressBar\n\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"column.key == 'progress'\"\n\t\t\t\t\t\t\t\t\t\t\t\t:progress=\"Math.ceil(row[column.key])\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"!mx-0 !mr-4\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"column.key == 'creation'\">\n\t\t\t\t\t\t\t\t\t\t\t{{ dayjs(row[column.key]).format('DD MMM YYYY') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"column.key == 'progress'\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-xs !mx-0 w-5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ Math.ceil(row[column.key]) }}%\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t\t\t{{ row[column.key].toString() }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</ListRowItem>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</ListRow>\n\t\t\t\t\t\t</ListRows>\n\t\t\t\t\t</ListView>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"progressList.data && progressList.hasNextPage\"\n\t\t\t\t\t\tclass=\"flex justify-center my-3\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button @click=\"progressList.next()\">\n\t\t\t\t\t\t\t{{ __('Load More') }}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"space-y-5\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"chartDetails.data?.average_progress > 0\"\n\t\t\t\t\tclass=\"border rounded-lg p-4\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"text-ink-gray-5 mb-4\">\n\t\t\t\t\t\t{{ __('Progress Summary') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"grid grid-cols-[2fr_1fr] items-center justify-between text-ink-gray-9\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex flex-col space-y-4 flex-1 text-sm\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-ink-gray-7\"\n\t\t\t\t\t\t\t\tv-for=\"row in chartDetails.data?.progress_distribution\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"size-2 rounded\"\n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\t\tcolors[theme][\n\t\t\t\t\t\t\t\t\t\t\t\trow.name.startsWith('Just')\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'red'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: row.name.startsWith('In')\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'amber'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: row.name.startsWith('Adv')\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'blue'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'green'\n\t\t\t\t\t\t\t\t\t\t\t][400],\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<Tooltip :text=\"row.name.split('(')[1].replace(')', '')\">\n\t\t\t\t\t\t\t\t\t<div class=\"ml-2\">\n\t\t\t\t\t\t\t\t\t\t{{ row.name.split('(')[0] }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<Tooltip :text=\"row.value\">\n\t\t\t\t\t\t\t\t\t<div class=\"ml-auto\">\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\tMath.round((row.value / course.data?.enrollments) * 100)\n\t\t\t\t\t\t\t\t\t\t}}%\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ECharts\n\t\t\t\t\t\t\tclass=\"w-40 h-20\"\n\t\t\t\t\t\t\t:options=\"{\n\t\t\t\t\t\t\t\tcolor: progressColors,\n\t\t\t\t\t\t\t\tseries: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype: 'pie',\n\t\t\t\t\t\t\t\t\t\tradius: ['50%', '70%'],\n\t\t\t\t\t\t\t\t\t\tcenter: ['50%', '50%'],\n\t\t\t\t\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tlabelLine: {\n\t\t\t\t\t\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\temphasis: {\n\t\t\t\t\t\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tscale: false,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tdata: chartDetails.data?.progress_distribution || [],\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tshowInlineLabels: false,\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"lessonProgress.data?.length\"\n\t\t\t\t\tclass=\"border rounded-lg pt-4 px-4\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex items-center justify-between mb-4\">\n\t\t\t\t\t\t<div class=\"text-ink-gray-5\">\n\t\t\t\t\t\t\t{{ __('Lesson Completion') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t:options=\"lessonProgressSortingOptions\"\n\t\t\t\t\t\t\t@update:modelValue=\"(value: string) => updateLessonProgress(value)\"\n\t\t\t\t\t\t\t:placeholder=\"__('Sort by')\"\n\t\t\t\t\t\t\tclass=\"!w-32\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"divide-y max-h-[43vh divide-outline-gray-modals text-ink-gray-7 overflow-y-auto\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for=\"progress in lessonProgress.data\"\n\t\t\t\t\t\t\tclass=\"flex justify-between text-sm py-2 my-1 text-ink-gray-9\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t\t<span class=\"mr-3 text-xs\">\n\t\t\t\t\t\t\t\t\t{{ progress.chapter_idx }}.{{ progress.idx }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ progress.title }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Tooltip :text=\"progress.completion_count\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\tMath.ceil(\n\t\t\t\t\t\t\t\t\t\t\t(progress.completion_count / course.data?.enrollments) *\n\t\t\t\t\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}}%\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<CourseEnrollmentModal\n\t\tv-if=\"showEnrollmentModal\"\n\t\tv-model=\"showEnrollmentModal\"\n\t\t:course=\"course\"\n\t\t:students=\"progressList\"\n\t/>\n\t<StudentCourseProgress\n\t\tv-if=\"showProgressModal\"\n\t\tv-model=\"showProgressModal\"\n\t\t:course=\"course\"\n\t\t:student=\"currentStudent\"\n\t\t:lessons=\"lessonProgress\"\n\t/>\n</template>\n<script setup lang=\"ts\">\nimport {\n\tAvatar,\n\tButton,\n\tcreateListResource,\n\tcreateResource,\n\tdayjs,\n\tDropdown,\n\tECharts,\n\tFormControl,\n\tListView,\n\tListHeader,\n\tListHeaderItem,\n\tListRows,\n\tListRow,\n\tListRowItem,\n\tSelect,\n\tTooltip,\n} from 'frappe-ui'\nimport { computed, ref, watch } from 'vue'\nimport { Plus, Star } from 'lucide-vue-next'\nimport { formatAmount } from '@/utils'\nimport colors from '@/utils/frappe-ui-colors.json'\nimport CourseEnrollmentModal from '@/pages/Courses/CourseEnrollmentModal.vue'\nimport NumberChartGraph from '@/components/NumberChartGraph.vue'\nimport ProgressBar from '@/components/ProgressBar.vue'\nimport StudentCourseProgress from '@/pages/Courses/StudentCourseProgress.vue'\n\nconst props = defineProps<{\n\tcourse: any\n}>()\n\nconst showEnrollmentModal = ref(false)\nconst searchFilter = ref<string | null>(null)\nconst showProgressModal = ref(false)\nconst currentStudent = ref<any>(null)\nconst theme = ref<'darkMode' | 'lightMode'>(\n\tlocalStorage.getItem('theme') == 'dark' ? 'darkMode' : 'lightMode'\n)\ntype Filters = {\n\tcourse: string | undefined\n\tmember_name?: string[]\n}\n\nconst chartDetails = createResource({\n\turl: 'lms.lms.api.get_course_progress_distribution',\n\tmakeParams() {\n\t\treturn {\n\t\t\tcourse: props.course.data?.name,\n\t\t}\n\t},\n\tauto: true,\n})\n\nconst progressList = createListResource({\n\tdoctype: 'LMS Enrollment',\n\tfilters: {\n\t\tcourse: props.course.data?.name,\n\t},\n\tfields: [\n\t\t'name',\n\t\t'member',\n\t\t'member_name',\n\t\t'member_image',\n\t\t'member_username',\n\t\t'progress',\n\t\t'creation',\n\t],\n\tpageLength: 100,\n\tauto: true,\n\tcache: ['courseProgress', props.course.data?.name],\n})\n\nconst lessonProgress = createResource({\n\turl: 'lms.lms.api.get_lesson_completion_stats',\n\tparams: {\n\t\tcourse: props.course.data?.name,\n\t},\n\tauto: true,\n})\n\nconst updateLessonProgress = (value: string) => {\n\tif (value == 'completion_rate') {\n\t\tlessonProgress.data?.sort((a: any, b: any) => {\n\t\t\tconst rateA = a.completion_count / (props.course.data?.enrollments || 1)\n\t\t\tconst rateB = b.completion_count / (props.course.data?.enrollments || 1)\n\t\t\treturn rateB - rateA\n\t\t})\n\t} else if (value == 'index') {\n\t\tlessonProgress.data?.sort((a: any, b: any) => {\n\t\t\treturn a.chapter_idx - b.chapter_idx || a.idx - b.idx\n\t\t})\n\t}\n}\n\nwatch([searchFilter], () => {\n\tlet filterApplied = false\n\tlet filters: Filters = {\n\t\tcourse: props.course.data?.name,\n\t}\n\n\tif (searchFilter.value) {\n\t\tfilters.member_name = ['like', `%${searchFilter.value}%`]\n\t\tfilterApplied = true\n\t}\n\n\tprogressList.update({\n\t\tfilters: filters,\n\t})\n\tprogressList.reload()\n})\n\nconst averageCompletionRate = computed(() => {\n\tlet value = Math.ceil(chartDetails.data?.average_progress) || 0\n\treturn value + '%'\n})\n\nconst progressColors = computed(() => {\n\tlet colorList = []\n\tcolorList.push(colors[theme.value]['red'][400])\n\tcolorList.push(colors[theme.value]['amber'][400])\n\tcolorList.push(colors[theme.value]['blue'][400])\n\tcolorList.push(colors[theme.value]['green'][400])\n\treturn colorList\n})\n\nconst progressColumns = computed(() => {\n\treturn [\n\t\t{\n\t\t\tlabel: __('Name'),\n\t\t\tkey: 'member_name',\n\t\t\twidth: '40%',\n\t\t},\n\t\t{\n\t\t\tlabel: __('Progress'),\n\t\t\tkey: 'progress',\n\t\t\twidth: '30%',\n\t\t},\n\t\t{\n\t\t\tlabel: __('Start Date'),\n\t\t\tkey: 'creation',\n\t\t\talign: 'right',\n\t\t},\n\t]\n})\n\nconst lessonProgressSortingOptions = [\n\t{\n\t\tlabel: __('Lesson Index'),\n\t\tvalue: 'index',\n\t\tonClick() {\n\t\t\tupdateLessonProgress('index')\n\t\t},\n\t},\n\t{\n\t\tlabel: __('Completion Rate'),\n\t\tvalue: 'completion_rate',\n\t\tonClick() {\n\t\t\tupdateLessonProgress('completion_rate')\n\t\t},\n\t},\n]\n</script>\n","<template>\n\t<div>\n\t\t<div class=\"text-xs text-ink-gray-5 mb-1\">\n\t\t\t{{ __(label) }}\n\t\t</div>\n\t\t<Popover placement=\"bottom\" class=\"!block\">\n\t\t\t<template #target=\"{ togglePopover, isOpen }\">\n\t\t\t\t<div class=\"space-y-2\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\t:placeholder=\"__('Set Color')\"\n\t\t\t\t\t\t@focus=\"togglePopover\"\n\t\t\t\t\t\t:modelValue=\"modelValue\"\n\t\t\t\t\t\t@update:modelValue=\"(val: string) => emit('update:modelValue', val)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"size-4 rounded-full\"\n\t\t\t\t\t\t\t\t:style=\"\n\t\t\t\t\t\t\t\t\tmodelValue\n\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: getColor(\n\t\t\t\t\t\t\t\t\t\t\t\t\tmodelValue.toLowerCase(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t400\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t: {}\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Palette\n\t\t\t\t\t\t\t\t\tv-if=\"!modelValue\"\n\t\t\t\t\t\t\t\t\tclass=\"size-4 stroke-1.5 text-ink-gray-5\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #suffix>\n\t\t\t\t\t\t\t<Button variant=\"ghost\">\n\t\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t\tclass=\"size-3 text-ink-gray-5\"\n\t\t\t\t\t\t\t\t\t@click=\"emit('update:modelValue', null)\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template #body=\"{ close }\">\n\t\t\t\t<div class=\"rounded-lg bg-surface-white p-3 border w-fit mt-2\">\n\t\t\t\t\t<div class=\"text-xs text-ink-gray-5 mb-1.5\">\n\t\t\t\t\t\t{{ __('Swatches') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"grid grid-cols-7 gap-2\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for=\"color in colors\"\n\t\t\t\t\t\t\t:key=\"color\"\n\t\t\t\t\t\t\tclass=\"size-5 rounded-full cursor-pointer\"\n\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\tbackgroundColor: getColor(color.toLowerCase(), 400),\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\t\t\temit('update:modelValue', color)\n\t\t\t\t\t\t\t\t\tclose()\n\t\t\t\t\t\t\t\t\temit('change', color)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Popover>\n\t\t<div class=\"text-sm text-ink-gray-5 mt-2\">\n\t\t\t{{ description }}\n\t\t</div>\n\t</div>\n</template>\n<script setup lang=\"ts\">\nimport { Button, FormControl, Popover } from 'frappe-ui'\nimport { computed } from 'vue'\nimport { Palette, X } from 'lucide-vue-next'\nimport { getColor } from '@/utils'\n\nconst emit = defineEmits(['update:modelValue', 'change'])\n\nconst props = defineProps<{\n\tmodelValue: string\n\tlabel: string\n\tdescription?: string\n}>()\n\nconst colors = computed(() => {\n\treturn [\n\t\t'Red',\n\t\t'Blue',\n\t\t'Green',\n\t\t'Amber',\n\t\t'Purple',\n\t\t'Cyan',\n\t\t'Orange',\n\t\t'Violet',\n\t\t'Pink',\n\t\t'Teal',\n\t\t'Gray',\n\t\t'Yellow',\n\t]\n})\n</script>\n","<template>\n\t<div class=\"pl-5\">\n\t\t<div class=\"grid grid-cols-1 md:grid-cols-[70%,30%] overflow-hidden\">\n\t\t\t<div v-if=\"courseResource.doc\" class=\"h-[88vh] overflow-y-auto\">\n\t\t\t\t<div class=\"my-5\">\n\t\t\t\t\t<div class=\"pr-5 md:pr-10 pb-5 mb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold mb-4 text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Details') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.title\"\n\t\t\t\t\t\t\t\t:label=\"__('Title')\"\n\t\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t\t\t@input=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tdoctype=\"LMS Category\"\n\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.category\"\n\t\t\t\t\t\t\t\t:label=\"__('Category')\"\n\t\t\t\t\t\t\t\t:onCreate=\"(value, close) => openSettings('Categories', close)\"\n\t\t\t\t\t\t\t\t@update:modelValue=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\t\tv-model=\"instructors\"\n\t\t\t\t\t\t\t\tdoctype=\"User\"\n\t\t\t\t\t\t\t\t:label=\"__('Instructors')\"\n\t\t\t\t\t\t\t\t:filters=\"{ ignore_user_type: 1 }\"\n\t\t\t\t\t\t\t\t:onCreate=\"(close) => openSettings('Members', close)\"\n\t\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t\t\t@update:modelValue=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-xs text-ink-gray-5\">\n\t\t\t\t\t\t\t\t\t{{ __('Tags') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-model=\"newTag\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"__('Add a keyword and then press enter')\"\n\t\t\t\t\t\t\t\t\t:class=\"['w-full', 'flex-1', 'my-1']\"\n\t\t\t\t\t\t\t\t\t@keyup.enter=\"updateTags()\"\n\t\t\t\t\t\t\t\t\tid=\"tags\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"courseResource.doc.tags\"\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"tag in courseResource.doc.tags?.split(', ')\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center bg-surface-gray-2 text-ink-gray-7 p-2 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ tag }}\n\t\t\t\t\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"stroke-1.5 w-3 h-3 ml-2 cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"removeTag(tag)\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<Uploader\n\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.image\"\n\t\t\t\t\t\t\t\t:label=\"__('Course Image')\"\n\t\t\t\t\t\t\t\t:required=\"false\"\n\t\t\t\t\t\t\t\t@update:modelValue=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<ColorSwatches\n\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.card_gradient\"\n\t\t\t\t\t\t\t\t:label=\"__('Color')\"\n\t\t\t\t\t\t\t\t:description=\"__('Choose a color for the course card')\"\n\t\t\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\t\t\t@update:modelValue=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"pr-5 md:pr-10 pb-5 mb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Settings') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"user.data?.is_moderator\"\n\t\t\t\t\t\t\t\tclass=\"flex flex-col space-y-5\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.published\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Published')\"\n\t\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.published_on\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Published On')\"\n\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"flex flex-col space-y-5\">\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.upcoming\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Upcoming')\"\n\t\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.featured\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Featured')\"\n\t\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.disable_self_learning\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Disable Self Enrollment')\"\n\t\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"pr-5 md:pr-10 pb-5 mb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('About the Course') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"courseResource.doc.short_introduction\"\n\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t:rows=\"5\"\n\t\t\t\t\t\t\t:label=\"__('Short Introduction')\"\n\t\t\t\t\t\t\t:placeholder=\"\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'A one line introduction to the course that appears on the course card'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t<div class=\"mb-1.5 text-sm text-ink-gray-5\">\n\t\t\t\t\t\t\t\t{{ __('Course Description') }}\n\t\t\t\t\t\t\t\t<span class=\"text-ink-red-3\">*</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<TextEditor\n\t\t\t\t\t\t\t\t:content=\"courseResource.doc.description\"\n\t\t\t\t\t\t\t\t@change=\"\n\t\t\t\t\t\t\t\t\t(val) => {\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.description = val\n\t\t\t\t\t\t\t\t\t\tmakeFormDirty()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t:editable=\"true\"\n\t\t\t\t\t\t\t\t:fixedMenu=\"true\"\n\t\t\t\t\t\t\t\teditorClass=\"prose-sm max-w-none border-b border-x border-outline-gray-modals bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"courseResource.doc.video_link\"\n\t\t\t\t\t\t\t:label=\"__('Preview Video')\"\n\t\t\t\t\t\t\t:placeholder=\"\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'Paste the youtube link of a short video introducing the course'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t@input=\"makeFormDirty()\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\tv-model=\"related_courses\"\n\t\t\t\t\t\t\tdoctype=\"LMS Course\"\n\t\t\t\t\t\t\t:label=\"__('Related Courses')\"\n\t\t\t\t\t\t\t:filters=\"{ name: ['!=', courseResource.doc?.name] }\"\n\t\t\t\t\t\t\t:onCreate=\"\n\t\t\t\t\t\t\t\t(close) => {\n\t\t\t\t\t\t\t\t\trouter.push({\n\t\t\t\t\t\t\t\t\t\tname: 'Courses',\n\t\t\t\t\t\t\t\t\t\tquery: { newCourse: '1' },\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t@update:modelValue=\"makeFormDirty()\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"pr-5 md:pr-10 pb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold mt-5 text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Pricing and Certification') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-3 gap-5\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.paid_course\"\n\t\t\t\t\t\t\t\t:label=\"__('Paid Course')\"\n\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.enable_certification\"\n\t\t\t\t\t\t\t\t:label=\"__('Completion Certificate')\"\n\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.paid_certificate\"\n\t\t\t\t\t\t\t\t:label=\"__('Paid Certificate')\"\n\t\t\t\t\t\t\t\t@change=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_course ||\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_certificate\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.course_price\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Amount')\"\n\t\t\t\t\t\t\t\t\t:required=\"\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_course ||\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_certificate\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t@input=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tv-if=\"courseResource.doc.paid_certificate\"\n\t\t\t\t\t\t\t\t\tdoctype=\"Course Evaluator\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.evaluator\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Evaluator')\"\n\t\t\t\t\t\t\t\t\t:required=\"courseResource.doc.paid_certificate\"\n\t\t\t\t\t\t\t\t\t:onCreate=\"\n\t\t\t\t\t\t\t\t\t\t(value, close) => openSettings('Evaluators', close)\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t@update:modelValue=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_course ||\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_certificate\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\tdoctype=\"Currency\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.currency\"\n\t\t\t\t\t\t\t\t\t:filters=\"{ enabled: 1 }\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Currency')\"\n\t\t\t\t\t\t\t\t\t:required=\"\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_course ||\n\t\t\t\t\t\t\t\t\t\tcourseResource.doc.paid_certificate\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t@update:modelValue=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-if=\"courseResource.doc.paid_certificate\"\n\t\t\t\t\t\t\t\t\tv-model=\"courseResource.doc.timezone\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Timezone')\"\n\t\t\t\t\t\t\t\t\t:required=\"courseResource.doc.paid_certificate\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"__('e.g. IST, UTC, GMT...')\"\n\t\t\t\t\t\t\t\t\t@input=\"makeFormDirty()\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"pr-5 md:pr-10 pb-5 space-y-5\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold mt-5 text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Meta Tags') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tv-model=\"meta.description\"\n\t\t\t\t\t\t\t\t:label=\"__('Meta Description')\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\t:rows=\"7\"\n\t\t\t\t\t\t\t\t@input=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tv-model=\"meta.keywords\"\n\t\t\t\t\t\t\t\t:label=\"__('Meta Keywords')\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\t:rows=\"7\"\n\t\t\t\t\t\t\t\t:placeholder=\"__('Comma separated keywords for SEO')\"\n\t\t\t\t\t\t\t\t@input=\"makeFormDirty()\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"border-l h-[88vh] overflow-y-auto\">\n\t\t\t\t<CourseOutline\n\t\t\t\t\tv-if=\"courseResource.doc\"\n\t\t\t\t\t:courseName=\"courseResource.doc.name\"\n\t\t\t\t\t:title=\"__('Chapters')\"\n\t\t\t\t\t:allowEdit=\"true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tTextEditor,\n\tButton,\n\tcreateResource,\n\tcreateDocumentResource,\n\tFormControl,\n\tusePageMeta,\n\ttoast,\n} from 'frappe-ui'\nimport {\n\tinject,\n\tonMounted,\n\tonBeforeUnmount,\n\tref,\n\treactive,\n\twatch,\n\tgetCurrentInstance,\n} from 'vue'\nimport {\n\tescapeHTML,\n\tgetMetaInfo,\n\topenSettings,\n\tsanitizeHTML,\n\tupdateMetaInfo,\n} from '@/utils'\nimport { Trash2, X } from 'lucide-vue-next'\nimport { useRouter } from 'vue-router'\nimport { sessionStore } from '../../stores/session'\nimport Link from '@/components/Controls/Link.vue'\nimport CourseOutline from '@/components/CourseOutline.vue'\nimport MultiSelect from '@/components/Controls/MultiSelect.vue'\nimport ColorSwatches from '@/components/Controls/ColorSwatches.vue'\nimport Uploader from '@/components/Controls/Uploader.vue'\n\nconst user = inject('$user')\nconst newTag = ref('')\nconst { brand } = sessionStore()\nconst router = useRouter()\nconst instructors = ref([])\nconst related_courses = ref([])\nconst app = getCurrentInstance()\nconst { $dialog } = app.appContext.config.globalProperties\nconst isDirty = ref(false)\n\nconst props = defineProps({\n\tcourse: {\n\t\ttype: Object,\n\t},\n})\n\nconst meta = reactive({\n\tdescription: '',\n\tkeywords: '',\n})\n\nonMounted(() => {\n\tif (!user.data?.is_moderator && !user.data?.is_instructor) {\n\t\trouter.push({ name: 'Courses' })\n\t}\n\twindow.addEventListener('keydown', keyboardShortcut)\n})\n\nconst courseResource = createDocumentResource({\n\tdoctype: 'LMS Course',\n\tname: props.course.data?.name,\n\tauto: true,\n})\n\nwatch(\n\t() => courseResource.doc,\n\t() => {\n\t\tcheck_permission()\n\t\tgetMetaInfo('courses', courseResource.doc?.name, meta)\n\t\tupdateCourseData()\n\t}\n)\n\nconst updateCourseData = () => {\n\tObject.keys(courseResource.doc).forEach((key) => {\n\t\tif (key == 'instructors') {\n\t\t\tinstructors.value = []\n\t\t\tcourseResource.doc.instructors.forEach((instructor) => {\n\t\t\t\tinstructors.value.push(instructor.instructor)\n\t\t\t})\n\t\t} else if (key == 'related_courses') {\n\t\t\trelated_courses.value = []\n\t\t\tcourseResource.doc.related_courses.forEach((course) => {\n\t\t\t\trelated_courses.value.push(course.course)\n\t\t\t})\n\t\t}\n\t})\n\tlet checkboxes = [\n\t\t'published',\n\t\t'upcoming',\n\t\t'disable_self_learning',\n\t\t'paid_course',\n\t\t'featured',\n\t\t'enable_certification',\n\t\t'paid_certificate',\n\t]\n\tfor (let idx in checkboxes) {\n\t\tlet key = checkboxes[idx]\n\t\tcourseResource.doc[key] = courseResource.doc[key] ? true : false\n\t}\n}\n\nconst submitCourse = () => {\n\tvalidateFields()\n\tupdateCourse()\n}\n\nconst validateFields = () => {\n\tcourseResource.doc.description = sanitizeHTML(courseResource.doc.description)\n\n\tObject.keys(courseResource.doc).forEach((key) => {\n\t\tif (key != 'description' && typeof courseResource.doc[key] === 'string') {\n\t\t\tcourseResource.doc[key] = escapeHTML(courseResource.doc[key])\n\t\t}\n\t})\n}\n\nconst updateCourse = () => {\n\tcourseResource.setValue.submit(\n\t\t{\n\t\t\t...courseResource.doc,\n\t\t\tinstructors: instructors.value.map((instructor) => ({\n\t\t\t\tinstructor: instructor,\n\t\t\t})),\n\t\t\trelated_courses: related_courses.value.map((course) => ({\n\t\t\t\tcourse: course,\n\t\t\t})),\n\t\t},\n\t\t{\n\t\t\tonSuccess() {\n\t\t\t\tupdateMetaInfo('courses', courseResource.doc?.name, meta)\n\t\t\t\ttoast.success(__('Course updated successfully'))\n\t\t\t\tisDirty.value = false\n\t\t\t\tcourseResource.reload()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t\tconsole.error(err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst keyboardShortcut = (e) => {\n\tif (\n\t\te.key === 's' &&\n\t\t(e.ctrlKey || e.metaKey) &&\n\t\t!e.target.classList.contains('ProseMirror')\n\t) {\n\t\tsubmitCourse()\n\t\te.preventDefault()\n\t}\n}\n\nonBeforeUnmount(() => {\n\twindow.removeEventListener('keydown', keyboardShortcut)\n})\n\nconst deleteCourse = createResource({\n\turl: 'lms.lms.api.delete_course',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tcourse: courseResource.doc?.name,\n\t\t}\n\t},\n\tonSuccess() {\n\t\ttoast.success(__('Course deleted successfully'))\n\t\trouter.push({ name: 'Courses' })\n\t},\n})\n\nconst trashCourse = () => {\n\t$dialog({\n\t\ttitle: __('Delete Course'),\n\t\tmessage: __(\n\t\t\t'Deleting the course will also delete all its chapters and lessons. Are you sure you want to delete this course?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteCourse.submit()\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nconst updateTags = () => {\n\tif (newTag.value) {\n\t\tcourseResource.doc.tags = courseResource.doc.tags\n\t\t\t? `${courseResource.doc.tags}, ${newTag.value}`\n\t\t\t: newTag.value\n\t\tnewTag.value = ''\n\t\tmakeFormDirty()\n\t}\n}\n\nconst removeTag = (tag) => {\n\tcourseResource.doc.tags = courseResource.doc.tags\n\t\t?.split(', ')\n\t\t.filter((t) => t !== tag)\n\t\t.join(', ')\n\tnewTag.value = ''\n\tmakeFormDirty()\n}\n\nconst check_permission = () => {\n\tlet user_is_instructor = false\n\tif (user.data?.is_moderator) return\n\n\tinstructors.value.forEach((instructor) => {\n\t\tif (!user_is_instructor && instructor == user.data?.name) {\n\t\t\tuser_is_instructor = true\n\t\t}\n\t})\n\n\tif (!user_is_instructor) {\n\t\trouter.push({ name: 'Courses' })\n\t}\n}\n\nconst makeFormDirty = () => {\n\tisDirty.value = true\n}\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: courseResource.doc?.title,\n\t\ticon: brand.favicon,\n\t}\n})\n\ndefineExpose({\n\tsubmitCourse,\n\ttrashCourse,\n\tisDirty,\n})\n</script>\n","<template>\n\t<div v-if=\"course.data\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs class=\"h-7\" :items=\"breadcrumbs\" />\n\t\t\t<div v-if=\"tabIndex == 2\" class=\"flex items-center space-x-2\">\n\t\t\t\t<Badge v-if=\"childRef?.isDirty\" theme=\"orange\">\n\t\t\t\t\t{{ __('Not Saved') }}\n\t\t\t\t</Badge>\n\t\t\t\t<Button @click=\"childRef.trashCourse()\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Trash2 class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"solid\" @click=\"childRef.submitCourse()\">\n\t\t\t\t\t{{ __('Save') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</header>\n\t\t<CourseOverview v-if=\"!isAdmin\" :course=\"course\" />\n\t\t<div v-else>\n\t\t\t<Tabs :tabs=\"tabs\" v-model=\"tabIndex\">\n\t\t\t\t<template #tab-panel=\"{ tab }\">\n\t\t\t\t\t<component :is=\"tab.component\" :course=\"course\" ref=\"childRef\" />\n\t\t\t\t</template>\n\t\t\t</Tabs>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tBadge,\n\tButton,\n\tcreateResource,\n\tBreadcrumbs,\n\tTabs,\n\tusePageMeta,\n} from 'frappe-ui'\nimport { computed, inject, markRaw, onMounted, ref, watch } from 'vue'\nimport { sessionStore } from '@/stores/session'\nimport { useRouter, useRoute } from 'vue-router'\nimport { List, Settings2, Trash2, TrendingUp } from 'lucide-vue-next'\nimport CourseOverview from '@/pages/Courses/CourseOverview.vue'\nimport CourseDashboard from '@/pages/Courses/CourseDashboard.vue'\nimport CourseForm from '@/pages/Courses/CourseForm.vue'\n\nconst { brand } = sessionStore()\nconst router = useRouter()\nconst route = useRoute()\nconst user = inject('$user')\nconst tabIndex = ref(0)\nconst childRef = ref(null)\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nonMounted(() => {\n\tupdateTabIndex()\n})\n\nconst updateTabIndex = () => {\n\tconst hash = route.hash\n\tif (hash) {\n\t\ttabs.value.forEach((tab, index) => {\n\t\t\tif (tab.label?.toLowerCase() === hash.replace('#', '')) {\n\t\t\t\ttabIndex.value = index\n\t\t\t}\n\t\t})\n\t}\n}\n\nwatch(tabIndex, () => {\n\tconst tab = tabs.value[tabIndex.value]\n\tif (tab.label != route.hash.replace('#', '')) {\n\t\trouter.push({ ...route, hash: `#${tab.label.toLowerCase()}` })\n\t}\n})\n\nconst course = createResource({\n\turl: 'lms.lms.utils.get_course_details',\n\tcache: ['course', props.courseName],\n\tmakeParams() {\n\t\treturn {\n\t\t\tcourse: props.courseName,\n\t\t}\n\t},\n\tauto: true,\n})\n\nconst tabs = ref([\n\t{\n\t\tlabel: __('Overview'),\n\t\tcomponent: markRaw(CourseOverview),\n\t\ticon: List,\n\t},\n\t{\n\t\tlabel: __('Dashboard'),\n\t\tcomponent: markRaw(CourseDashboard),\n\t\ticon: TrendingUp,\n\t},\n\t{\n\t\tlabel: __('Settings'),\n\t\tcomponent: markRaw(CourseForm),\n\t\ticon: Settings2,\n\t},\n])\n\nwatch(\n\t() => props.courseName,\n\t() => {\n\t\tcourse.reload()\n\t}\n)\n\nwatch(course, () => {\n\tif (!isAdmin.value && !course.data?.published && !course.data?.upcoming) {\n\t\trouter.push({\n\t\t\tname: 'Courses',\n\t\t})\n\t}\n})\n\nconst isInstructor = () => {\n\tlet user_is_instructor = false\n\tcourse.data?.instructors.forEach((instructor) => {\n\t\tif (!user_is_instructor && instructor.name == user.data?.name) {\n\t\t\tuser_is_instructor = true\n\t\t}\n\t})\n\treturn user_is_instructor\n}\n\nconst isAdmin = computed(() => {\n\treturn user.data?.is_moderator || isInstructor()\n})\n\nconst breadcrumbs = computed(() => {\n\tlet crumbs = [{ label: __('Courses'), route: { name: 'Courses' } }]\n\tcrumbs.push({\n\t\tlabel: course?.data?.title,\n\t\troute: { name: 'CourseDetail', params: { courseName: course?.data?.name } },\n\t})\n\treturn crumbs\n})\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: course?.data?.title,\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n<style>\n.avatar-group {\n\tdisplay: inline-flex;\n\talign-items: center;\n}\n\n.avatar-group .avatar {\n\ttransition: margin 0.1s ease-in-out;\n}\n</style>\n"],"names":["router","useRouter","user","inject","readOnlyMode","capture","useTelemetry","props","__props","video_link","computed","enrollStudent","call","toast","err","_a","is_instructor","user_is_instructor","instructor","canGetCertificate","_c","_b","certificate","createResource","values","data","fetchCertificate","isAdmin","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_3","_hoisted_4","_toDisplayString","_unref","_hoisted_5","_hoisted_6","_createVNode","_component_router_link","Button","BookText","__","CertificationLinks","_createBlock","CreditCard","Badge","GraduationCap","_createTextVNode","_hoisted_7","_normalizeClass","_hoisted_8","BookOpen","_hoisted_9","_hoisted_10","Users","_hoisted_11","formatAmount","_hoisted_12","Star","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","show","_useModel","reviews","hasReviewed","review","reactive","createReview","submitReview","close","Dialog","$event","Rating","_cache","FormControl","watch","showReviewModal","ref","openReviewModal","_hoisted_2","_Fragment","index","UserAvatar","_renderList","ReviewModal","relatedCourses","course","CourseCard","Tooltip","CourseInstructors","tag","CourseCardOverlay","CourseOutline","CourseReviews","RelatedCourses","student","students","payment","purchasedCertificate","validateData","Link","openSettings","_withCtx","_renderSlot","_ctx","lessonProgress","createListResource","assessmentProgress","_d","getLessonStatus","lesson","lp","getAssessmentStatusTheme","status","hasAssessmentData","Avatar","ProgressBar","progress","Check","Minus","quiz","_hoisted_18","assignment","_hoisted_19","_hoisted_20","_hoisted_21","exercise","_hoisted_22","showEnrollmentModal","searchFilter","showProgressModal","currentStudent","theme","chartDetails","progressList","updateLessonProgress","value","a","b","rateA","filters","averageCompletionRate","progressColors","colorList","colors","progressColumns","lessonProgressSortingOptions","NumberChartGraph","Plus","ListView","ListHeader","item","ListHeaderItem","row","ListRows","ListRow","column","ListRowItem","_normalizeStyle","ECharts","_hoisted_23","_hoisted_24","Select","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","CourseEnrollmentModal","StudentCourseProgress","emit","__emit","Popover","togglePopover","isOpen","val","getColor","Palette","X","color","e","newTag","brand","sessionStore","instructors","related_courses","app","getCurrentInstance","$dialog","isDirty","meta","onMounted","keyboardShortcut","courseResource","createDocumentResource","check_permission","getMetaInfo","updateCourseData","key","checkboxes","idx","submitCourse","validateFields","updateCourse","sanitizeHTML","escapeHTML","updateMetaInfo","onBeforeUnmount","deleteCourse","trashCourse","updateTags","makeFormDirty","removeTag","t","usePageMeta","__expose","MultiSelect","Uploader","ColorSwatches","TextEditor","_hoisted_29","_hoisted_30","_hoisted_31","route","useRoute","tabIndex","childRef","updateTabIndex","hash","tabs","tab","markRaw","CourseOverview","List","CourseDashboard","TrendingUp","CourseForm","Settings2","isInstructor","breadcrumbs","crumbs","Breadcrumbs","Trash2","Tabs","_resolveDynamicComponent"],"mappings":"g7DAiKA,MAAMA,EAASC,GAAS,EAClBC,EAAOC,GAAO,OAAO,EACrBC,EAAe,OAAO,eACtB,CAAE,QAAAC,CAAO,EAAKC,GAAY,EAE1BC,EAAQC,EAORC,EAAaC,EAAS,IACvBH,EAAM,OAAO,KAAK,WACd,iCAAmCA,EAAM,OAAO,KAAK,WAEtD,IACP,EAED,SAASI,GAAgB,CACnBT,EAAK,KAMTU,GAAK,uBAAwB,CAC5B,IAAK,CACJ,QAAS,iBACT,OAAQL,EAAM,OAAO,KAAK,KAC1B,OAAQL,EAAK,KAAK,IACtB,CACA,CAAG,EACC,KAAK,IAAM,CACXG,EAAQ,qBAAsB,CAC7B,OAAQE,EAAM,OAAO,KAAK,IAC/B,CAAK,EACDM,EAAM,QAAQ,GAAG,uCAAuC,CAAC,EACzD,WAAW,IAAM,CAChBb,EAAO,KAAK,CACX,KAAM,SACN,OAAQ,CACP,WAAYO,EAAM,OAAO,KAAK,KAC9B,cAAe,EACf,aAAc,CACrB,CACA,CAAM,CACF,EAAG,GAAI,CACR,CAAC,EACA,MAAOO,GAAQ,OACfD,EAAM,QAAQ,KAAGE,EAAAD,EAAI,WAAJ,YAAAC,EAAe,KAAMD,CAAG,CAAC,EAC1C,QAAQ,MAAMA,CAAG,CAClB,CAAC,GA/BFD,EAAM,QAAQ,GAAG,mDAAmD,CAAC,EACrE,WAAW,IAAM,CAChB,OAAO,SAAS,KAAO,sBAAsB,OAAO,SAAS,QAAQ,EACtE,EAAG,GAAG,EA8BR,CAEA,MAAMG,EAAgB,IAAM,CAC3B,IAAIC,EAAqB,GACzB,OAAAV,EAAM,OAAO,KAAK,YAAY,QAASW,GAAe,OACjD,CAACD,GAAsBC,EAAW,QAAQH,EAAAb,EAAK,OAAL,YAAAa,EAAW,QACxDE,EAAqB,GAEvB,CAAC,EACMA,CACR,EAEME,EAAoBT,EAAS,IAAM,WACxC,MACC,IAAAK,EAAAR,EAAM,OAAO,OAAb,MAAAQ,EAAmB,wBACnBK,GAAAC,EAAAd,EAAM,OAAO,OAAb,YAAAc,EAAmB,aAAnB,YAAAD,EAA+B,WAAY,IAK7C,CAAC,EAEKE,EAAcC,EAAe,CAClC,IAAK,qEACL,WAAWC,EAAQ,CAClB,MAAO,CACN,OAAQA,EAAO,MAClB,CACC,EACA,UAAUC,EAAM,CACf,OAAO,KACN,mFACCA,EAAK,IACT,WAAc,mBAAmBA,EAAK,QAAQ,CAAC,GAC5C,QACH,CACC,CACD,CAAC,EAEKC,EAAmB,IAAM,SAC9BJ,EAAY,OAAO,CAClB,QAAQP,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,KAC3B,QAAQM,EAAAnB,EAAK,OAAL,YAAAmB,EAAW,IACrB,CAAE,CACF,EAEMM,EAAUjB,EAAS,IAAM,OAC9B,QAAOK,EAAAb,EAAK,OAAL,YAAAa,EAAW,eAAgBC,EAAa,CAChD,CAAC,0CAtQA,OAAAY,EAAA,EAAAC,EA4IM,MA5INC,GA4IM,CA1IEtB,EAAA,OAAO,KAAK,gBADnBqB,EAIE,SAAA,OAFA,IAAKpB,EAAA,MACN,MAAM,qDAEPsB,EAqIM,MArINC,GAqIM,CApIMxB,EAAA,OAAO,KAAK,aAAvBoB,IAAAC,EAEM,MAFNI,GAEMC,EADF1B,SAAO,KAAK,KAAK,EAAA,CAAA,YAET2B,EAAA/B,CAAA,gBAAZyB,EAgFM,MAAAO,GAAA,CA/EM5B,EAAA,OAAO,KAAK,YAAvBoB,IAAAC,EAyBM,MAzBNQ,GAyBM,CAxBLC,EAsBcC,EAAA,CArBZ,GAAE,uBAAgE,WAAA/B,EAAA,OAAO,mBAA6BA,EAAA,OAAO,KAAK,eAA0BA,EAAA,OAAO,KAAK,eAAe,MAAK,GAAA,EAAA,CAAA,iBAA6CA,EAAA,OAAO,KAAK,eAA0BA,EAAA,OAAO,KAAK,eAAe,MAAK,GAAA,EAAA,CAAA,kBAahS,IAOS,CAPT8B,EAOSH,EAAAK,CAAA,EAAA,CAPD,QAAQ,QAAQ,KAAK,KAAK,MAAM,WAC5B,SACV,IAAsC,CAAtCF,EAAsCH,EAAAM,EAAA,EAAA,CAA5B,MAAM,mBAAmB,CAAA,cAEpC,IAEO,CAFPV,EAEO,cADHW,EAAAA,GAAE,mBAAA,CAAA,EAAA,CAAA,2BAIRJ,EAAoEK,GAAA,CAA/C,WAAYnC,EAAA,OAAO,KAAK,KAAM,MAAM,oCAG9CA,EAAA,OAAO,KAAK,cAAgBmB,EAAA,WADxCiB,EAkBcL,EAAA,OAhBZ,GAAE,2CAA+E/B,EAAA,OAAO,KAAK,mBAQ9F,IAOS,CAPT8B,EAOSH,EAAAK,CAAA,EAAA,CAPD,QAAQ,QAAQ,KAAK,KAAK,MAAM,WAC5B,SACV,IAAwC,CAAxCF,EAAwCH,EAAAU,EAAA,EAAA,CAA5B,MAAM,mBAAmB,CAAA,cAEtC,IAEO,CAFPd,EAEO,cADHW,EAAAA,GAAE,iBAAA,CAAA,EAAA,CAAA,4BAKIlC,EAAA,OAAO,KAAK,wBAA0BmB,EAAA,WADlDiB,EAOQT,EAAAW,EAAA,EAAA,OALP,MAAM,OACN,KAAK,KACL,MAAM,mBAEN,IAA+D,KAA5DJ,EAAAA,GAAE,qDAAA,CAAA,EAAA,CAAA,WAGOf,EAAA,oBADbiB,EAaST,EAAAK,CAAA,EAAA,OAXP,uBAAO7B,EAAa,GACrB,QAAQ,QACR,MAAM,SACN,KAAK,OAEM,SACV,IAAsC,CAAtC2B,EAAsCH,EAAAM,EAAA,EAAA,CAA5B,MAAM,mBAAmB,CAAA,cAEpC,IAEO,CAFPV,EAEO,cADHW,EAAAA,GAAE,gBAAA,CAAA,EAAA,CAAA,WAIAvB,EAAA,WADPyB,EAWST,EAAAK,CAAA,EAAA,OATP,uBAAOd,EAAgB,GACxB,QAAQ,SACR,MAAM,cACN,KAAK,OAEM,SACV,IAA2C,CAA3CY,EAA2CH,EAAAY,EAAA,EAAA,CAA5B,MAAM,mBAAmB,CAAA,cAC9B,IACX,CADWC,EAAA,MACRN,EAAAA,GAAE,iBAAA,CAAA,EAAA,CAAA,uBAGPX,EA+CM,MA/CNkB,GA+CM,CA9CLlB,EAKM,MAAA,CAJL,MAAKmB,GAAA,CAAC,8BAA6B,CAAA,OAAA,CAChBf,EAAA/B,CAAA,EAAY,CAAA,KAE5BsC,EAAAA,GAAE,kBAAA,CAAA,EAAA,CAAA,EAENX,EAKM,MALNoB,GAKM,CAJLb,EAAuCH,EAAAiB,EAAA,EAAA,CAA7B,MAAM,oBAAoB,CAAA,EACpCrB,EAEO,OAFPsB,GAEOnB,EADH1B,EAAA,OAAO,KAAK,OAAO,EAAG,IAAC0B,EAAGQ,EAAAA,GAAE,SAAA,CAAA,EAAA,CAAA,IAGjCX,EAMM,MANNuB,GAMM,CALLhB,EAAoCH,EAAAoB,EAAA,EAAA,CAA7B,MAAM,oBAAoB,CAAA,EACjCxB,EAGO,OAHPyB,GAGOtB,EAFHC,EAAAsB,EAAA,EAAajD,EAAA,OAAO,KAAK,WAAW,CAAA,EAAI,MACxCkC,EAAAA,GAAE,mBAAA,CAAA,EAAA,CAAA,IAIA,SAASlC,EAAA,OAAO,KAAK,MAAM,EAAA,GADlCoB,IAAAC,EAQM,MARN6B,GAQM,CAJLpB,EAAmEH,EAAAwB,EAAA,EAAA,CAA7D,MAAM,oDAAoD,CAAA,EAChE5B,EAEO,OAFP6B,GAEO1B,EADH1B,EAAA,OAAO,KAAK,MAAM,EAAG,IAAC0B,EAAGQ,EAAAA,GAAE,QAAA,CAAA,EAAA,CAAA,cAIzBlC,EAAA,OAAO,KAAK,sBADnBoB,IAAAC,EAQM,MARNgC,GAQM,CAJLvB,EAA0CH,EAAAY,EAAA,EAAA,CAA3B,MAAM,kBAAkB,CAAA,EACvChB,EAEO,OAFP+B,GAEO5B,EADHQ,EAAAA,GAAE,2BAAA,CAAA,EAAA,CAAA,cAIAlC,EAAA,OAAO,KAAK,kBADnBoB,IAAAC,EAQM,MARNkC,GAQM,CAJLzB,EAA0CH,EAAAY,EAAA,EAAA,CAA3B,MAAM,kBAAkB,CAAA,EACvChB,EAEO,OAFPiC,GAEO9B,EADHQ,EAAAA,GAAE,mCAAA,CAAA,EAAA,CAAA,uUCxGX,MAAMuB,EAAOC,EAAW1D,EAAA,YAAC,EACnB2D,EAAUD,EAAW1D,EAAC,eAAe,EACrC4D,EAAcF,EAAW1D,EAAC,aAAa,EAE7C,IAAI6D,EAASC,GAAS,CACrB,OAAQ,GACR,OAAQ,CACT,CAAC,EAED,MAAM/D,EAAQC,EAOR+D,EAAehD,EAAe,CACnC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,IAAK,CACJ,QAAS,oBACT,OAAQjB,EAAM,WACd,GAAGiB,CACP,CACA,CACC,CACD,CAAC,EACD,SAASgD,EAAaC,EAAO,CAC5BJ,EAAO,OAASA,EAAO,OAAS,EAChCE,EAAa,OAAOF,EAAQ,CAC3B,UAAW,CACV,GAAI,CAACA,EAAO,OACX,MAAO,wBAET,EACA,WAAY,CACXF,EAAQ,MAAM,OAAM,EACpBC,EAAY,MAAM,OAAM,CACzB,EACA,QAAQtD,EAAK,OACZD,EAAM,QAAME,EAAAD,EAAI,WAAJ,YAAAC,EAAe,KAAMD,CAAG,CACrC,CACF,CAAE,EACD2D,EAAK,CACN,mBA5EC7B,EAyBST,EAAAuC,EAAA,EAAA,YAxBCT,EAAA,2CAAAA,EAAI,MAAAU,GACZ,QAAO,OAAcjC,EAAAA,GAAE,gBAAA,6DAAmH+B,GAAUD,EAAaC,CAAK,OAY5J,iBACV,IAQM,CARN1C,EAQM,MARND,GAQM,CAPLQ,EAAwDH,EAAAyC,EAAA,EAAA,CAAvC,WAAAzC,EAAAkC,CAAA,EAAO,OAAP,sBAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,GAAAxC,EAAAkC,CAAA,EAAO,OAAMM,GAAG,MAAOjC,EAAAA,GAAE,QAAA,kCAC1CJ,EAKEH,EAAA2C,CAAA,EAAA,CAJA,MAAOpC,EAAAA,GAAE,QAAA,EACV,KAAK,WACI,WAAAP,EAAAkC,CAAA,EAAO,OAAP,sBAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,GAAAxC,EAAAkC,CAAA,EAAO,OAAMM,GACrB,KAAM,+kBCgDZ,MAAMzE,EAAOC,GAAO,OAAO,EAErBI,EAAQC,EAeR4D,EAAc7C,EAAe,CAClC,IAAK,0BACL,MAAO,CAAC,qBAAsBhB,EAAM,YAAYQ,EAAAR,EAAM,aAAN,YAAAQ,EAAkB,MAAM,EACxE,OAAQ,CACP,QAAS,oBACT,QAAS,CACR,OAAQR,EAAM,WACd,OAAOc,EAAAd,EAAM,aAAN,YAAAc,EAAkB,MAC5B,CACA,EACC,KAAM,IAAAD,EAAAlB,EAAK,OAAL,MAAAkB,EAAW,KAClB,CAAC,EAEK+C,EAAU5C,EAAe,CAC9B,IAAK,4BACL,MAAO,CAAC,iBAAkBhB,EAAM,UAAU,EAC1C,YAAa,CACZ,MAAO,CACN,OAAQA,EAAM,UACjB,CACC,EACA,KAAM,EACP,CAAC,EAEDwE,EACC,IAAMxE,EAAM,WACZ,IAAM,CACL4D,EAAQ,OAAM,CACf,CACD,EAEA,MAAMa,EAAkBC,EAAI,EAAK,EAEjC,SAASC,GAAkB,CAC1BF,EAAgB,MAAQ,EACzB,qEAzHY7C,EAAAA,EAAAgC,CAAA,EAAQ,OAARhC,MAAAA,EAAc,QAAU3B,EAAA,YAAnCoB,IAAAC,EAsDM,MAtDNC,GAsDM,CApDEtB,EAAA,YAAU,CAAK2B,EAAAiC,CAAA,EAAY,UADlCxB,EAMST,EAAAK,CAAA,EAAA,OAJP,uBAAO0C,EAAe,GACvB,MAAM,0BAEN,IAA0B,KAAvBxC,EAAAA,GAAE,gBAAA,CAAA,EAAA,CAAA,oBAENX,EAEM,MAFNoD,GAEMjD,EADFQ,EAAAA,GAAE,iBAAA,CAAA,EAAA,CAAA,EAENX,EA0CM,MA1CNC,GA0CM,EAzCLJ,EAAA,EAAA,EAAAC,EAwCMuD,SAxCyBjD,EAAAgC,CAAA,EAAQ,KAAI,CAA9BE,EAAQgB,SAArBxD,EAwCM,MAAA,KAAA,CAvCLE,EAmCM,MAnCNE,GAmCM,CAlCLK,EAOcC,EAAA,CANZ,GAAE,iCAAuD8B,EAAO,cAAc,QAAQ,eAKvF,IAAyD,CAAzD/B,EAAyDgD,GAAA,CAA5C,KAAMjB,EAAO,cAAgB,KAAM,4CAEjDtC,EAyBM,MAzBNK,GAyBM,CAxBLE,EAScC,EAAA,CARZ,GAAE,iCAAyD8B,EAAO,cAAc,QAAQ,eAKzF,IAEO,CAFPtC,EAEO,OAFPM,GAEOH,EADHmC,EAAO,cAAc,SAAS,EAAA,CAAA,sBAGnCtC,EAEO,OAFPkB,GAEOf,EADHmC,EAAO,QAAQ,EAAA,CAAA,EAEnBtC,EAUM,MAVNoB,GAUM,MATLtB,EAQEuD,EAAA,KAAAG,EAPe,EAATF,GADR/C,EAQEH,EAAAwB,EAAA,EAAA,CAND,UAAM,qCACY0B,GAAS,KAAK,KAAKhB,EAAO,MAAM,qEAS3CA,EAAO,QAAlBzC,EAAA,EAAAC,EAEM,MAFNwB,GAEMnB,EADFmC,EAAO,MAAM,EAAA,CAAA,oCAKpB/B,EAKEkD,GAAA,YAJQR,EAAA,2CAAAA,EAAe,MAAAL,GAChB,cAAexC,EAAAgC,CAAA,gDAAAA,EAAO,MAAAQ,EAAA,MACtB,YAAaxC,EAAAiC,CAAA,8CAAAA,EAAW,MAAAO,EAAA,MAC/B,WAAYnE,EAAA,2XCjCf,MAAMD,EAAQC,EAORiF,EAAiBlE,EAAe,CACrC,IAAK,oCACL,MAAO,CAAC,kBAAmBhB,EAAM,UAAU,EAC3C,YAAa,CACZ,MAAO,CACN,OAAQA,EAAM,UACjB,CACC,EACA,KAAM,EACP,CAAC,EAED,OAAAwE,EACC,IAAMxE,EAAM,WACZ,IAAM,CACLkF,EAAe,OAAM,CACtB,CACD,iDAjDYtD,EAAAA,EAAAsD,CAAA,EAAe,OAAftD,MAAAA,EAAqB,QAAhCP,IAAAC,EAkBM,MAlBNC,GAkBM,CAjBLC,EAIM,MAJNoD,GAIM,CAHLpD,EAEM,MAFNC,GAEME,EADFQ,EAAAA,GAAE,iBAAA,CAAA,EAAA,CAAA,IAGPX,EAWM,MAXNE,GAWM,EARLL,EAAA,EAAA,EAAAC,EAOcuD,EAAA,KAAAG,EANIpD,EAAAsD,CAAA,EAAe,KAAzBC,QADR9C,EAOcL,EAAA,CALZ,IAAKmD,EAAO,KACZ,GAAE,CAAA,KAAA,eAAA,OAAA,CAAA,WAAgDA,EAAO,KAAI,EAC9D,MAAM,6BAEN,IAA+B,CAA/BpD,EAA+BqD,GAAA,CAAlB,OAAQD,CAAM,EAAA,KAAA,EAAA,CAAA,QAAA,CAAA,klBCf9B9D,EAAA,EAAAC,EAqFM,MArFNC,GAqFM,CApFLC,EAkFM,MAlFNoD,GAkFM,CAjFLpD,EA6EM,MA7ENC,GA6EM,CA5ELD,EAEM,MAFNE,GAEMC,EADF1B,SAAO,KAAK,KAAK,EAAA,CAAA,EAErBuB,EAEM,MAFNK,GAEMF,EADF1B,SAAO,KAAK,kBAAkB,EAAA,CAAA,EAElCuB,EAuCM,MAvCNM,GAuCM,CArCE,SAAS7B,EAAA,OAAO,KAAK,MAAM,EAAA,OADlCoC,EASUT,EAAAyD,CAAA,EAAA,OAPR,KAAMlD,EAAAA,GAAE,gBAAA,EACT,MAAM,mBAAA,aAEN,IAAwD,CAAxDJ,EAAwDH,EAAAwB,EAAA,EAAA,CAAlD,MAAM,0CAAyC,EACrD5B,EAEO,OAFPkB,GAEOf,EADH1B,SAAO,KAAK,MAAM,EAAA,CAAA,CAAA,8BAGX,SAASA,EAAA,OAAO,KAAK,MAAM,EAAA,OAAvCqB,EAEC,OAFDsB,GACE,GAAQ,YAGH3C,EAAA,OAAO,KAAK,sBADnBoC,EASUT,EAAAyD,CAAA,EAAA,OAPR,KAAMlD,EAAAA,GAAE,mBAAA,EACT,MAAM,mBAAA,aAEN,IAAyC,CAAzCJ,EAAyCH,EAAAoB,EAAA,EAAA,CAAlC,MAAM,0BAAyB,EACtCxB,EAEO,OAFPsB,GAEOnB,EADH1B,SAAO,KAAK,0BAA0B,EAAA,CAAA,CAAA,8BAG/BA,EAAA,OAAO,KAAK,sBAAxBqB,EAAsE,OAAtEyB,GAAuD,GAAQ,YAC/DvB,EAaM,MAbNyB,GAaM,CAZLzB,EAUO,OAAA,CATN,UAAM,WAAU,CAC0B,uBAAAvB,EAAA,OAAO,KAAK,YAAY,OAAM,CAAA,OAIxEoB,EAAA,EAAA,EAAAC,EAGEuD,SAFoB5E,EAAA,OAAO,KAAK,YAA1BU,QADR0B,EAGE0C,GAAA,CADA,KAAMpE,CAAA,EAAU,KAAA,EAAA,CAAA,MAAA,CAAA,cAGnBoB,EAA4DuD,GAAA,CAAxC,YAAarF,EAAA,OAAO,KAAK,WAAA,8BAGpCA,EAAA,OAAO,KAAK,MAAvBoB,IAAAC,EASM,MATN6B,GASM,QARL7B,EAOQuD,EAAA,KAAAG,EAHO/E,SAAO,KAAK,KAAK,MAAK,IAAA,EAA7BsF,QAJRlD,EAOQT,EAAAW,EAAA,EAAA,CANP,MAAM,OACN,KAAK,KACL,MAAM,sBAAA,aAGN,IAAS,KAANgD,CAAG,EAAA,CAAA,CAAA,kCAGR/D,EAEM,MAFN6B,GAEM,CADLtB,EAAsCyD,GAAA,CAAlB,OAAQvF,EAAA,MAAA,EAAM,KAAA,EAAA,CAAA,QAAA,CAAA,CAAA,GAEnCuB,EAGO,MAAA,CAFN,UAAQvB,EAAA,OAAO,KAAK,YACpB,MAAM,+QAAA,aAEPuB,EAOM,MAPN+B,GAOM,CANLxB,EAKE0D,GAAA,CAJA,MAAOtD,EAAAA,GAAE,gBAAA,EACT,WAAYlC,EAAA,OAAO,KAAK,KACxB,YAAa,GACb,YAAa,EAAAA,EAAA,OAAO,KAAK,UAAU,iDAGtC8B,EAIE2D,GAAA,CAHA,WAAYzF,EAAA,OAAO,KAAK,KACxB,WAAYA,EAAA,OAAO,KAAK,OACxB,WAAYA,EAAA,OAAO,KAAK,YAAU,IAAA,qDAGrCuB,EAEM,MAFNgC,GAEM,CADLzB,EAAsCyD,GAAA,CAAlB,OAAQvF,EAAA,MAAA,EAAM,KAAA,EAAA,CAAA,QAAA,CAAA,CAAA,KAGpC8B,EAAiD4D,GAAA,CAAhC,WAAY1F,EAAA,OAAO,KAAK,IAAA,sSC3B3C,MAAMyD,EAAOC,EAAoB1D,EAAA,YAAmC,EAC9D2F,EAAUlB,EAAmB,IAAI,EACjCmB,EAAWlC,EAAkB1D,EAAC,UAAU,EACxC6F,EAAUpB,EAAmB,IAAI,EACjCqB,EAAuBrB,EAAa,EAAK,EAEzC1E,EAAQC,EAIRG,EAAiB8D,GAAsB,OACrB8B,EAAA,GAGvB3F,GAAK,uBAAwB,CAC5B,IAAK,CACJ,QAAS,iBACT,QAAQG,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,KAC3B,OAAQoF,EAAQ,MAChB,QAASG,EAAqB,MAAQD,EAAQ,MAAQ,KACtD,sBAAuBC,EAAqB,KAAA,CAC7C,CACA,EACC,KAAK,IAAM,QACXvF,EAAAqF,EAAS,QAAT,MAAArF,EAAgB,SAChBF,EAAM,QAAQ,GAAG,+BAA+B,CAAC,EACjD4D,EAAA,CACD,CAAC,EACA,MAAO3D,GAAa,OACpBD,EAAM,MAAM,KAAGE,EAAAD,EAAI,WAAJ,YAAAC,EAAe,KAAMD,CAAG,CAAC,EACxC,QAAQ,MAAMA,CAAG,CAClB,CAAC,CACH,EAEMyF,EAAe,IACfJ,EAAQ,MAITG,EAAqB,OAAS,CAACD,EAAQ,OAC1CxF,EAAM,MAAM,GAAG,wDAAwD,CAAC,EACjE,IAED,IAPNA,EAAM,MAAM,GAAG,oCAAoC,CAAC,EAC7C,sBA9FR+B,EAiDST,EAAAuC,EAAA,EAAA,YAhDCT,EAAA,2CAAAA,EAAI,MAAAU,GACZ,QAAO,OAAcjC,EAAAA,GAAE,kBAAA,eAKb,iBACV,IAgCM,CAhCNX,EAgCM,MAhCND,GAgCM,CA/BLQ,EAIEH,EAAA2C,CAAA,EAAA,CAHD,KAAK,WACJ,MAAOpC,EAAAA,GAAE,uBAAA,aACD4D,EAAA,2CAAAA,EAAoB,MAAA3B,EAAA,iCAE9BrC,EAYEkE,GAAA,CAXD,QAAQ,OACP,MAAO9D,EAAAA,GAAE,SAAA,EACV,YAAY,eACHyD,EAAA,2CAAAA,EAAO,MAAAxB,GACf,SAAU,GACV,cAAgCxC,EAAAsE,EAAA,EAAY,SAAA,EAAmBxC,EAAA,MAAI,+CAQ9DqC,EAAA,WADP1D,EAYE4D,GAAA,OAVD,QAAQ,cACP,MAAO9D,EAAAA,GAAE,SAAA,EACV,YAAY,eACH2D,EAAA,2CAAAA,EAAO,MAAA1B,GACf,cAAgCxC,EAAAsE,EAAA,EAAY,cAAA,EAAwBxC,EAAA,MAAI,6DASjE,QAAOyC,EACjB,CAIM,CALe,MAAAjC,KAAK,CAC1B1C,EAIM,MAJNoD,GAIM,CAHL7C,EAESH,EAAAK,CAAA,EAAA,CAFD,QAAQ,QAAS,QAAKmC,GAAEhE,EAAc8D,CAAK,CAAA,aAClD,IAAkB,KAAf/B,EAAAA,GAAE,QAAA,CAAA,EAAA,CAAA,CAAA,wTC7CTd,EAAA,EAAAC,EAWM,MAXNC,GAWM,CAVLC,EAEM,MAFNoD,GAEMjD,EADFQ,EAAAA,GAAGlC,EAAA,KAAK,CAAA,EAAA,CAAA,EAEZuB,EAMM,MANNC,GAMM,CALL2E,GAAsBC,EAAA,OAAA,QAAA,EACtB7E,EAEM,MAFNE,GAEMC,EADF1B,EAAA,KAAK,EAAA,CAAA,EAETmG,GAAsBC,EAAA,OAAA,QAAA,CAAA,gtCCsJzB,MAAM3C,EAAOC,EAAoB1D,EAAA,YAAmC,EAE9DD,EAAQC,EAMRqG,EAAiBC,GAAmB,CACzC,QAAS,sBACT,QAAS,CACR,OAAQ,CAAC,KAAK/F,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,IAAI,EACrC,OAAQ,CAAC,KAAKM,EAAAd,EAAM,UAAN,YAAAc,EAAe,MAAM,CAAA,EAEpC,OAAQ,CAAC,OAAQ,SAAU,QAAQ,EACnC,KAAM,EAAA,CACN,EAEK0F,EAAqBxF,EAAe,CACzC,IAAK,6CACL,OAAQ,CACP,QAAQH,EAAAb,EAAM,OAAO,OAAb,YAAAa,EAAmB,KAC3B,QAAQ4F,EAAAzG,EAAM,UAAN,YAAAyG,EAAe,MAAA,EAExB,KAAM,EAAA,CACN,EAEKC,EAAmBC,GAAgB,SACxC,QACC7F,GAAAN,EAAA8F,EAAe,OAAf,YAAA9F,EAAqB,KAAMoG,GAAYA,EAAG,SAAWD,EAAO,UAA5D,YAAA7F,EACG,SAAU,GAAG,SAAS,CAE3B,EAWM+F,EAA4BC,GAC7BA,EAAO,SAAS,MAAM,EAAU,QAC3BA,EAAO,SAAS,MAAM,EAAU,MAC7B,SAGPC,EAAoB5G,EAAS,IAAM,WACxC,QACEK,EAAAgG,EAAmB,OAAnB,YAAAhG,EAAyB,UACzBgG,EAAmB,KAAK,QAAQ,OAAS,KACzC1F,EAAA0F,EAAmB,OAAnB,YAAA1F,EAAyB,cACzB0F,EAAmB,KAAK,YAAY,OAAS,KAC7C3F,EAAA2F,EAAmB,OAAnB,YAAA3F,EAAyB,YACzB2F,EAAmB,KAAK,UAAU,OAAS,CAE9C,CAAC,oBAzNAnE,EAgJST,EAAAuC,EAAA,EAAA,YA/ICT,EAAA,2CAAAA,EAAI,MAAAU,GACZ,QAAO,OAAcjC,EAAAA,GAAE,kBAAA,OAA+B4E,EAAA,MAAiB,MAAA,IAAA,IAK7D,iBACV,IAAA,uBAsIM,OAtINvF,EAsIM,MAtIND,GAsIM,CArILC,EAyBM,MAzBNoD,GAyBM,CAxBLpD,EAcM,MAdNC,GAcM,CAbLM,EAIEH,EAAAoF,EAAA,EAAA,CAHA,OAAOxG,EAAAP,EAAA,UAAA,YAAAO,EAAS,aAChB,OAAOM,EAAAb,EAAA,UAAA,YAAAa,EAAS,YACjB,KAAK,IAAA,4BAENU,EAOM,MAAA,KAAA,CANLA,EAEM,MAFNE,GAEMC,GADFd,EAAAZ,EAAA,UAAA,YAAAY,EAAS,WAAW,EAAA,CAAA,EAExBW,EAEM,MAFNK,GAEMF,EADF1B,EAAA,QAAQ,MAAM,EAAA,CAAA,CAAA,KAIpBuB,EAQM,MARNM,GAQM,CAPLN,EAEM,MAFNkB,GAEMf,EADF,KAAK,MAAM1B,EAAA,QAAQ,QAAQ,CAAA,EAAI,OAAKkC,EAAAA,GAAE,WAAA,CAAA,EAAA,CAAA,EAE1CJ,EAGEkF,GAAA,CAFA,MAAO9E,EAAAA,GAAE,iBAAA,EACT,SAAUlC,EAAA,QAAQ,QAAA,mCAKtBuB,EAyGM,MAAA,CAzGD,MAAKmB,GAAA,CAAC,aAAqBoE,EAAA,MAAiB,cAAA,EAAA,CAAA,CAAA,GAEzC9G,EAAA,QAAQ,MADfoB,IAAAC,EAkCM,MAlCNsB,GAkCM,CA9BLpB,EAIM,MAAA,KAAA,CAHLA,EAEM,MAFNsB,GAEMnB,EADFQ,EAAAA,GAAE,iBAAA,CAAA,EAAA,CAAA,CAAA,IAGPd,EAAA,EAAA,EAAAC,EAwBMuD,EAAA,KAAAG,EAvBc/E,EAAA,QAAQ,KAApBiH,IADR7F,EAAA,EAAAC,EAwBM,MAxBNyB,GAwBM,CApBLvB,EAOM,MAPNyB,GAOM,CANLzB,EAEO,OAFP2B,GAEOxB,EADHuF,EAAS,WAAW,EAAG,IAACvF,EAAGuF,EAAS,GAAG,EAAA,CAAA,EAE3C1F,EAEO,OAAA,KAAAG,EADHuF,EAAS,KAAK,EAAA,CAAA,CAAA,GAIZR,EAAgBQ,CAAQ,GAAA,gBAD/B7E,EAKUT,EAAAyD,CAAA,EAAA,OAHR,KAAMlD,EAAAA,GAAE,UAAA,CAAA,aAET,IAAyC,CAAzCJ,EAAyCH,EAAAuF,EAAA,EAAA,CAAlC,MAAM,0BAAyB,CAAA,0BAEvC9E,EAEUT,EAAAyD,CAAA,EAAA,OAFO,KAAMlD,EAAAA,GAAE,SAAA,CAAA,aACxB,IAAyC,CAAzCJ,EAAyCH,EAAAwF,EAAA,EAAA,CAAlC,MAAM,0BAAyB,CAAA,2CAQzC5F,EAmEM,MAnEN6B,GAmEM,EAjEEzB,GAAAA,EAAAA,EAAA4E,CAAA,EAAmB,OAAnB5E,YAAAA,EAAyB,UAAzBA,MAAAA,EAAkC,QADzCP,IAAAC,EAqBM,MArBNgC,GAqBM,CAjBL9B,EAIM,MAAA,KAAA,CAHLA,EAEM,MAFN+B,GAEM5B,EADFQ,EAAAA,GAAE,eAAA,CAAA,EAAA,CAAA,CAAA,IAGPd,EAAA,EAAA,EAAAC,EAWMuD,SAVUjD,EAAA4E,CAAA,EAAmB,KAAK,QAAhCa,IADRhG,EAAA,EAAAC,EAWM,MAXNkC,GAWM,CAPLhC,EAEM,MAAA,KAAAG,EADF0F,EAAK,UAAU,EAAA,CAAA,EAEnB7F,EAEM,MAAA,KAAAG,EADF0F,EAAK,KAAK,EAAA,CAAA,EAEd7F,EAAiC,MAAA,KAAAG,EAAzB0F,EAAK,UAAU,EAAG,IAAC,CAAA,CAAA,wBAKtBzF,GAAAA,EAAAA,EAAA4E,CAAA,EAAmB,OAAnB5E,YAAAA,EAAyB,cAAzBA,MAAAA,EAAsC,QAD7CP,IAAAC,EAoBM,MApBNmC,GAoBM,CAhBLjC,EAIM,MAAA,KAAA,CAHLA,EAEM,MAFN8F,GAEM3F,EADFQ,EAAAA,GAAE,qBAAA,CAAA,EAAA,CAAA,CAAA,IAGPd,EAAA,EAAA,EAAAC,EAUMuD,SATgBjD,EAAA4E,CAAA,EAAmB,KAAK,YAAtCe,IADRlG,EAAA,EAAAC,EAUM,MAVNkG,GAUM,CANLhG,EAEM,MAAA,KAAAG,EADF4F,EAAW,gBAAgB,EAAA,CAAA,EAE/BxF,EAEQH,EAAAW,EAAA,EAAA,CAFA,MAAOsE,EAAyBU,EAAW,MAAM,CAAA,aACxD,IAAuB,CAApB9E,EAAAd,EAAA4F,EAAW,MAAM,EAAA,CAAA,CAAA,+CAMhB3F,GAAAA,EAAAA,EAAA4E,CAAA,EAAmB,OAAnB5E,YAAAA,EAAyB,YAAzBA,MAAAA,EAAoC,QAD3CP,IAAAC,EAoBM,MApBNmG,GAoBM,CAhBLjG,EAIM,MAAA,KAAA,CAHLA,EAEM,MAFNkG,GAEM/F,EADFQ,EAAAA,GAAE,+BAAA,CAAA,EAAA,CAAA,CAAA,IAGPd,EAAA,EAAA,EAAAC,EAUMuD,SATcjD,EAAA4E,CAAA,EAAmB,KAAK,UAApCmB,IADRtG,EAAA,EAAAC,EAUM,MAVNsG,GAUM,CANLpG,EAEM,MAAA,KAAAG,EADFgG,EAAS,cAAc,EAAA,CAAA,EAE3B5F,EAEQH,EAAAW,EAAA,EAAA,CAFA,MAAOsE,EAAyBc,EAAS,MAAM,CAAA,aACtD,IAAqB,CAAlBlF,EAAAd,EAAAgG,EAAS,MAAM,EAAA,CAAA,CAAA,uwCCuJ3B,MAAM3H,EAAQC,EAIR4H,EAAsBnD,EAAI,EAAK,EAC/BoD,EAAepD,EAAmB,IAAI,EACtCqD,EAAoBrD,EAAI,EAAK,EAC7BsD,EAAiBtD,EAAS,IAAI,EAC9BuD,EAAQvD,EACb,aAAa,QAAQ,OAAO,GAAK,OAAS,WAAa,WAAA,EAOlDwD,EAAelH,EAAe,CACnC,IAAK,+CACL,YAAa,OACZ,MAAO,CACN,QAAQR,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,IAAA,CAE7B,EACA,KAAM,EAAA,CACN,EAEK2H,EAAe5B,GAAmB,CACvC,QAAS,iBACT,QAAS,CACR,QAAQ/F,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,IAAA,EAE5B,OAAQ,CACP,OACA,SACA,cACA,eACA,kBACA,WACA,UAAA,EAED,WAAY,IACZ,KAAM,GACN,MAAO,CAAC,kBAAkBM,EAAAd,EAAM,OAAO,OAAb,YAAAc,EAAmB,IAAI,CAAA,CACjD,EAEKwF,EAAiBtF,EAAe,CACrC,IAAK,0CACL,OAAQ,CACP,QAAQH,EAAAb,EAAM,OAAO,OAAb,YAAAa,EAAmB,IAAA,EAE5B,KAAM,EAAA,CACN,EAEKuH,EAAwBC,GAAkB,SAC3CA,GAAS,mBACZ7H,EAAA8F,EAAe,OAAf,MAAA9F,EAAqB,KAAK,CAAC8H,EAAQC,IAAW,SAC7C,MAAMC,EAAQF,EAAE,oBAAoB9H,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,cAAe,GAEtE,OADc+H,EAAE,oBAAoBzH,EAAAd,EAAM,OAAO,OAAb,YAAAc,EAAmB,cAAe,GACvD0H,CAChB,GACUH,GAAS,WACnBvH,EAAAwF,EAAe,OAAf,MAAAxF,EAAqB,KAAK,CAACwH,EAAQC,IAC3BD,EAAE,YAAcC,EAAE,aAAeD,EAAE,IAAMC,EAAE,KAGrD,EAEA/D,EAAM,CAACsD,CAAY,EAAG,IAAM,OAE3B,IAAIW,EAAmB,CACtB,QAAQjI,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,IAAA,EAGxBsH,EAAa,QAChBW,EAAQ,YAAc,CAAC,OAAQ,IAAIX,EAAa,KAAK,GAAG,GAIzDK,EAAa,OAAO,CACnB,QAAAM,CAAA,CACA,EACDN,EAAa,OAAA,CACd,CAAC,EAED,MAAMO,EAAwBvI,EAAS,IAAM,OAE5C,OADY,KAAK,MAAKK,EAAA0H,EAAa,OAAb,YAAA1H,EAAmB,gBAAgB,GAAK,GAC/C,GAChB,CAAC,EAEKmI,EAAiBxI,EAAS,IAAM,CACrC,IAAIyI,EAAY,CAAA,EAChB,OAAAA,EAAU,KAAKC,EAAOZ,EAAM,KAAK,EAAE,IAAO,GAAG,CAAC,EAC9CW,EAAU,KAAKC,EAAOZ,EAAM,KAAK,EAAE,MAAS,GAAG,CAAC,EAChDW,EAAU,KAAKC,EAAOZ,EAAM,KAAK,EAAE,KAAQ,GAAG,CAAC,EAC/CW,EAAU,KAAKC,EAAOZ,EAAM,KAAK,EAAE,MAAS,GAAG,CAAC,EACzCW,CACR,CAAC,EAEKE,EAAkB3I,EAAS,IACzB,CACN,CACC,MAAO,GAAG,MAAM,EAChB,IAAK,cACL,MAAO,KAAA,EAER,CACC,MAAO,GAAG,UAAU,EACpB,IAAK,WACL,MAAO,KAAA,EAER,CACC,MAAO,GAAG,YAAY,EACtB,IAAK,WACL,MAAO,OAAA,CACR,CAED,EAEK4I,EAA+B,CACpC,CACC,MAAO,GAAG,cAAc,EACxB,MAAO,QACP,SAAU,CACTX,EAAqB,OAAO,CAC7B,CAAA,EAED,CACC,MAAO,GAAG,iBAAiB,EAC3B,MAAO,kBACP,SAAU,CACTA,EAAqB,iBAAiB,CACvC,CAAA,CACD,yDAnaA5G,EAoPM,MApPND,GAoPM,CAnPLC,EAkBM,MAlBNoD,GAkBM,CAjBL7C,EAGEiH,GAAA,CAFA,MAAO7G,EAAAA,GAAE,UAAA,EACT,MAAOP,EAAAsB,EAAA,GAAa1C,EAAAP,SAAO,OAAP,YAAAO,EAAa,WAAW,CAAA,4BAE9CuB,EAGEiH,GAAA,CAFA,MAAO7G,EAAAA,GAAE,yBAAA,EACT,MAAOuG,EAAA,KAAA,4BAET3G,EAOmBiH,GAAA,CANjB,MAAO7G,EAAAA,GAAE,gBAAA,EACT,QAAOrB,EAAAb,EAAA,OAAO,OAAP,YAAAa,EAAa,SAAM,CAAA,GAEhB,SACV,IAAuD,CAAvDiB,EAAuDH,EAAAwB,EAAA,EAAA,CAAjD,MAAM,yCAAwC,CAAA,6BAGtDrB,EAAyEiH,GAAA,CAAtD,MAAO7G,EAAAA,GAAE,SAAA,EAAc,OAAOtB,EAAAZ,EAAA,OAAO,OAAP,YAAAY,EAAa,OAAA,8BAE/DW,EA+NM,MA/NNC,GA+NM,CA9NLD,EAoGM,MApGNE,GAoGM,CAnGLF,EAiBM,MAjBNK,GAiBM,CAhBLL,EAEM,MAFNM,GAEMH,EADFQ,EAAAA,GAAE,UAAA,CAAA,EAAA,CAAA,EAENX,EAYM,MAZNkB,GAYM,CAXLX,EAIEH,EAAA2C,CAAA,EAAA,YAHQuD,EAAA,2CAAAA,EAAY,MAAA1D,GACpB,YAAajC,EAAAA,GAAE,gBAAA,EAChB,KAAK,MAAA,uCAENJ,EAKSH,EAAAK,CAAA,EAAA,CALA,uBAAO4F,EAAA,MAAmB,GAAA,GACvB,SACV,IAAkC,CAAlC9F,EAAkCH,EAAAqH,EAAA,EAAA,CAA5B,MAAM,oBAAmB,CAAA,aACrB,IACX,CADWxG,EAAA,MACRN,EAAAA,GAAE,QAAA,CAAA,EAAA,CAAA,CAAA,aAKDP,EAAAuG,CAAA,EAAa,UAAWvG,EAAAA,KAAa,OAAbA,MAAAA,EAAmB,QADlDP,EAAA,EAAAC,EAgFM,MAhFNsB,GAgFM,CA5ELb,EAmEWH,EAAAsH,EAAA,EAAA,CAlET,QAASJ,EAAA,MACT,KAAMlH,EAAAuG,CAAA,EAAa,KACpB,OAAO,OACN,QAAS,8BAGT,aAED,IASa,CATbpG,EASaH,EAAAuH,EAAA,EAAA,CARZ,MAAM,uFAAqF,WAI1F,IAA+B,QAFhC7H,EAKiBuD,EAAA,KAAAG,EAHD8D,EAAA,MAARM,QAFR/G,EAKiBT,EAAAyH,EAAA,EAAA,CAJf,KAAAD,EAEA,IAAKA,EAAK,GAAA,oCAIb/H,EAAA,EAAA,EAAAC,EA+CWuD,EAAA,KAAAG,EA/CapD,EAAAuG,CAAA,EAAa,KAApBmB,QAAjBjH,EA+CWT,EAAA2H,EAAA,EAAA,CA/CgC,MAAM,iBAAe,WAC/D,IA6CU,CA7CVxH,EA6CUH,EAAA4H,EAAA,EAAA,CA5CR,IAAAF,EACA,aAAmCvB,EAAA,MAAiB,GAAkBC,EAAA,MAAiBsB,GAMxF,MAAM,gBAAA,GAEK,QAAOnD,EACjB,CAgCc,CAjCO,OAAAsD,EAAQ,KAAAL,MAAI,CACjCrH,EAgCcH,EAAA8H,EAAA,EAAA,CA/BZ,KAAMJ,EAAIG,EAAO,GAAG,EACpB,MAAOA,EAAO,MACf,MAAM,QAAA,GAEK,SACV,IAOM,CAPKA,EAAO,KAAG,mBAArBnI,EAOM,MAAAwB,GAAA,CANLf,EAKEH,EAAAoF,EAAA,EAAA,CAJD,MAAM,oBACL,MAAOsC,EAAG,aACV,MAAOF,GACR,KAAK,IAAA,+BAIKK,EAAO,KAAG,gBADtBpH,EAIE4E,GAAA,OAFA,SAAU,KAAK,KAAKqC,EAAIG,EAAO,GAAG,CAAA,EACnC,MAAM,aAAA,6CAGR,IAEM,CAFKA,EAAO,KAAG,gBAArBnI,EAEM,MAAAyB,GAAApB,EADFC,MAAM0H,EAAIG,EAAO,GAAG,CAAA,EAAG,OAAM,aAAA,CAAA,EAAA,CAAA,GAGrBA,EAAO,KAAG,YADtBpI,EAAA,EAAAC,EAKM,MALN2B,GAKMtB,EADF,KAAK,KAAK2H,EAAIG,EAAO,GAAG,IAAK,KACjC,CAAA,IACApI,IAAAC,EAEM,WADFgI,EAAIG,EAAO,GAAG,EAAE,SAAA,CAAQ,EAAA,CAAA,EAAA,gHAQ1B7H,EAAAuG,CAAA,EAAa,MAAQvG,EAAAuG,CAAA,EAAa,aADzC9G,EAAA,EAAAC,EAOM,MAPN+B,GAOM,CAHLtB,EAESH,EAAAK,CAAA,EAAA,CAFA,QAAKqC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,GAAExC,EAAAuG,CAAA,EAAa,KAAA,EAAI,aAChC,IAAqB,KAAlBhG,EAAAA,GAAE,WAAA,CAAA,EAAA,CAAA,CAAA,mCAKTX,EAwHM,MAxHN8B,GAwHM,GAtHE1B,EAAAA,EAAAsG,CAAA,EAAa,OAAbtG,YAAAA,EAAmB,kBAAgB,GAD1CP,IAAAC,EA2EM,MA3ENiC,GA2EM,CAvEL/B,EAEM,MAFNgC,GAEM7B,EADFQ,EAAAA,GAAE,kBAAA,CAAA,EAAA,CAAA,EAENX,EAmEM,MAnENiC,GAmEM,CAhELjC,EAiCM,MAjCN8F,GAiCM,EAhCLjG,EAAA,EAAA,EAAAC,EA+BMuD,UA7BSjD,EAAAA,EAAAsG,CAAA,EAAa,OAAbtG,YAAAA,EAAmB,sBAA1B0H,IAFRjI,EAAA,EAAAC,EA+BM,MA/BNkG,GA+BM,CA3BLhG,EAcO,MAAA,CAbN,MAAM,iBACL,MAAKmI,GAAA,iBAA0C/H,EAAAiH,CAAA,EAAOZ,EAAA,KAAK,EAAeqB,EAAI,KAAK,WAAU,MAAA,QAA6CA,EAAI,KAAK,WAAU,IAAA,UAA6CA,EAAI,KAAK,WAAU,KAAA,kCAa/NvH,EAIUH,EAAAyD,CAAA,EAAA,CAJA,KAAMiE,EAAI,KAAK,cAAc,QAAO,IAAA,EAAA,CAAA,aAC7C,IAEM,CAFN9H,EAEM,MAFNiG,GAEM9F,EADF2H,EAAI,KAAK,MAAK,GAAA,EAAA,CAAA,CAAA,EAAA,CAAA,CAAA,uBAGnBvH,EAMUH,EAAAyD,CAAA,EAAA,CANA,KAAMiE,EAAI,KAAA,aACnB,IAAA,OAIM,OAJN9H,EAIM,MAJNkG,GAIM/F,EAFJ,KAAK,MAAO2H,EAAI,QAAQ9I,EAAAP,EAAA,OAAO,OAAP,YAAAO,EAAa,mBACpC,KACH,CAAA,CAAA,oCAIHuB,EA6BEH,EAAAgI,EAAA,EAAA,CA5BD,MAAM,YACL,QAAO,OAAmBjB,EAAA,oKAA4b/G,EAAAA,EAAAsG,CAAA,EAAa,OAAbtG,YAAAA,EAAmB,wBAAqB,CAAA,CAAA,4DA+B3fA,EAAAA,EAAA0E,CAAA,EAAe,OAAf1E,MAAAA,EAAqB,QAD5BP,IAAAC,EA0CM,MA1CNsG,GA0CM,CAtCLpG,EAUM,MAVNqI,GAUM,CATLrI,EAEM,MAFNsI,GAEMnI,EADFQ,EAAAA,GAAE,mBAAA,CAAA,EAAA,CAAA,EAENJ,EAKEH,EAAAmI,EAAA,EAAA,CAJA,QAAShB,EACT,sBAAiBzE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAG+D,GAAkBD,EAAqBC,CAAK,GAChE,YAAalG,EAAAA,GAAE,SAAA,EAChB,MAAM,OAAA,4BAGRX,EA0BM,MA1BNwI,GA0BM,EAvBL3I,EAAA,EAAA,EAAAC,EAsBMuD,EAAA,KAAAG,EArBcpD,EAAA0E,CAAA,EAAe,KAA3BY,IADR7F,EAAA,EAAAC,EAsBM,MAtBN2I,GAsBM,CAlBLzI,EAOM,MAPN0I,GAOM,CANL1I,EAEO,OAFP2I,GAEOxI,EADHuF,EAAS,WAAW,EAAG,IAACvF,EAAGuF,EAAS,GAAG,EAAA,CAAA,EAE3C1F,EAEO,OAAA,KAAAG,EADHuF,EAAS,KAAK,EAAA,CAAA,CAAA,GAGnBnF,EASUH,EAAAyD,CAAA,EAAA,CATA,KAAM6B,EAAS,gBAAA,aACxB,IAAA,OAOM,OAPN1F,EAOM,MAAA,KAAAG,EALJ,KAAK,KAAkBuF,EAAS,mBAAmB1G,EAAAP,SAAO,OAAP,YAAAO,EAAa,mBAI/D,KACH,CAAA,CAAA,sDASAqH,EAAA,WADPxF,EAKE+H,GAAA,kBAHQvC,EAAA,2CAAAA,EAAmB,MAAAzD,GAC3B,OAAQnE,EAAA,OACR,SAAU2B,EAAAuG,CAAA,CAAA,uDAGLJ,EAAA,WADP1F,EAMEgI,GAAA,kBAJQtC,EAAA,2CAAAA,EAAiB,MAAA3D,GACzB,OAAQnE,EAAA,OACR,QAAS+H,EAAA,MACT,QAASpG,EAAA0E,CAAA,CAAA,odC7KZ,MAAMgE,EAAOC,EAQP1B,EAAS1I,EAAS,IAChB,CACN,MACA,OACA,QACA,QACA,SACA,OACA,SACA,SACA,OACA,OACA,OACA,QAAA,CAED,oBA1GAmB,EA2EM,MAAA,KAAA,CA1ELE,EAEM,MAFND,GAEMI,EADFQ,EAAAA,GAAGlC,EAAA,KAAK,CAAA,EAAA,CAAA,EAEZ8B,EAmEUH,EAAA4I,EAAA,EAAA,CAnED,UAAU,SAAS,MAAM,QAAA,GACtB,OAAMrE,EAChB,CAuCM,CAxCc,cAAAsE,EAAe,OAAAC,KAAM,CACzClJ,EAuCM,MAvCNoD,GAuCM,CAtCL7C,EAqCcH,EAAA2C,CAAA,EAAA,CApCb,KAAK,OACL,aAAa,MACb,MAAM,SACL,YAAapC,EAAAA,GAAE,WAAA,EACf,QAAOsI,EACP,WAAYxK,EAAA,WACZ,sBAAiBqE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAGqG,GAAgBL,sBAA0BK,CAAG,EAAA,GAEvD,SACV,IAiBM,CAjBNnJ,EAiBM,MAAA,CAhBL,MAAM,sBACL,MAAKmI,GAAY1J,EAAA,4BAAsD2B,EAAAgJ,EAAA,EAAuB3K,EAAA,WAAW,YAAA,cAYlGA,EAAA,yBADRoC,EAGET,EAAAiJ,EAAA,EAAA,OADD,MAAM,mCAAA,UAIE,SACV,IAKS,CALT9I,EAKSH,EAAAK,CAAA,EAAA,CALD,QAAQ,SAAO,WACtB,IAGE,CAHFF,EAGEH,EAAAkJ,EAAA,EAAA,CAFD,MAAM,yBACL,uBAAOR,EAAI,oBAAA,IAAA,EAAA,gEAOP,KAAInE,EACd,CAqBM,CAtBY,MAAAjC,KAAK,CACvB1C,EAqBM,MArBNC,GAqBM,CApBLD,EAEM,MAFNE,GAEMC,EADFQ,EAAAA,GAAE,UAAA,CAAA,EAAA,CAAA,EAENX,EAgBM,MAhBNK,GAgBM,QAfLP,EAcOuD,EAAA,KAAAG,EAbU6D,EAAA,MAATkC,QADRzJ,EAcO,MAAA,CAZL,IAAKyJ,EACN,MAAM,qCACL,MAAKpB,GAAA,iBAA6B/H,EAAAgJ,EAAA,EAASG,EAAM,YAAA,EAAW,GAAA,CAAA,GAG5D,QAAiBC,GAAC,CAAgBV,sBAA0BS,CAAK,EAAW7G,EAAA,EAAiBoG,WAAeS,CAAK,oCAYvHvJ,EAEM,MAFNkB,GAEMf,EADF1B,EAAA,WAAW,EAAA,CAAA,CAAA,k9CCwQjB,MAAMN,EAAOC,GAAO,OAAO,EACrBqL,EAASvG,EAAI,EAAE,EACf,CAAE,MAAAwG,CAAK,EAAKC,GAAY,EACxB1L,EAASC,GAAS,EAClB0L,EAAc1G,EAAI,CAAA,CAAE,EACpB2G,EAAkB3G,EAAI,CAAA,CAAE,EACxB4G,EAAMC,GAAkB,EACxB,CAAE,QAAAC,CAAO,EAAKF,EAAI,WAAW,OAAO,iBACpCG,EAAU/G,EAAI,EAAK,EAEnB1E,EAAQC,EAMRyL,EAAO3H,GAAS,CACrB,YAAa,GACb,SAAU,EACX,CAAC,EAED4H,GAAU,IAAM,SACX,GAACnL,EAAAb,EAAK,OAAL,MAAAa,EAAW,eAAgB,GAACM,EAAAnB,EAAK,OAAL,MAAAmB,EAAW,gBAC3CrB,EAAO,KAAK,CAAE,KAAM,SAAS,CAAE,EAEhC,OAAO,iBAAiB,UAAWmM,CAAgB,CACpD,CAAC,EAED,MAAMC,EAAiBC,GAAuB,CAC7C,QAAS,aACT,MAAMtL,EAAAR,EAAM,OAAO,OAAb,YAAAQ,EAAmB,KACzB,KAAM,EACP,CAAC,EAEDgE,EACC,IAAMqH,EAAe,IACrB,IAAM,OACLE,EAAgB,EAChBC,GAAY,WAAWxL,EAAAqL,EAAe,MAAf,YAAArL,EAAoB,KAAMkL,CAAI,EACrDO,EAAgB,CACjB,CACD,EAEA,MAAMA,EAAmB,IAAM,CAC9B,OAAO,KAAKJ,EAAe,GAAG,EAAE,QAASK,GAAQ,CAC5CA,GAAO,eACVd,EAAY,MAAQ,CAAA,EACpBS,EAAe,IAAI,YAAY,QAASlL,GAAe,CACtDyK,EAAY,MAAM,KAAKzK,EAAW,UAAU,CAC7C,CAAC,GACSuL,GAAO,oBACjBb,EAAgB,MAAQ,CAAA,EACxBQ,EAAe,IAAI,gBAAgB,QAAS1G,GAAW,CACtDkG,EAAgB,MAAM,KAAKlG,EAAO,MAAM,CACzC,CAAC,EAEH,CAAC,EACD,IAAIgH,EAAa,CAChB,YACA,WACA,wBACA,cACA,WACA,uBACA,kBACF,EACC,QAASC,KAAOD,EAAY,CAC3B,IAAID,EAAMC,EAAWC,CAAG,EACxBP,EAAe,IAAIK,CAAG,EAAI,EAAAL,EAAe,IAAIK,CAAG,CACjD,CACD,EAEMG,EAAe,IAAM,CAC1BC,EAAc,EACdC,EAAY,CACb,EAEMD,EAAiB,IAAM,CAC5BT,EAAe,IAAI,YAAcW,GAAaX,EAAe,IAAI,WAAW,EAE5E,OAAO,KAAKA,EAAe,GAAG,EAAE,QAASK,GAAQ,CAC5CA,GAAO,eAAiB,OAAOL,EAAe,IAAIK,CAAG,GAAM,WAC9DL,EAAe,IAAIK,CAAG,EAAIO,GAAWZ,EAAe,IAAIK,CAAG,CAAC,EAE9D,CAAC,CACF,EAEMK,EAAe,IAAM,CAC1BV,EAAe,SAAS,OACvB,CACC,GAAGA,EAAe,IAClB,YAAaT,EAAY,MAAM,IAAKzK,IAAgB,CACnD,WAAYA,CAChB,EAAK,EACF,gBAAiB0K,EAAgB,MAAM,IAAKlG,IAAY,CACvD,OAAQA,CACZ,EAAK,CACL,EACE,CACC,WAAY,OACXuH,GAAe,WAAWlM,EAAAqL,EAAe,MAAf,YAAArL,EAAoB,KAAMkL,CAAI,EACxDpL,EAAM,QAAQ,GAAG,6BAA6B,CAAC,EAC/CmL,EAAQ,MAAQ,GAChBI,EAAe,OAAM,CACtB,EACA,QAAQtL,EAAK,OACZD,EAAM,QAAME,EAAAD,EAAI,WAAJ,YAAAC,EAAe,KAAMD,CAAG,EACpC,QAAQ,MAAMA,CAAG,CAClB,CACH,CACA,CACA,EAEMqL,EAAoBZ,GAAM,CAE9BA,EAAE,MAAQ,MACTA,EAAE,SAAWA,EAAE,UAChB,CAACA,EAAE,OAAO,UAAU,SAAS,aAAa,IAE1CqB,EAAY,EACZrB,EAAE,eAAc,EAElB,EAEA2B,GAAgB,IAAM,CACrB,OAAO,oBAAoB,UAAWf,CAAgB,CACvD,CAAC,EAED,MAAMgB,EAAe5L,EAAe,CACnC,IAAK,4BACL,WAAWC,EAAQ,OAClB,MAAO,CACN,QAAQT,EAAAqL,EAAe,MAAf,YAAArL,EAAoB,IAC/B,CACC,EACA,WAAY,CACXF,EAAM,QAAQ,GAAG,6BAA6B,CAAC,EAC/Cb,EAAO,KAAK,CAAE,KAAM,SAAS,CAAE,CAChC,CACD,CAAC,EAEKoN,EAAc,IAAM,CACzBrB,EAAQ,CACP,MAAO,GAAG,eAAe,EACzB,QAAS,GACR,iHACH,EACE,QAAS,CACR,CACC,MAAO,GAAG,QAAQ,EAClB,MAAO,MACP,QAAS,QACT,QAAQtH,EAAO,CACd0I,EAAa,OAAM,EACnB1I,EAAK,CACN,CACJ,CACA,CACA,CAAE,CACF,EAEM4I,EAAa,IAAM,CACpB7B,EAAO,QACVY,EAAe,IAAI,KAAOA,EAAe,IAAI,KAC1C,GAAGA,EAAe,IAAI,IAAI,KAAKZ,EAAO,KAAK,GAC3CA,EAAO,MACVA,EAAO,MAAQ,GACf8B,EAAa,EAEf,EAEMC,EAAazH,GAAQ,OAC1BsG,EAAe,IAAI,MAAOrL,EAAAqL,EAAe,IAAI,OAAnB,YAAArL,EACvB,MAAM,MACP,OAAQyM,GAAMA,IAAM1H,GACpB,KAAK,MACP0F,EAAO,MAAQ,GACf8B,EAAa,CACd,EAEMhB,EAAmB,IAAM,OAC9B,IAAIrL,EAAqB,IACrBF,EAAAb,EAAK,OAAL,MAAAa,EAAW,eAEf4K,EAAY,MAAM,QAASzK,GAAe,OACrC,CAACD,GAAsBC,KAAcH,EAAAb,EAAK,OAAL,YAAAa,EAAW,QACnDE,EAAqB,GAEvB,CAAC,EAEIA,GACJjB,EAAO,KAAK,CAAE,KAAM,SAAS,CAAE,EAEjC,EAEMsN,EAAgB,IAAM,CAC3BtB,EAAQ,MAAQ,EACjB,EAEA,OAAAyB,GAAY,IAAM,OACjB,MAAO,CACN,OAAO1M,EAAAqL,EAAe,MAAf,YAAArL,EAAoB,MAC3B,KAAM0K,EAAM,OACd,CACA,CAAC,EAEDiC,EAAa,CACZ,aAAAd,EACA,YAAAQ,EACA,QAAApB,CACD,CAAC,qBAniBA,OAAApK,EAAA,EAAAC,EA4SM,MA5SNC,GA4SM,CA3SLC,EA0SM,MA1SNoD,GA0SM,CAzSMhD,EAAAiK,CAAA,EAAe,KAA1BxK,IAAAC,EAgSM,MAhSNG,GAgSM,CA/RLD,EA8RM,MA9RNE,GA8RM,CA7RLF,EAyEM,MAzENK,GAyEM,CAxELL,EAEM,MAFNM,GAEMH,EADFQ,EAAAA,GAAE,SAAA,CAAA,EAAA,CAAA,EAENX,EAcM,MAdNkB,GAcM,CAbLX,EAKEH,EAAA2C,CAAA,EAAA,YAJQ3C,EAAAiK,CAAA,EAAe,IAAI,2CAAnBjK,EAAAiK,CAAA,EAAe,IAAI,MAAKzH,GAChC,MAAOjC,EAAAA,GAAE,OAAA,EACT,SAAU,GACV,uBAAO4K,qCAEThL,EAMEkE,GAAA,CALD,QAAQ,0BACCrE,EAAAiK,CAAA,EAAe,IAAI,+CAAnBjK,EAAAiK,CAAA,EAAe,IAAI,SAAQzH,kBAGhB2I,MAFnB,MAAO5K,EAAAA,GAAE,UAAA,EACT,UAAWkG,EAAOnE,KAAUtC,EAAAsE,EAAA,eAA2BhC,EAAK,+CAI/D1C,EAqCM,MArCNoB,GAqCM,CApCLb,EAQEqL,GAAA,YAPQhC,EAAA,4CAAAA,EAAW,MAAAhH,kBAMA2I,MALpB,QAAQ,OACP,MAAO5K,EAAAA,GAAE,aAAA,EACT,QAAS,CAAA,iBAAA,CAAA,EACT,SAAW+B,GAAUtC,EAAAsE,EAAA,YAAwBhC,CAAK,EAClD,SAAU,8CAGZ1C,EA0BM,MAAA,KAAA,CAzBLA,EAEM,MAFNsB,GAEMnB,EADFQ,EAAAA,GAAE,MAAA,CAAA,EAAA,CAAA,EAENJ,EAMEH,EAAA2C,CAAA,EAAA,YALQ0G,EAAA,2CAAAA,EAAM,MAAA7G,GACd,YAAajC,EAAAA,GAAE,oCAAA,EACf,SAAO,CAAA,SAAA,SAAA,MAAA,CAA4B,EACnC,0BAAa2K,EAAU,EAAA,CAAA,OAAA,CAAA,GACxB,GAAG,6CAEJtL,EAcM,MAAA,KAAA,CAbLA,EAYM,MAZNuB,GAYM,CAVEnB,EAAAiK,CAAA,EAAe,IAAI,YAD1BvK,EAUMuD,EAAA,CAAA,IAAA,GAAAG,GARSpD,EAAAA,KAAe,IAAI,OAAnBA,YAAAA,EAAyB,MAAK,MAArC2D,IAFRlE,EAAA,EAAAC,EAUM,MAVN2B,GAUM,CALFR,EAAAd,EAAA4D,CAAG,EAAG,IACT,CAAA,EAAAxD,EAGEH,EAAAkJ,EAAA,EAAA,CAFD,MAAM,yCACL,QAAK1G,IAAE4I,EAAUzH,CAAG,kDAO3B/D,EAeM,MAfN2B,GAeM,CAdLpB,EAKEsL,GAAA,YAJQzL,EAAAiK,CAAA,EAAe,IAAI,4CAAnBjK,EAAAiK,CAAA,EAAe,IAAI,MAAKzH,kBAGb2I,MAFnB,MAAO5K,EAAAA,GAAE,cAAA,EACT,SAAU,mCAIZJ,EAMEuL,GAAA,YALQ1L,EAAAiK,CAAA,EAAe,IAAI,sDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,cAAazH,oBAIrB2I,MAHnB,MAAO5K,EAAAA,GAAE,OAAA,EACT,YAAaA,EAAAA,GAAE,oCAAA,EAChB,MAAM,2DAMTX,EA2CM,MA3CN6B,GA2CM,CA1CL7B,EAEM,MAFN8B,GAEM3B,EADFQ,EAAAA,GAAE,UAAA,CAAA,EAAA,CAAA,EAENX,EAsCM,MAtCN+B,GAsCM,EApCE3B,EAAAA,EAAAjC,CAAA,EAAK,OAALiC,MAAAA,EAAW,cADlBP,IAAAC,EAgBM,MAhBNkC,GAgBM,CAZLzB,EAKEH,EAAA2C,CAAA,EAAA,CAJD,KAAK,sBACI3C,EAAAiK,CAAA,EAAe,IAAI,iDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,UAASzH,GACpC,MAAOjC,EAAAA,GAAE,WAAA,EACT,0BAAQ4K,qCAEVhL,EAKEH,EAAA2C,CAAA,EAAA,YAJQ3C,EAAAiK,CAAA,EAAe,IAAI,oDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,aAAYzH,GACvC,MAAOjC,EAAAA,GAAE,cAAA,EACV,KAAK,OACJ,0BAAQ4K,iDAGXvL,EAmBM,MAnBNiC,GAmBM,CAlBL1B,EAKEH,EAAA2C,CAAA,EAAA,CAJD,KAAK,sBACI3C,EAAAiK,CAAA,EAAe,IAAI,gDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,SAAQzH,GACnC,MAAOjC,EAAAA,GAAE,UAAA,EACT,0BAAQ4K,qCAEVhL,EAKEH,EAAA2C,CAAA,EAAA,CAJD,KAAK,sBACI3C,EAAAiK,CAAA,EAAe,IAAI,gDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,SAAQzH,GACnC,MAAOjC,EAAAA,GAAE,UAAA,EACT,0BAAQ4K,qCAEVhL,EAKEH,EAAA2C,CAAA,EAAA,CAJD,KAAK,sBACI3C,EAAAiK,CAAA,EAAe,IAAI,6DAAnBjK,EAAAiK,CAAA,EAAe,IAAI,sBAAqBzH,GAChD,MAAOjC,EAAAA,GAAE,yBAAA,EACT,0BAAQ4K,2CAMbvL,EA8DM,MA9DN8F,GA8DM,CA7DL9F,EAEM,MAFNgG,GAEM7F,EADFQ,EAAAA,GAAE,kBAAA,CAAA,EAAA,CAAA,EAENJ,EAYEH,EAAA2C,CAAA,EAAA,YAXQ3C,EAAAiK,CAAA,EAAe,IAAI,0DAAnBjK,EAAAiK,CAAA,EAAe,IAAI,mBAAkBzH,GAC9C,KAAK,WACJ,KAAM,EACN,MAAOjC,EAAAA,GAAE,oBAAA,EACT,YAAsBA,EAAAA,4EAKtB,SAAU,GACV,0BAAQ4K,mDAEVvL,EAiBM,MAjBNiG,GAiBM,CAhBLjG,EAGM,MAHNkG,GAGM,CAFFvF,EAAAA,EAAAA,EAAAA,0BAA2B,IAC9B,CAAA,EAAAmC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA9C,EAAqC,OAAA,CAA/B,MAAM,kBAAiB,IAAC,EAAA,KAE/BO,EAWEH,EAAA2L,EAAA,EAAA,CAVA,QAAS3L,EAAAiK,CAAA,EAAe,IAAI,YAC5B,SAAMvH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAaqG,GAAG,CAAiB/I,EAAAiK,CAAA,EAAe,IAAI,YAAclB,EAAcoC,EAAa,IAMnG,SAAU,GACV,UAAW,GACZ,YAAY,gJAIdhL,EASEH,EAAA2C,CAAA,EAAA,YARQ3C,EAAAiK,CAAA,EAAe,IAAI,kDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,WAAUzH,GACrC,MAAOjC,EAAAA,GAAE,eAAA,EACT,YAAsBA,EAAAA,qEAKtB,yBAAO4K,mDAGThL,EAcEqL,GAAA,YAbQ/B,EAAA,8CAAAA,EAAe,MAAAjH,oBAYJ2I,MAXpB,QAAQ,aACP,MAAO5K,EAAAA,GAAE,iBAAA,EACT,QAAO,CAAA,KAAA,CAAA,MAAiBP,GAAAA,EAAAiK,CAAA,EAAe,MAAfjK,YAAAA,GAAoB,IAAI,CAAA,EAChD,SAAoBsC,GAAK,CAAgBtC,EAAAnC,CAAA,EAAO,KAAI,gGAYvD+B,EA6EM,MA7ENoG,GA6EM,CA5ELpG,EAEM,MAFNqI,GAEMlI,EADFQ,EAAAA,GAAE,2BAAA,CAAA,EAAA,CAAA,EAENX,EAmBM,MAnBNsI,GAmBM,CAlBL/H,EAKEH,EAAA2C,CAAA,EAAA,CAJD,KAAK,sBACI3C,EAAAiK,CAAA,EAAe,IAAI,mDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,YAAWzH,GACtC,MAAOjC,EAAAA,GAAE,aAAA,EACT,0BAAQ4K,qCAEVhL,EAKEH,EAAA2C,CAAA,EAAA,CAJD,KAAK,sBACI3C,EAAAiK,CAAA,EAAe,IAAI,4DAAnBjK,EAAAiK,CAAA,EAAe,IAAI,qBAAoBzH,GAC/C,MAAOjC,EAAAA,GAAE,wBAAA,EACT,0BAAQ4K,qCAEVhL,EAKEH,EAAA2C,CAAA,EAAA,CAJD,KAAK,sBACI3C,EAAAiK,CAAA,EAAe,IAAI,wDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,iBAAgBzH,GAC3C,MAAOjC,EAAAA,GAAE,kBAAA,EACT,0BAAQ4K,uCAGXvL,EAoDM,MApDNwI,GAoDM,CAnDLxI,EAyBM,MAzBNyI,GAyBM,CAvBarI,EAAAiK,CAAA,EAAe,IAAI,aAAyBjK,EAAAiK,CAAA,EAAe,IAAI,sBADjFxJ,EAYET,EAAA2C,CAAA,EAAA,kBAPQ3C,EAAAiK,CAAA,EAAe,IAAI,oDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,aAAYzH,GACvC,MAAOjC,EAAAA,GAAE,QAAA,EACT,SAAqBP,EAAAiK,CAAA,EAAe,IAAI,aAAyBjK,EAAAiK,CAAA,EAAe,IAAI,iBAIpF,yBAAOkB,0DAGFnL,EAAAiK,CAAA,EAAe,IAAI,sBAD1BxJ,EAUE4D,GAAA,OARD,QAAQ,8BACCrE,EAAAiK,CAAA,EAAe,IAAI,kDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,UAASzH,oBAMjB2I,MALnB,MAAO5K,EAAAA,GAAE,WAAA,EACT,SAAUP,EAAAiK,CAAA,EAAe,IAAI,iBAC7B,SAAsB,CAAAxD,EAAOnE,KAAUtC,EAAAsE,EAAA,eAA2BhC,EAAK,oEAM1E1C,EAwBM,MAxBN0I,GAwBM,CAtBatI,EAAAiK,CAAA,EAAe,IAAI,aAAyBjK,EAAAiK,CAAA,EAAe,IAAI,sBADjFxJ,EAcE4D,GAAA,OATD,QAAQ,sBACCrE,EAAAiK,CAAA,EAAe,IAAI,iDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,SAAQzH,oBAOhB2I,MANnB,QAAS,CAAA,QAAA,CAAA,EACT,MAAO5K,EAAAA,GAAE,UAAA,EACT,SAAqBP,EAAAiK,CAAA,EAAe,IAAI,aAAyBjK,EAAAiK,CAAA,EAAe,IAAI,sEAO/EjK,EAAAiK,CAAA,EAAe,IAAI,sBAD1BxJ,EAOET,EAAA2C,CAAA,EAAA,kBALQ3C,EAAAiK,CAAA,EAAe,IAAI,gDAAnBjK,EAAAiK,CAAA,EAAe,IAAI,SAAQzH,GACnC,MAAOjC,EAAAA,GAAE,UAAA,EACT,SAAUP,EAAAiK,CAAA,EAAe,IAAI,iBAC7B,YAAa1J,EAAAA,GAAE,uBAAA,EACf,yBAAO4K,8EAMZvL,EAqBM,MArBN2I,GAqBM,CApBL3I,EAEM,MAFNgM,GAEM7L,EADFQ,EAAAA,GAAE,WAAA,CAAA,EAAA,CAAA,EAENX,EAgBM,MAhBNiM,GAgBM,CAfL1L,EAMEH,EAAA2C,CAAA,EAAA,CALQ,WAAAmH,EAAK,YAAL,sBAAApH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAF,GAAAsH,EAAK,YAAWtH,GACxB,MAAOjC,EAAAA,GAAE,kBAAA,EACV,KAAK,WACJ,KAAM,EACN,yBAAO4K,qCAEThL,EAOEH,EAAA2C,CAAA,EAAA,CANQ,WAAAmH,EAAK,SAAL,sBAAApH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAF,GAAAsH,EAAK,SAAQtH,GACrB,MAAOjC,EAAAA,GAAE,eAAA,EACV,KAAK,WACJ,KAAM,EACN,YAAaA,EAAAA,GAAE,kCAAA,EACf,yBAAO4K,qEAMbvL,EAOM,MAPNkM,GAOM,CALE9L,EAAAiK,CAAA,EAAe,SADtBxJ,EAKEoD,GAAA,OAHA,WAAY7D,EAAAiK,CAAA,EAAe,IAAI,KAC/B,MAAO1J,EAAAA,GAAE,UAAA,EACT,UAAW,0TC1PjB,KAAM,CAAE,MAAA+I,CAAK,EAAKC,GAAY,EACxB1L,EAASC,GAAS,EAClBiO,EAAQC,GAAQ,EAChBjO,EAAOC,GAAO,OAAO,EACrBiO,EAAWnJ,EAAI,CAAC,EAChBoJ,EAAWpJ,EAAI,IAAI,EAEnB1E,EAAQC,EAOd0L,GAAU,IAAM,CACfoC,EAAc,CACf,CAAC,EAED,MAAMA,EAAiB,IAAM,CAC5B,MAAMC,EAAOL,EAAM,KACfK,GACHC,EAAK,MAAM,QAAQ,CAACC,EAAKpJ,IAAU,SAC9BtE,EAAA0N,EAAI,QAAJ,YAAA1N,EAAW,iBAAkBwN,EAAK,QAAQ,IAAK,EAAE,IACpDH,EAAS,MAAQ/I,EAEnB,CAAC,CAEH,EAEAN,EAAMqJ,EAAU,IAAM,CACrB,MAAMK,EAAMD,EAAK,MAAMJ,EAAS,KAAK,EACjCK,EAAI,OAASP,EAAM,KAAK,QAAQ,IAAK,EAAE,GAC1ClO,EAAO,KAAK,CAAE,GAAGkO,EAAO,KAAM,IAAIO,EAAI,MAAM,YAAW,CAAE,EAAE,CAAE,CAE/D,CAAC,EAED,MAAM/I,EAASnE,EAAe,CAC7B,IAAK,mCACL,MAAO,CAAC,SAAUhB,EAAM,UAAU,EAClC,YAAa,CACZ,MAAO,CACN,OAAQA,EAAM,UACjB,CACC,EACA,KAAM,EACP,CAAC,EAEKiO,EAAOvJ,EAAI,CAChB,CACC,MAAO,GAAG,UAAU,EACpB,UAAWyJ,GAAQC,EAAc,EACjC,KAAMC,EACR,EACC,CACC,MAAO,GAAG,WAAW,EACrB,UAAWF,GAAQG,EAAe,EAClC,KAAMC,EACR,EACC,CACC,MAAO,GAAG,UAAU,EACpB,UAAWJ,GAAQK,EAAU,EAC7B,KAAMC,EACR,CACA,CAAC,EAEDjK,EACC,IAAMxE,EAAM,WACZ,IAAM,CACLmF,EAAO,OAAM,CACd,CACD,EAEAX,EAAMW,EAAQ,IAAM,SACf,CAAC/D,EAAQ,OAAS,GAACZ,EAAA2E,EAAO,OAAP,MAAA3E,EAAa,YAAa,GAACM,EAAAqE,EAAO,OAAP,MAAArE,EAAa,WAC9DrB,EAAO,KAAK,CACX,KAAM,SACT,CAAG,CAEH,CAAC,EAED,MAAMiP,EAAe,IAAM,OAC1B,IAAIhO,EAAqB,GACzB,OAAAF,EAAA2E,EAAO,OAAP,MAAA3E,EAAa,YAAY,QAASG,GAAe,OAC5C,CAACD,GAAsBC,EAAW,QAAQH,EAAAb,EAAK,OAAL,YAAAa,EAAW,QACxDE,EAAqB,GAEvB,GACOA,CACR,EAEMU,EAAUjB,EAAS,IAAM,OAC9B,QAAOK,EAAAb,EAAK,OAAL,YAAAa,EAAW,eAAgBkO,EAAY,CAC/C,CAAC,EAEKC,EAAcxO,EAAS,IAAM,SAClC,IAAIyO,EAAS,CAAC,CAAE,MAAO,GAAG,SAAS,EAAG,MAAO,CAAE,KAAM,UAAW,CAAE,EAClE,OAAAA,EAAO,KAAK,CACX,OAAOpO,EAAA2E,GAAA,YAAAA,EAAQ,OAAR,YAAA3E,EAAc,MACrB,MAAO,CAAE,KAAM,eAAgB,OAAQ,CAAE,YAAYM,EAAAqE,GAAA,YAAAA,EAAQ,OAAR,YAAArE,EAAc,KAAM,CAC3E,CAAE,EACM8N,CACR,CAAC,EAED,OAAA1B,GAAY,IAAM,OACjB,MAAO,CACN,OAAO1M,EAAA2E,GAAA,YAAAA,EAAQ,OAAR,YAAA3E,EAAc,MACrB,KAAM0K,EAAM,OACd,CACA,CAAC,gBA1JW,OAAAtJ,EAAAuD,CAAA,EAAO,UAAlB7D,EA2BM,MAAAC,GAAA,CA1BLC,EAiBS,SAjBToD,GAiBS,CAdR7C,EAAgDH,EAAAiN,EAAA,EAAA,CAAnC,MAAM,MAAO,MAAOF,EAAA,yBACtBd,EAAA,OAAQ,GAAnBxM,IAAAC,EAYM,MAZNG,GAYM,EAXQjB,EAAAsN,EAAA,QAAA,MAAAtN,EAAU,aAAvB6B,EAEQT,EAAAW,EAAA,EAAA,OAFwB,MAAM,qBACrC,IAAqB,KAAlBJ,EAAAA,GAAE,WAAA,CAAA,EAAA,CAAA,oBAENJ,EAISH,EAAAK,CAAA,EAAA,CAJA,QAAKqC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,GAAE0J,EAAA,MAAS,iBACb,OACV,IAAqC,CAArC/L,EAAqCH,EAAAkN,EAAA,EAAA,CAA7B,MAAM,oBAAoB,CAAA,UAGpC/M,EAESH,EAAAK,CAAA,EAAA,CAFD,QAAQ,QAAS,QAAKqC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,GAAE0J,EAAA,MAAS,4BACxC,IAAgB,KAAb3L,EAAAA,GAAE,MAAA,CAAA,EAAA,CAAA,wBAIef,EAAA,WACvBE,EAMM,MAAAI,GAAA,CALLK,EAIOH,EAAAmN,EAAA,EAAA,CAJA,KAAMd,EAAA,iBAAeJ,EAAA,2CAAAA,EAAQ,MAAAzJ,KACxB,YAAS+B,EACnB,CAAiE,CAD1C,IAAA+H,KAAG,MAC1B7L,EAAiE2M,GAAjDd,EAAI,SAAS,EAAA,CAAG,OAAQtM,EAAAuD,CAAA,UAAY,WAAJ,IAAI2I,+DAJvDzL,EAAmD+L,GAAA,OAAlB,OAAQxM,EAAAuD,CAAA"}